"use strict";var dy=Object.defineProperty,py=Object.defineProperties,gy=Object.getOwnPropertyDescriptors,Wh=Object.getOwnPropertySymbols,my=Object.prototype.hasOwnProperty,yy=Object.prototype.propertyIsEnumerable,qh=(kn,me,lt)=>me in kn?dy(kn,me,{enumerable:!0,configurable:!0,writable:!0,value:lt}):kn[me]=lt,Hl=(kn,me)=>{for(var lt in me||(me={}))my.call(me,lt)&&qh(kn,lt,me[lt]);if(Wh)for(var lt of Wh(me))yy.call(me,lt)&&qh(kn,lt,me[lt]);return kn},Wl=(kn,me)=>py(kn,gy(me));(self.webpackChunkmy_dollar=self.webpackChunkmy_dollar||[]).push([[19],{5910:(kn,me,lt)=>{var s,D=lt(5704),Bi=lt(6279),Lt=lt(300),tt=lt(1704),S=lt(2870),yt=lt(1100),rn=(s=Bi)&&"object"==typeof s&&"default"in s?s:{default:s},j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},G=function(s){function t(r,a){var l=this;return(l=s.call(this,a)||this).code=r,l.message=a,l.name="FirebaseError",l.toString=function(){return l.name+": [code="+l.code+"]: "+l.message},l}return D.__extends(t,s),t}(Error),Ie=new Lt.Logger("@firebase/firestore");function Dn(){return Ie.logLevel}function rt(s){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(Ie.logLevel<=Lt.LogLevel.DEBUG){var a=t.map(Zt);Ie.debug.apply(Ie,D.__spreadArrays(["Firestore (7.24.0): "+s],a))}}function Gt(s){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(Ie.logLevel<=Lt.LogLevel.ERROR){var a=t.map(Zt);Ie.error.apply(Ie,D.__spreadArrays(["Firestore (7.24.0): "+s],a))}}function Pn(s){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(Ie.logLevel<=Lt.LogLevel.WARN){var a=t.map(Zt);Ie.warn.apply(Ie,D.__spreadArrays(["Firestore (7.24.0): "+s],a))}}function Zt(s){if("string"==typeof s)return s;try{return JSON.stringify(s)}catch(r){return s}}function at(s){void 0===s&&(s="Unexpected state");var t="FIRESTORE (7.24.0) INTERNAL ASSERTION FAILED: "+s;throw Gt(t),new Error(t)}function nt(s,t){s||at()}function J(s,t){return s}function sn(s){var t=0;for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&t++;return t}function mi(s,t){for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&t(r,s[r])}function wr(s){for(var t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}var xr=function(){function s(t,r,a){void 0===r?r=0:r>t.length&&at(),void 0===a?a=t.length-r:a>t.length-r&&at(),this.segments=t,this.offset=r,this.t=a}return Object.defineProperty(s.prototype,"length",{get:function(){return this.t},enumerable:!1,configurable:!0}),s.prototype.isEqual=function(t){return 0===s.i(this,t)},s.prototype.child=function(t){var r=this.segments.slice(this.offset,this.limit());return t instanceof s?t.forEach(function(a){r.push(a)}):r.push(t),this.o(r)},s.prototype.limit=function(){return this.offset+this.length},s.prototype.u=function(t){return this.o(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},s.prototype.h=function(){return this.o(this.segments,this.offset,this.length-1)},s.prototype.l=function(){return this.segments[this.offset]},s.prototype._=function(){return this.get(this.length-1)},s.prototype.get=function(t){return this.segments[this.offset+t]},s.prototype.m=function(){return 0===this.length},s.prototype.T=function(t){if(t.length<this.length)return!1;for(var r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0},s.prototype.I=function(t){if(this.length+1!==t.length)return!1;for(var r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0},s.prototype.forEach=function(t){for(var r=this.offset,a=this.limit();r<a;r++)t(this.segments[r])},s.prototype.A=function(){return this.segments.slice(this.offset,this.limit())},s.i=function(t,r){for(var a=Math.min(t.length,r.length),l=0;l<a;l++){var d=t.get(l),m=r.get(l);if(d<m)return-1;if(d>m)return 1}return t.length<r.length?-1:t.length>r.length?1:0},s}(),W=function(s){function t(){return null!==s&&s.apply(this,arguments)||this}return D.__extends(t,s),t.prototype.o=function(r,a,l){return new t(r,a,l)},t.prototype.R=function(){return this.A().join("/")},t.prototype.toString=function(){return this.R()},t.g=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];for(var l=[],d=0,m=r;d<m.length;d++){var v=m[d];if(v.indexOf("//")>=0)throw new G(j.INVALID_ARGUMENT,"Invalid segment ("+v+"). Paths must not contain // in them.");l.push.apply(l,v.split("/").filter(function(w){return w.length>0}))}return new t(l)},t.P=function(){return new t([])},t}(xr),st=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Q=function(s){function t(){return null!==s&&s.apply(this,arguments)||this}return D.__extends(t,s),t.prototype.o=function(r,a,l){return new t(r,a,l)},t.V=function(r){return st.test(r)},t.prototype.R=function(){return this.A().map(function(r){return r=r.replace("\\","\\\\").replace("`","\\`"),t.V(r)||(r="`"+r+"`"),r}).join(".")},t.prototype.toString=function(){return this.R()},t.prototype.p=function(){return 1===this.length&&"__name__"===this.get(0)},t.v=function(){return new t(["__name__"])},t.S=function(r){for(var a=[],l="",d=0,m=function(){if(0===l.length)throw new G(j.INVALID_ARGUMENT,"Invalid field path ("+r+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");a.push(l),l=""},v=!1;d<r.length;){var w=r[d];if("\\"===w){if(d+1===r.length)throw new G(j.INVALID_ARGUMENT,"Path has trailing escape character: "+r);var E=r[d+1];if("\\"!==E&&"."!==E&&"`"!==E)throw new G(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+r);l+=E,d+=2}else"`"===w?(v=!v,d++):"."!==w||v?(l+=w,d++):(m(),d++)}if(m(),v)throw new G(j.INVALID_ARGUMENT,"Unterminated ` in path: "+r);return new t(a)},t.P=function(){return new t([])},t}(xr),Y=function(){function s(t){this.path=t}return s.D=function(t){return new s(W.g(t))},s.C=function(t){return new s(W.g(t).u(5))},s.prototype.N=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},s.prototype.isEqual=function(t){return null!==t&&0===W.i(this.path,t.path)},s.prototype.toString=function(){return this.path.toString()},s.i=function(t,r){return W.i(t.path,r.path)},s.F=function(t){return t.length%2==0},s.$=function(t){return new s(new W(t.slice()))},s}();function ht(s,t){if(0!==t.length)throw new G(j.INVALID_ARGUMENT,"Function "+s+"() does not support arguments, but was called with "+Qn(t.length,"argument")+".")}function $(s,t,r){if(t.length!==r)throw new G(j.INVALID_ARGUMENT,"Function "+s+"() requires "+Qn(r,"argument")+", but was called with "+Qn(t.length,"argument")+".")}function pt(s,t,r){if(t.length<r)throw new G(j.INVALID_ARGUMENT,"Function "+s+"() requires at least "+Qn(r,"argument")+", but was called with "+Qn(t.length,"argument")+".")}function mt(s,t,r,a){if(t.length<r||t.length>a)throw new G(j.INVALID_ARGUMENT,"Function "+s+"() requires between "+r+" and "+a+" arguments, but was called with "+Qn(t.length,"argument")+".")}function Nt(s,t,r,a){Zn(s,t,yi(r)+" argument",a)}function vt(s,t,r,a){void 0!==a&&Nt(s,t,r,a)}function fe(s,t,r,a){Zn(s,t,r+" option",a)}function ae(s,t,r,a){void 0!==a&&fe(s,t,r,a)}function ue(s,t,r,a,l){void 0!==a&&function(d,m,v,w,E){for(var C=[],P=0,O=E;P<O.length;P++){var R=O[P];if(R===w)return;C.push(wn(R))}var B=wn(w);throw new G(j.INVALID_ARGUMENT,"Invalid value "+B+" provided to function "+d+'() for option "'+v+'". Acceptable values: '+C.join(", "))}(s,0,r,a,l)}function On(s,t,r,a){if(!t.some(function(l){return l===a}))throw new G(j.INVALID_ARGUMENT,"Invalid value "+wn(a)+" provided to function "+s+"() for its "+yi(r)+" argument. Acceptable values: "+t.join(", "));return a}function Zn(s,t,r,a){if(!("object"===t?Ir(a):"non-empty string"===t?"string"==typeof a&&""!==a:typeof a===t)){var l=wn(a);throw new G(j.INVALID_ARGUMENT,"Function "+s+"() requires its "+r+" to be of type "+t+", but it was: "+l)}}function Ir(s){return"object"==typeof s&&null!==s&&(Object.getPrototypeOf(s)===Object.prototype||null===Object.getPrototypeOf(s))}function wn(s){if(void 0===s)return"undefined";if(null===s)return"null";if("string"==typeof s)return s.length>20&&(s=s.substring(0,20)+"..."),JSON.stringify(s);if("number"==typeof s||"boolean"==typeof s)return""+s;if("object"==typeof s){if(s instanceof Array)return"an array";var t=function(r){if(r.constructor){var a=/function\s+([^\s(]+)\s*\(/.exec(r.constructor.toString());if(a&&a.length>1)return a[1]}return null}(s);return t?"a custom "+t+" object":"an object"}return"function"==typeof s?"a function":at()}function on(s,t,r){if(void 0===r)throw new G(j.INVALID_ARGUMENT,"Function "+s+"() requires a valid "+yi(t)+" argument, but it was undefined.")}function an(s,t,r){mi(t,function(a,l){if(r.indexOf(a)<0)throw new G(j.INVALID_ARGUMENT,"Unknown option '"+a+"' passed to function "+s+"(). Available options: "+r.join(", "))})}function xn(s,t,r,a){var l=wn(a);return new G(j.INVALID_ARGUMENT,"Function "+s+"() requires its "+yi(r)+" argument to be a "+t+", but it was: "+l)}function zs(s,t,r){if(r<=0)throw new G(j.INVALID_ARGUMENT,"Function "+s+"() requires its "+yi(t)+" argument to be a positive number, but it was: "+r+".")}function yi(s){switch(s){case 1:return"first";case 2:return"second";case 3:return"third";default:return s+"th"}}function Qn(s,t){return s+" "+t+(1===s?"":"s")}function Er(s){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),r=new Uint8Array(s);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(r);else for(var a=0;a<s;a++)r[a]=Math.floor(256*Math.random());return r}var Sr=function(){function s(){}return s.k=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/t.length)*t.length,a="";a.length<20;)for(var l=Er(40),d=0;d<l.length;++d)a.length<20&&l[d]<r&&(a+=t.charAt(l[d]%t.length));return a},s}();function wt(s,t){return s<t?-1:s>t?1:0}function Jn(s,t,r){return s.length===t.length&&s.every(function(a,l){return r(a,t[l])})}function Hs(s){return s+"\0"}var ye=function(){function s(t){this.M=t}return s.fromBase64String=function(t){return new s(atob(t))},s.fromUint8Array=function(t){return new s(function(r){for(var a="",l=0;l<r.length;++l)a+=String.fromCharCode(r[l]);return a}(t))},s.prototype.toBase64=function(){return btoa(this.M)},s.prototype.toUint8Array=function(){return function(t){for(var r=new Uint8Array(t.length),a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r}(this.M)},s.prototype.O=function(){return 2*this.M.length},s.prototype.L=function(t){return wt(this.M,t.M)},s.prototype.isEqual=function(t){return this.M===t.M},s}();ye.B=new ye("");var zi=function(){function s(t){this.q=t}return s.fromBase64String=function(t){try{return new s(ye.fromBase64String(t))}catch(r){throw new G(j.INVALID_ARGUMENT,"Failed to construct Bytes from Base64 string: "+r)}},s.fromUint8Array=function(t){return new s(ye.fromUint8Array(t))},s.prototype.toBase64=function(){return this.q.toBase64()},s.prototype.toUint8Array=function(){return this.q.toUint8Array()},s.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},s.prototype.isEqual=function(t){return this.q.isEqual(t.q)},s}();function ls(){if("undefined"==typeof Uint8Array)throw new G(j.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function hs(){if("undefined"==typeof atob)throw new G(j.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Tr=function(s){function t(){return null!==s&&s.apply(this,arguments)||this}return D.__extends(t,s),t.fromBase64String=function(r){$("Blob.fromBase64String",arguments,1),Nt("Blob.fromBase64String","string",1,r),hs();try{return new t(ye.fromBase64String(r))}catch(a){throw new G(j.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+a)}},t.fromUint8Array=function(r){if($("Blob.fromUint8Array",arguments,1),ls(),!(r instanceof Uint8Array))throw xn("Blob.fromUint8Array","Uint8Array",1,r);return new t(ye.fromUint8Array(r))},t.prototype.toBase64=function(){return $("Blob.toBase64",arguments,0),hs(),s.prototype.toBase64.call(this)},t.prototype.toUint8Array=function(){return $("Blob.toUint8Array",arguments,0),ls(),s.prototype.toUint8Array.call(this)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(zi),cu=function(s,t,r,a,l,d){this.U=s,this.persistenceKey=t,this.host=r,this.ssl=a,this.forceLongPolling=l,this.W=d},Ws=function(){function s(t,r){this.projectId=t,this.database=r||"(default)"}return Object.defineProperty(s.prototype,"j",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),s.prototype.isEqual=function(t){return t instanceof s&&t.projectId===this.projectId&&t.database===this.database},s.prototype.L=function(t){return wt(this.projectId,t.projectId)||wt(this.database,t.database)},s}(),te=function(){function s(t,r){this.K=t,this.G=r,this.H={}}return s.prototype.get=function(t){var r=this.K(t),a=this.H[r];if(void 0!==a)for(var l=0,d=a;l<d.length;l++){var m=d[l],w=m[1];if(this.G(m[0],t))return w}},s.prototype.has=function(t){return void 0!==this.get(t)},s.prototype.set=function(t,r){var a=this.K(t),l=this.H[a];if(void 0!==l){for(var d=0;d<l.length;d++)if(this.G(l[d][0],t))return void(l[d]=[t,r]);l.push([t,r])}else this.H[a]=[[t,r]]},s.prototype.delete=function(t){var r=this.K(t),a=this.H[r];if(void 0===a)return!1;for(var l=0;l<a.length;l++)if(this.G(a[l][0],t))return 1===a.length?delete this.H[r]:a.splice(l,1),!0;return!1},s.prototype.forEach=function(t){mi(this.H,function(r,a){for(var l=0,d=a;l<d.length;l++){var m=d[l];t(m[0],m[1])}})},s.prototype.m=function(){return wr(this.H)},s}(),Qt=function(){function s(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new G(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new G(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<-62135596800)throw new G(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new G(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return s.now=function(){return s.fromMillis(Date.now())},s.fromDate=function(t){return s.fromMillis(t.getTime())},s.fromMillis=function(t){var r=Math.floor(t/1e3);return new s(r,1e6*(t-1e3*r))},s.prototype.toDate=function(){return new Date(this.toMillis())},s.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},s.prototype.Y=function(t){return this.seconds===t.seconds?wt(this.nanoseconds,t.nanoseconds):wt(this.seconds,t.seconds)},s.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},s.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},s.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},s.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},s}(),Mt=function(){function s(t){this.timestamp=t}return s.J=function(t){return new s(t)},s.min=function(){return new s(new Qt(0,0))},s.prototype.L=function(t){return this.timestamp.Y(t.timestamp)},s.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},s.prototype.X=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},s.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},s.prototype.Z=function(){return this.timestamp},s}();function un(s){return null==s}function Hi(s){return 0===s&&1/s==-1/0}function _o(s){return"number"==typeof s&&Number.isInteger(s)&&!Hi(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}var Wi=function(s,t,r,a,l,d,m){void 0===t&&(t=null),void 0===r&&(r=[]),void 0===a&&(a=[]),void 0===l&&(l=null),void 0===d&&(d=null),void 0===m&&(m=null),this.path=s,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=d,this.endAt=m,this.tt=null};function Ar(s,t,r,a,l,d,m){return void 0===t&&(t=null),void 0===r&&(r=[]),void 0===a&&(a=[]),void 0===l&&(l=null),void 0===d&&(d=null),void 0===m&&(m=null),new Wi(s,t,r,a,l,d,m)}function vi(s){var t=J(s);if(null===t.tt){var r=t.path.R();null!==t.collectionGroup&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(function(a){return(l=a).field.R()+l.op.toString()+wi(l.value);var l}).join(","),r+="|ob:",r+=t.orderBy.map(function(a){return(l=a).field.R()+l.dir;var l}).join(","),un(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=gn(t.startAt)),t.endAt&&(r+="|ub:",r+=gn(t.endAt)),t.tt=r}return t.tt}function qi(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(var r=0;r<s.orderBy.length;r++)if(!Je(s.orderBy[r],t.orderBy[r]))return!1;if(s.filters.length!==t.filters.length)return!1;for(var a=0;a<s.filters.length;a++)if((l=s.filters[a]).op!==(d=t.filters[a]).op||!l.field.isEqual(d.field)||!En(l.value,d.value))return!1;var l,d;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!so(s.startAt,t.startAt)&&so(s.endAt,t.endAt)}function Gi(s){return Y.F(s.path)&&null===s.collectionGroup&&0===s.filters.length}var ne,At,Cr=function(){function s(t,r,a,l,d,m,v){void 0===d&&(d=Mt.min()),void 0===m&&(m=Mt.min()),void 0===v&&(v=ye.B),this.target=t,this.targetId=r,this.et=a,this.sequenceNumber=l,this.nt=d,this.lastLimboFreeSnapshotVersion=m,this.resumeToken=v}return s.prototype.st=function(t){return new s(this.target,this.targetId,this.et,t,this.nt,this.lastLimboFreeSnapshotVersion,this.resumeToken)},s.prototype.it=function(t,r){return new s(this.target,this.targetId,this.et,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t)},s.prototype.rt=function(t){return new s(this.target,this.targetId,this.et,this.sequenceNumber,this.nt,t,this.resumeToken)},s}(),ha=function(s){this.count=s};function qs(s){switch(s){case j.OK:return at();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return at()}}function Gs(s){if(void 0===s)return Gt("GRPC error has no .code"),j.UNKNOWN;switch(s){case ne.OK:return j.OK;case ne.CANCELLED:return j.CANCELLED;case ne.UNKNOWN:return j.UNKNOWN;case ne.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case ne.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case ne.INTERNAL:return j.INTERNAL;case ne.UNAVAILABLE:return j.UNAVAILABLE;case ne.UNAUTHENTICATED:return j.UNAUTHENTICATED;case ne.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case ne.NOT_FOUND:return j.NOT_FOUND;case ne.ALREADY_EXISTS:return j.ALREADY_EXISTS;case ne.PERMISSION_DENIED:return j.PERMISSION_DENIED;case ne.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case ne.ABORTED:return j.ABORTED;case ne.OUT_OF_RANGE:return j.OUT_OF_RANGE;case ne.UNIMPLEMENTED:return j.UNIMPLEMENTED;case ne.DATA_LOSS:return j.DATA_LOSS;default:return at()}}(At=ne||(ne={}))[At.OK=0]="OK",At[At.CANCELLED=1]="CANCELLED",At[At.UNKNOWN=2]="UNKNOWN",At[At.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",At[At.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",At[At.NOT_FOUND=5]="NOT_FOUND",At[At.ALREADY_EXISTS=6]="ALREADY_EXISTS",At[At.PERMISSION_DENIED=7]="PERMISSION_DENIED",At[At.UNAUTHENTICATED=16]="UNAUTHENTICATED",At[At.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",At[At.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",At[At.ABORTED=10]="ABORTED",At[At.OUT_OF_RANGE=11]="OUT_OF_RANGE",At[At.UNIMPLEMENTED=12]="UNIMPLEMENTED",At[At.INTERNAL=13]="INTERNAL",At[At.UNAVAILABLE=14]="UNAVAILABLE",At[At.DATA_LOSS=15]="DATA_LOSS";var ve=function(){function s(t,r){this.i=t,this.root=r||Ln.EMPTY}return s.prototype.ot=function(t,r){return new s(this.i,this.root.ot(t,r,this.i).copy(null,null,Ln.at,null,null))},s.prototype.remove=function(t){return new s(this.i,this.root.remove(t,this.i).copy(null,null,Ln.at,null,null))},s.prototype.get=function(t){for(var r=this.root;!r.m();){var a=this.i(t,r.key);if(0===a)return r.value;a<0?r=r.left:a>0&&(r=r.right)}return null},s.prototype.indexOf=function(t){for(var r=0,a=this.root;!a.m();){var l=this.i(t,a.key);if(0===l)return r+a.left.size;l<0?a=a.left:(r+=a.left.size+1,a=a.right)}return-1},s.prototype.m=function(){return this.root.m()},Object.defineProperty(s.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),s.prototype.ct=function(){return this.root.ct()},s.prototype.ut=function(){return this.root.ut()},s.prototype.ht=function(t){return this.root.ht(t)},s.prototype.forEach=function(t){this.ht(function(r,a){return t(r,a),!1})},s.prototype.toString=function(){var t=[];return this.ht(function(r,a){return t.push(r+":"+a),!1}),"{"+t.join(", ")+"}"},s.prototype.lt=function(t){return this.root.lt(t)},s.prototype._t=function(){return new Mr(this.root,null,this.i,!1)},s.prototype.ft=function(t){return new Mr(this.root,t,this.i,!1)},s.prototype.dt=function(){return new Mr(this.root,null,this.i,!0)},s.prototype.wt=function(t){return new Mr(this.root,t,this.i,!0)},s}(),Mr=function(){function s(t,r,a,l){this.Tt=l,this.Et=[];for(var d=1;!t.m();)if(d=r?a(t.key,r):1,l&&(d*=-1),d<0)t=this.Tt?t.left:t.right;else{if(0===d){this.Et.push(t);break}this.Et.push(t),t=this.Tt?t.right:t.left}}return s.prototype.It=function(){var t=this.Et.pop(),r={key:t.key,value:t.value};if(this.Tt)for(t=t.left;!t.m();)this.Et.push(t),t=t.right;else for(t=t.right;!t.m();)this.Et.push(t),t=t.left;return r},s.prototype.At=function(){return this.Et.length>0},s.prototype.Rt=function(){if(0===this.Et.length)return null;var t=this.Et[this.Et.length-1];return{key:t.key,value:t.value}},s}(),Ln=function(){function s(t,r,a,l,d){this.key=t,this.value=r,this.color=null!=a?a:s.RED,this.left=null!=l?l:s.EMPTY,this.right=null!=d?d:s.EMPTY,this.size=this.left.size+1+this.right.size}return s.prototype.copy=function(t,r,a,l,d){return new s(null!=t?t:this.key,null!=r?r:this.value,null!=a?a:this.color,null!=l?l:this.left,null!=d?d:this.right)},s.prototype.m=function(){return!1},s.prototype.ht=function(t){return this.left.ht(t)||t(this.key,this.value)||this.right.ht(t)},s.prototype.lt=function(t){return this.right.lt(t)||t(this.key,this.value)||this.left.lt(t)},s.prototype.min=function(){return this.left.m()?this:this.left.min()},s.prototype.ct=function(){return this.min().key},s.prototype.ut=function(){return this.right.m()?this.key:this.right.ut()},s.prototype.ot=function(t,r,a){var l=this,d=a(t,l.key);return(l=d<0?l.copy(null,null,null,l.left.ot(t,r,a),null):0===d?l.copy(null,r,null,null,null):l.copy(null,null,null,null,l.right.ot(t,r,a))).gt()},s.prototype.Pt=function(){if(this.left.m())return s.EMPTY;var t=this;return t.left.yt()||t.left.left.yt()||(t=t.Vt()),(t=t.copy(null,null,null,t.left.Pt(),null)).gt()},s.prototype.remove=function(t,r){var a,l=this;if(r(t,l.key)<0)l.left.m()||l.left.yt()||l.left.left.yt()||(l=l.Vt()),l=l.copy(null,null,null,l.left.remove(t,r),null);else{if(l.left.yt()&&(l=l.bt()),l.right.m()||l.right.yt()||l.right.left.yt()||(l=l.vt()),0===r(t,l.key)){if(l.right.m())return s.EMPTY;a=l.right.min(),l=l.copy(a.key,a.value,null,null,l.right.Pt())}l=l.copy(null,null,null,null,l.right.remove(t,r))}return l.gt()},s.prototype.yt=function(){return this.color},s.prototype.gt=function(){var t=this;return t.right.yt()&&!t.left.yt()&&(t=t.St()),t.left.yt()&&t.left.left.yt()&&(t=t.bt()),t.left.yt()&&t.right.yt()&&(t=t.Dt()),t},s.prototype.Vt=function(){var t=this.Dt();return t.right.left.yt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.bt())).St()).Dt()),t},s.prototype.vt=function(){var t=this.Dt();return t.left.left.yt()&&(t=(t=t.bt()).Dt()),t},s.prototype.St=function(){var t=this.copy(null,null,s.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},s.prototype.bt=function(){var t=this.copy(null,null,s.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},s.prototype.Dt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)},s.prototype.Ct=function(){var t=this.Nt();return Math.pow(2,t)<=this.size+1},s.prototype.Nt=function(){if(this.yt()&&this.left.yt()||this.right.yt())throw at();var t=this.left.Nt();if(t!==this.right.Nt())throw at();return t+(this.yt()?0:1)},s}();Ln.EMPTY=null,Ln.RED=!0,Ln.at=!1,Ln.EMPTY=new(function(){function s(){this.size=0}return Object.defineProperty(s.prototype,"key",{get:function(){throw at()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"value",{get:function(){throw at()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"color",{get:function(){throw at()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"left",{get:function(){throw at()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"right",{get:function(){throw at()},enumerable:!1,configurable:!0}),s.prototype.copy=function(t,r,a,l,d){return this},s.prototype.ot=function(t,r,a){return new Ln(t,r)},s.prototype.remove=function(t,r){return this},s.prototype.m=function(){return!0},s.prototype.ht=function(t){return!1},s.prototype.lt=function(t){return!1},s.prototype.ct=function(){return null},s.prototype.ut=function(){return null},s.prototype.yt=function(){return!1},s.prototype.Ct=function(){return!0},s.prototype.Nt=function(){return 0},s}());var de=function(){function s(t){this.i=t,this.data=new ve(this.i)}return s.prototype.has=function(t){return null!==this.data.get(t)},s.prototype.first=function(){return this.data.ct()},s.prototype.last=function(){return this.data.ut()},Object.defineProperty(s.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),s.prototype.indexOf=function(t){return this.data.indexOf(t)},s.prototype.forEach=function(t){this.data.ht(function(r,a){return t(r),!1})},s.prototype.Ft=function(t,r){for(var a=this.data.ft(t[0]);a.At();){var l=a.It();if(this.i(l.key,t[1])>=0)return;r(l.key)}},s.prototype.xt=function(t,r){var a;for(a=void 0!==r?this.data.ft(r):this.data._t();a.At();)if(!t(a.It().key))return},s.prototype.$t=function(t){var r=this.data.ft(t);return r.At()?r.It().key:null},s.prototype._t=function(){return new Ze(this.data._t())},s.prototype.ft=function(t){return new Ze(this.data.ft(t))},s.prototype.add=function(t){return this.copy(this.data.remove(t).ot(t,!0))},s.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},s.prototype.m=function(){return this.data.m()},s.prototype.kt=function(t){var r=this;return r.size<t.size&&(r=t,t=this),t.forEach(function(a){r=r.add(a)}),r},s.prototype.isEqual=function(t){if(!(t instanceof s)||this.size!==t.size)return!1;for(var r=this.data._t(),a=t.data._t();r.At();){var l=r.It().key,d=a.It().key;if(0!==this.i(l,d))return!1}return!0},s.prototype.A=function(){var t=[];return this.forEach(function(r){t.push(r)}),t},s.prototype.toString=function(){var t=[];return this.forEach(function(r){return t.push(r)}),"SortedSet("+t.toString()+")"},s.prototype.copy=function(t){var r=new s(this.i);return r.data=t,r},s}(),Ze=function(){function s(t){this.Mt=t}return s.prototype.It=function(){return this.Mt.It().key},s.prototype.At=function(){return this.Mt.At()},s}(),Ys=new ve(Y.i);function xt(){return Ys}function It(){return xt()}var St=new ve(Y.i);function Yt(){return St}var We=new ve(Y.i),_t=new de(Y.i);function Kt(){for(var s=[],t=0;t<arguments.length;t++)s[t]=arguments[t];for(var r=_t,a=0,l=s;a<l.length;a++){var d=l[a];r=r.add(d)}return r}var fs=new de(wt);function Bt(){return fs}var Rt=function(){function s(t){this.i=t?function(r,a){return t(r,a)||Y.i(r.key,a.key)}:function(r,a){return Y.i(r.key,a.key)},this.Ot=Yt(),this.Lt=new ve(this.i)}return s.Bt=function(t){return new s(t.i)},s.prototype.has=function(t){return null!=this.Ot.get(t)},s.prototype.get=function(t){return this.Ot.get(t)},s.prototype.first=function(){return this.Lt.ct()},s.prototype.last=function(){return this.Lt.ut()},s.prototype.m=function(){return this.Lt.m()},s.prototype.indexOf=function(t){var r=this.Ot.get(t);return r?this.Lt.indexOf(r):-1},Object.defineProperty(s.prototype,"size",{get:function(){return this.Lt.size},enumerable:!1,configurable:!0}),s.prototype.forEach=function(t){this.Lt.ht(function(r,a){return t(r),!1})},s.prototype.add=function(t){var r=this.delete(t.key);return r.copy(r.Ot.ot(t.key,t),r.Lt.ot(t,null))},s.prototype.delete=function(t){var r=this.get(t);return r?this.copy(this.Ot.remove(t),this.Lt.remove(r)):this},s.prototype.isEqual=function(t){if(!(t instanceof s)||this.size!==t.size)return!1;for(var r=this.Lt._t(),a=t.Lt._t();r.At();){var l=r.It().key,d=a.It().key;if(!l.isEqual(d))return!1}return!0},s.prototype.toString=function(){var t=[];return this.forEach(function(r){t.push(r.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},s.prototype.copy=function(t,r){var a=new s;return a.i=this.i,a.Ot=t,a.Lt=r,a},s}(),bi=function(){function s(){this.qt=new ve(Y.i)}return s.prototype.track=function(t){var r=t.doc.key,a=this.qt.get(r);a?0!==t.type&&3===a.type?this.qt=this.qt.ot(r,t):3===t.type&&1!==a.type?this.qt=this.qt.ot(r,{type:a.type,doc:t.doc}):2===t.type&&2===a.type?this.qt=this.qt.ot(r,{type:2,doc:t.doc}):2===t.type&&0===a.type?this.qt=this.qt.ot(r,{type:0,doc:t.doc}):1===t.type&&0===a.type?this.qt=this.qt.remove(r):1===t.type&&2===a.type?this.qt=this.qt.ot(r,{type:1,doc:a.doc}):0===t.type&&1===a.type?this.qt=this.qt.ot(r,{type:2,doc:t.doc}):at():this.qt=this.qt.ot(r,t)},s.prototype.Ut=function(){var t=[];return this.qt.ht(function(r,a){t.push(a)}),t},s}(),_i=function(){function s(t,r,a,l,d,m,v,w){this.query=t,this.docs=r,this.Qt=a,this.docChanges=l,this.Wt=d,this.fromCache=m,this.jt=v,this.Kt=w}return s.Gt=function(t,r,a,l){var d=[];return r.forEach(function(m){d.push({type:0,doc:m})}),new s(t,r,Rt.Bt(r),d,a,l,!0,!1)},Object.defineProperty(s.prototype,"hasPendingWrites",{get:function(){return!this.Wt.m()},enumerable:!1,configurable:!0}),s.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.jt===t.jt&&this.Wt.isEqual(t.Wt)&&qn(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Qt.isEqual(t.Qt)))return!1;var r=this.docChanges,a=t.docChanges;if(r.length!==a.length)return!1;for(var l=0;l<r.length;l++)if(r[l].type!==a[l].type||!r[l].doc.isEqual(a[l].doc))return!1;return!0},s}(),Yi=function(){function s(t,r,a,l,d){this.nt=t,this.zt=r,this.Ht=a,this.Yt=l,this.Jt=d}return s.Xt=function(t,r){var a=new Map;return a.set(t,ds.Zt(t,r)),new s(Mt.min(),a,Bt(),xt(),Kt())},s}(),ds=function(){function s(t,r,a,l,d){this.resumeToken=t,this.te=r,this.ee=a,this.ne=l,this.se=d}return s.Zt=function(t,r){return new s(ye.B,r,Kt(),Kt(),Kt())},s}(),ti=function(s,t,r,a){this.ie=s,this.removedTargetIds=t,this.key=r,this.re=a},Nn=function(s,t){this.targetId=s,this.oe=t},ps=function(s,t,r,a){void 0===r&&(r=ye.B),void 0===a&&(a=null),this.state=s,this.targetIds=t,this.resumeToken=r,this.cause=a},$s=function(){function s(){this.ae=0,this.ce=$i(),this.ue=ye.B,this.he=!1,this.le=!0}return Object.defineProperty(s.prototype,"te",{get:function(){return this.he},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"resumeToken",{get:function(){return this.ue},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"_e",{get:function(){return 0!==this.ae},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"fe",{get:function(){return this.le},enumerable:!1,configurable:!0}),s.prototype.de=function(t){t.O()>0&&(this.le=!0,this.ue=t)},s.prototype.we=function(){var t=Kt(),r=Kt(),a=Kt();return this.ce.forEach(function(l,d){switch(d){case 0:t=t.add(l);break;case 2:r=r.add(l);break;case 1:a=a.add(l);break;default:at()}}),new ds(this.ue,this.he,t,r,a)},s.prototype.me=function(){this.le=!1,this.ce=$i()},s.prototype.Te=function(t,r){this.le=!0,this.ce=this.ce.ot(t,r)},s.prototype.Ee=function(t){this.le=!0,this.ce=this.ce.remove(t)},s.prototype.Ie=function(){this.ae+=1},s.prototype.Ae=function(){this.ae-=1},s.prototype.Re=function(){this.le=!0,this.he=!0},s}(),Ks=function(){function s(t){this.ge=t,this.Pe=new Map,this.ye=xt(),this.Ve=Rn(),this.pe=new de(wt)}return s.prototype.be=function(t){for(var r=0,a=t.ie;r<a.length;r++){var l=a[r];t.re instanceof Ft?this.ve(l,t.re):t.re instanceof le&&this.Se(l,t.key,t.re)}for(var d=0,m=t.removedTargetIds;d<m.length;d++)this.Se(m[d],t.key,t.re)},s.prototype.De=function(t){var r=this;this.Ce(t,function(a){var l=r.Ne(a);switch(t.state){case 0:r.Fe(a)&&l.de(t.resumeToken);break;case 1:l.Ae(),l._e||l.me(),l.de(t.resumeToken);break;case 2:l.Ae(),l._e||r.removeTarget(a);break;case 3:r.Fe(a)&&(l.Re(),l.de(t.resumeToken));break;case 4:r.Fe(a)&&(r.xe(a),l.de(t.resumeToken));break;default:at()}})},s.prototype.Ce=function(t,r){var a=this;t.targetIds.length>0?t.targetIds.forEach(r):this.Pe.forEach(function(l,d){a.Fe(d)&&r(d)})},s.prototype.$e=function(t){var r=t.targetId,a=t.oe.count,l=this.ke(r);if(l){var d=l.target;if(Gi(d))if(0===a){var m=new Y(d.path);this.Se(r,m,new le(m,Mt.min()))}else nt(1===a);else this.Me(r)!==a&&(this.xe(r),this.pe=this.pe.add(r))}},s.prototype.Oe=function(t){var r=this,a=new Map;this.Pe.forEach(function(m,v){var w=r.ke(v);if(w){if(m.te&&Gi(w.target)){var E=new Y(w.target.path);null!==r.ye.get(E)||r.Le(v,E)||r.Se(v,E,new le(E,t))}m.fe&&(a.set(v,m.we()),m.me())}});var l=Kt();this.Ve.forEach(function(m,v){var w=!0;v.xt(function(E){var C=r.ke(E);return!C||2===C.et||(w=!1,!1)}),w&&(l=l.add(m))});var d=new Yi(t,a,this.pe,this.ye,l);return this.ye=xt(),this.Ve=Rn(),this.pe=new de(wt),d},s.prototype.ve=function(t,r){if(this.Fe(t)){var a=this.Le(t,r.key)?2:0;this.Ne(t).Te(r.key,a),this.ye=this.ye.ot(r.key,r),this.Ve=this.Ve.ot(r.key,this.Be(r.key).add(t))}},s.prototype.Se=function(t,r,a){if(this.Fe(t)){var l=this.Ne(t);this.Le(t,r)?l.Te(r,1):l.Ee(r),this.Ve=this.Ve.ot(r,this.Be(r).delete(t)),a&&(this.ye=this.ye.ot(r,a))}},s.prototype.removeTarget=function(t){this.Pe.delete(t)},s.prototype.Me=function(t){var r=this.Ne(t).we();return this.ge.qe(t).size+r.ee.size-r.se.size},s.prototype.Ie=function(t){this.Ne(t).Ie()},s.prototype.Ne=function(t){var r=this.Pe.get(t);return r||(r=new $s,this.Pe.set(t,r)),r},s.prototype.Be=function(t){var r=this.Ve.get(t);return r||(r=new de(wt),this.Ve=this.Ve.ot(t,r)),r},s.prototype.Fe=function(t){var r=null!==this.ke(t);return r||rt("WatchChangeAggregator","Detected inactive target",t),r},s.prototype.ke=function(t){var r=this.Pe.get(t);return r&&r._e?null:this.ge.Ue(t)},s.prototype.xe=function(t){var r=this;this.Pe.set(t,new $s),this.ge.qe(t).forEach(function(a){r.Se(t,a,null)})},s.prototype.Le=function(t,r){return this.ge.qe(t).has(r)},s}();function Rn(){return new ve(Y.i)}function $i(){return new ve(Y.i)}function gs(s){var t,r;return"server_timestamp"===(null===(r=((null===(t=null==s?void 0:s.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function kr(s){var t=s.mapValue.fields.__previous_value__;return gs(t)?kr(t):t}function Ee(s){var t=Vt(s.mapValue.fields.__local_write_time__.timestampValue);return new Qt(t.seconds,t.nanos)}var In=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fn(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?gs(s)?4:10:at()}function En(s,t){var l,r=Fn(s);if(r!==Fn(t))return!1;switch(r){case 0:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return Ee(s).isEqual(Ee(t));case 3:return function(a,l){if("string"==typeof a.timestampValue&&"string"==typeof l.timestampValue&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;var d=Vt(a.timestampValue),m=Vt(l.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos}(s,t);case 5:return s.stringValue===t.stringValue;case 6:return l=t,ei(s.bytesValue).isEqual(ei(l.bytesValue));case 7:return s.referenceValue===t.referenceValue;case 8:return function(a,l){return Wt(a.geoPointValue.latitude)===Wt(l.geoPointValue.latitude)&&Wt(a.geoPointValue.longitude)===Wt(l.geoPointValue.longitude)}(s,t);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return Wt(a.integerValue)===Wt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){var d=Wt(a.doubleValue),m=Wt(l.doubleValue);return d===m?Hi(d)===Hi(m):isNaN(d)&&isNaN(m)}return!1}(s,t);case 9:return Jn(s.arrayValue.values||[],t.arrayValue.values||[],En);case 10:return function(a,l){var d=a.mapValue.fields||{},m=l.mapValue.fields||{};if(sn(d)!==sn(m))return!1;for(var v in d)if(d.hasOwnProperty(v)&&(void 0===m[v]||!En(d[v],m[v])))return!1;return!0}(s,t);default:return at()}}function Pt(s,t){return void 0!==(s.values||[]).find(function(r){return En(r,t)})}function Ot(s,t){var l,d,m,v,r=Fn(s),a=Fn(t);if(r!==a)return wt(r,a);switch(r){case 0:return 0;case 1:return wt(s.booleanValue,t.booleanValue);case 2:return d=t,(m=Wt((l=s).integerValue||l.doubleValue))<(v=Wt(d.integerValue||d.doubleValue))?-1:m>v?1:m===v?0:isNaN(m)?isNaN(v)?0:-1:1;case 3:return wo(s.timestampValue,t.timestampValue);case 4:return wo(Ee(s),Ee(t));case 5:return wt(s.stringValue,t.stringValue);case 6:return function(l,d){var m=ei(l),v=ei(d);return m.L(v)}(s.bytesValue,t.bytesValue);case 7:return function(l,d){for(var m=l.split("/"),v=d.split("/"),w=0;w<m.length&&w<v.length;w++){var E=wt(m[w],v[w]);if(0!==E)return E}return wt(m.length,v.length)}(s.referenceValue,t.referenceValue);case 8:return function(l,d){var m=wt(Wt(l.latitude),Wt(d.latitude));return 0!==m?m:wt(Wt(l.longitude),Wt(d.longitude))}(s.geoPointValue,t.geoPointValue);case 9:return function(l,d){for(var m=l.values||[],v=d.values||[],w=0;w<m.length&&w<v.length;++w){var E=Ot(m[w],v[w]);if(E)return E}return wt(m.length,v.length)}(s.arrayValue,t.arrayValue);case 10:return function(l,d){var m=l.fields||{},v=Object.keys(m),w=d.fields||{},E=Object.keys(w);v.sort(),E.sort();for(var C=0;C<v.length&&C<E.length;++C){var P=wt(v[C],E[C]);if(0!==P)return P;var O=Ot(m[v[C]],w[E[C]]);if(0!==O)return O}return wt(v.length,E.length)}(s.mapValue,t.mapValue);default:throw at()}}function wo(s,t){if("string"==typeof s&&"string"==typeof t&&s.length===t.length)return wt(s,t);var r=Vt(s),a=Vt(t),l=wt(r.seconds,a.seconds);return 0!==l?l:wt(r.nanos,a.nanos)}function wi(s){return Dr(s)}function Dr(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?"time("+(l=Vt(s.timestampValue)).seconds+","+l.nanos+")":"stringValue"in s?s.stringValue:"bytesValue"in s?ei(s.bytesValue).toBase64():"referenceValue"in s?Y.C(s.referenceValue).toString():"geoPointValue"in s?"geo("+(t=s.geoPointValue).latitude+","+t.longitude+")":"arrayValue"in s?function(a){for(var l="[",d=!0,m=0,v=a.values||[];m<v.length;m++)d?d=!1:l+=",",l+=Dr(v[m]);return l+"]"}(s.arrayValue):"mapValue"in s?function(a){for(var l="{",d=!0,m=0,v=Object.keys(a.fields||{}).sort();m<v.length;m++){var w=v[m];d?d=!1:l+=",",l+=w+":"+Dr(a.fields[w])}return l+"}"}(s.mapValue):at();var l,t}function Vt(s){if(nt(!!s),"string"==typeof s){var t=0,r=In.exec(s);if(nt(!!r),r[1]){var a=r[1];a=(a+"000000000").substr(0,9),t=Number(a)}var l=new Date(s);return{seconds:Math.floor(l.getTime()/1e3),nanos:t}}return{seconds:Wt(s.seconds),nanos:Wt(s.nanos)}}function Wt(s){return"number"==typeof s?s:"string"==typeof s?Number(s):0}function ei(s){return"string"==typeof s?ye.fromBase64String(s):ye.fromUint8Array(s)}function $t(s,t){return{referenceValue:"projects/"+s.projectId+"/databases/"+s.database+"/documents/"+t.path.R()}}function qe(s){return!!s&&"integerValue"in s}function ni(s){return!!s&&"arrayValue"in s}function Ki(s){return!!s&&"nullValue"in s}function jn(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function ii(s){return!!s&&"mapValue"in s}var xo={asc:"ASCENDING",desc:"DESCENDING"},Xs={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Pe=function(s,t){this.U=s,this.Qe=t};function Xi(s){return{integerValue:""+s}}function Pr(s,t){if(s.Qe){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hi(t)?"-0":t}}function ms(s,t){return _o(t)?Xi(t):Pr(s,t)}function xi(s,t){return s.Qe?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function Zi(s,t){return s.Qe?t.toBase64():t.toUint8Array()}function Ge(s,t){return xi(s,t.Z())}function Ce(s){return nt(!!s),Mt.J((r=Vt(s),new Qt(r.seconds,r.nanos)));var r}function ie(s,t){return(r=s,new W(["projects",r.projectId,"databases",r.database])).child("documents").child(t).R();var r}function ys(s){var t=W.g(s);return nt(zt(t)),t}function Oe(s,t){return ie(s.U,t.path)}function Ye(s,t){var r=ys(t);return nt(r.get(1)===s.U.projectId),nt(!r.get(3)&&!s.U.database||r.get(3)===s.U.database),new Y(tr(r))}function cn(s,t){return ie(s.U,t)}function Qi(s){var t=ys(s);return 4===t.length?W.P():tr(t)}function Ji(s){return new W(["projects",s.U.projectId,"databases",s.U.database]).R()}function tr(s){return nt(s.length>4&&"documents"===s.get(4)),s.u(5)}function Or(s,t,r){return{name:Oe(s,t),fields:r.proto.mapValue.fields}}function Sn(s,t){var r,l;if(t instanceof Si)r={update:Or(s,t.key,t.value)};else if(t instanceof sr)r={delete:Oe(s,t.key)};else if(t instanceof fn)r={update:Or(s,t.key,t.data),updateMask:er(t.We)};else if(t instanceof oi)r={transform:{document:Oe(s,t.key),fieldTransforms:t.fieldTransforms.map(function(a){return function(l,d){var m=d.transform;if(m instanceof ln)return{fieldPath:d.field.R(),setToServerValue:"REQUEST_TIME"};if(m instanceof _e)return{fieldPath:d.field.R(),appendMissingElements:{values:m.elements}};if(m instanceof Ei)return{fieldPath:d.field.R(),removeAllFromArray:{values:m.elements}};if(m instanceof Vn)return{fieldPath:d.field.R(),increment:m.je};throw at()}(0,a)})}};else{if(!(t instanceof eo))return at();r={verify:Oe(s,t.key)}}return t.Ge.Ke||(r.currentDocument=void 0!==(l=t.Ge).updateTime?{updateTime:Ge(s,l.updateTime)}:void 0!==l.exists?{exists:l.exists}:at()),r}function Lr(s,t){var C,r=t.currentDocument?void 0!==(C=t.currentDocument).updateTime?we.updateTime(Ce(C.updateTime)):void 0!==C.exists?we.exists(C.exists):we.ze():we.ze();if(t.update){var a=Ye(s,t.update.name),l=new Ve({mapValue:{fields:t.update.fields}});if(t.updateMask){var d=function(C){return new $e((C.fieldPaths||[]).map(function(O){return Q.S(O)}))}(t.updateMask);return new fn(a,l,d,r)}return new Si(a,l,r)}if(t.delete){var m=Ye(s,t.delete);return new sr(m,r)}if(t.transform){var v=Ye(s,t.transform.document),w=t.transform.fieldTransforms.map(function(C){return function(P,O){var R=null;"setToServerValue"in O?(nt("REQUEST_TIME"===O.setToServerValue),R=new ln):"appendMissingElements"in O?R=new _e(O.appendMissingElements.values||[]):"removeAllFromArray"in O?R=new Ei(O.removeAllFromArray.values||[]):"increment"in O?R=new Vn(P,O.increment):at();var ct=Q.S(O.fieldPath);return new ir(ct,R)}(s,C)});return nt(!0===r.exists),new oi(v,w)}if(t.verify){var E=Ye(s,t.verify);return new eo(E,r)}return at()}function fa(s,t){return{documents:[cn(s,t.path)]}}function Nr(s,t){var r={structuredQuery:{}},a=t.path;null!==t.collectionGroup?(r.parent=cn(s,a),r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r.parent=cn(s,a.h()),r.structuredQuery.from=[{collectionId:a._()}]);var l=function(v){if(0!==v.length){var w=v.map(function(E){return function(C){if("=="===C.op){if(jn(C.value))return{unaryFilter:{field:Le(C.field),op:"IS_NAN"}};if(Ki(C.value))return{unaryFilter:{field:Le(C.field),op:"IS_NULL"}}}else if("!="===C.op){if(jn(C.value))return{unaryFilter:{field:Le(C.field),op:"IS_NOT_NAN"}};if(Ki(C.value))return{unaryFilter:{field:Le(C.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Le(C.field),op:ri(C.op),value:C.value}}}(E)});return 1===w.length?w[0]:{compositeFilter:{op:"AND",filters:w}}}}(t.filters);l&&(r.structuredQuery.where=l);var d=function(v){if(0!==v.length)return v.map(function(w){return{field:Le((E=w).field),direction:da(E.dir)};var E})}(t.orderBy);d&&(r.structuredQuery.orderBy=d);var w,m=(w=t.limit,s.Qe||un(w)?w:{value:w});return null!==m&&(r.structuredQuery.limit=m),t.startAt&&(r.structuredQuery.startAt=Tn(t.startAt)),t.endAt&&(r.structuredQuery.endAt=Tn(t.endAt)),r}function Ii(s){var t=Qi(s.parent),r=s.structuredQuery,a=r.from?r.from.length:0,l=null;if(a>0){nt(1===a);var d=r.from[0];d.allDescendants?l=d.collectionId:t=t.child(d.collectionId)}var m=[];r.where&&(m=vs(r.where));var v=[];r.orderBy&&(v=r.orderBy.map(function(P){return new mn(Qe((O=P).field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction));var O}));var P,O,w=null;r.limit&&(w=un(O="object"==typeof(P=r.limit)?P.value:P)?null:O);var E=null;r.startAt&&(E=be(r.startAt));var C=null;return r.endAt&&(C=be(r.endAt)),Me(or(t,l,v,m,w,"F",E,C))}function vs(s){return s?void 0!==s.unaryFilter?[Fr(s)]:void 0!==s.fieldFilter?[Rr(s)]:void 0!==s.compositeFilter?s.compositeFilter.filters.map(function(t){return vs(t)}).reduce(function(t,r){return t.concat(r)}):at():[]}function Tn(s){return{before:s.before,values:s.position}}function be(s){return new pn(s.values||[],!!s.before)}function da(s){return xo[s]}function ri(s){return Xs[s]}function Le(s){return{fieldPath:s.R()}}function Qe(s){return Q.S(s.fieldPath)}function Rr(s){return Se.create(Qe(s.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return at()}}(s.fieldFilter.op),s.fieldFilter.value)}function Fr(s){switch(s.unaryFilter.op){case"IS_NAN":var t=Qe(s.unaryFilter.field);return Se.create(t,"==",{doubleValue:NaN});case"IS_NULL":var r=Qe(s.unaryFilter.field);return Se.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var a=Qe(s.unaryFilter.field);return Se.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var l=Qe(s.unaryFilter.field);return Se.create(l,"!=",{nullValue:"NULL_VALUE"});default:return at()}}function er(s){var t=[];return s.fields.forEach(function(r){return t.push(r.R())}),{fieldPaths:t}}function zt(s){return s.length>=4&&"projects"===s.get(0)&&"databases"===s.get(2)}var Fe=function(){this.He=void 0};function jr(s,t,r){return s instanceof ln?(d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(a=r).seconds,nanos:a.nanoseconds}}}},(l=t)&&(d.fields.__previous_value__=l),{mapValue:d}):s instanceof _e?Vr(s,t):s instanceof Ei?Io(s,t):function(a,l){var d=je(a,l),m=Eo(d)+Eo(a.je);return qe(d)&&qe(a.je)?Xi(m):Pr(a.serializer,m)}(s,t);var a,l,d}function si(s,t,r){return s instanceof _e?Vr(s,t):s instanceof Ei?Io(s,t):r}function je(s,t){return s instanceof Vn?qe(r=t)||(a=r)&&"doubleValue"in a?t:{integerValue:0}:null;var a,r}var ln=function(s){function t(){return null!==s&&s.apply(this,arguments)||this}return D.__extends(t,s),t}(Fe),_e=function(s){function t(r){var a=this;return(a=s.call(this)||this).elements=r,a}return D.__extends(t,s),t}(Fe);function Vr(s,t){for(var r=nr(t),a=function(m){r.some(function(v){return En(v,m)})||r.push(m)},l=0,d=s.elements;l<d.length;l++)a(d[l]);return{arrayValue:{values:r}}}var Ei=function(s){function t(r){var a=this;return(a=s.call(this)||this).elements=r,a}return D.__extends(t,s),t}(Fe);function Io(s,t){for(var r=nr(t),a=function(m){r=r.filter(function(v){return!En(v,m)})},l=0,d=s.elements;l<d.length;l++)a(d[l]);return{arrayValue:{values:r}}}var Vn=function(s){function t(r,a){var l=this;return(l=s.call(this)||this).serializer=r,l.je=a,l}return D.__extends(t,s),t}(Fe);function Eo(s){return Wt(s.integerValue||s.doubleValue)}function nr(s){return ni(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}var $e=function(){function s(t){this.fields=t,t.sort(Q.i)}return s.prototype.Ye=function(t){for(var r=0,a=this.fields;r<a.length;r++)if(a[r].T(t))return!0;return!1},s.prototype.isEqual=function(t){return Jn(this.fields,t.fields,function(r,a){return r.isEqual(a)})},s}(),ir=function(s,t){this.field=s,this.transform=t},So=function(s,t){this.version=s,this.transformResults=t},we=function(){function s(t,r){this.updateTime=t,this.exists=r}return s.ze=function(){return new s},s.exists=function(t){return new s(void 0,t)},s.updateTime=function(t){return new s(t)},Object.defineProperty(s.prototype,"Ke",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),s.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},s}();function hn(s,t){return void 0!==s.updateTime?t instanceof Ft&&t.version.isEqual(s.updateTime):void 0===s.exists||s.exists===t instanceof Ft}var Ur=function(){};function pa(s,t,r){return s instanceof Si?new Ft((a=s).key,r.version,a.value,{hasCommittedMutations:!0}):s instanceof fn?function(a,l,d){if(!hn(a.Ge,l))return new Un(a.key,d.version);var m=Js(a,l);return new Ft(a.key,d.version,m,{hasCommittedMutations:!0})}(s,t,r):s instanceof oi?function(a,l,d){if(nt(null!=d.transformResults),!hn(a.Ge,l))return new Un(a.key,d.version);var m=bs(0,l),v=function(C,P,O){var R=[];nt(C.length===O.length);for(var B=0;B<O.length;B++){var q=C[B],ct=q.transform,ut=null;P instanceof Ft&&(ut=P.field(q.field)),R.push(si(ct,ut,O[B]))}return R}(a.fieldTransforms,l,d.transformResults),w=d.version,E=to(a,m.data(),v);return new Ft(a.key,w,E,{hasCommittedMutations:!0})}(s,t,r):function(a,l,d){return new le(a.key,d.version,{hasCommittedMutations:!0})}(s,0,r);var a}function rr(s,t,r,a){return s instanceof Si?function(l,d){if(!hn(l.Ge,d))return d;var m=Qs(d);return new Ft(l.key,m,l.value,{Je:!0})}(s,t):s instanceof fn?function(l,d){if(!hn(l.Ge,d))return d;var m=Qs(d),v=Js(l,d);return new Ft(l.key,m,v,{Je:!0})}(s,t):s instanceof oi?function(l,d,m,v){if(!hn(l.Ge,d))return d;var w=bs(0,d),E=function(P,O,R,B){for(var q=[],ct=0,ut=P;ct<ut.length;ct++){var gt=ut[ct],bt=gt.transform,Dt=null;R instanceof Ft&&(Dt=R.field(gt.field)),null===Dt&&B instanceof Ft&&(Dt=B.field(gt.field)),q.push(jr(bt,Dt,O))}return q}(l.fieldTransforms,m,d,v),C=to(l,w.data(),E);return new Ft(l.key,w.version,C,{Je:!0})}(s,t,a,r):hn((l=s).Ge,d=t)?new le(l.key,Mt.min()):d;var l,d}function Zs(s,t){return s instanceof oi?function(r,a){for(var l=null,d=0,m=r.fieldTransforms;d<m.length;d++){var v=m[d],w=a instanceof Ft?a.field(v.field):void 0,E=je(v.transform,w||null);null!=E&&(l=null==l?(new zr).set(v.field,E):l.set(v.field,E))}return l?l.Xe():null}(s,t):null}function Br(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.Ge.isEqual(t.Ge)&&(0===s.type?s.value.isEqual(t.value):1===s.type?s.data.isEqual(t.data)&&s.We.isEqual(t.We):2!==s.type||Jn(s.fieldTransforms,s.fieldTransforms,function(r,a){return(l=r).field.isEqual((d=a).field)&&(v=d.transform,(m=l.transform)instanceof _e&&v instanceof _e||m instanceof Ei&&v instanceof Ei?Jn(m.elements,v.elements,En):m instanceof Vn&&v instanceof Vn?En(m.je,v.je):m instanceof ln&&v instanceof ln);var l,d,m,v}))}function Qs(s){return s instanceof Ft?s.version:Mt.min()}var Si=function(s){function t(r,a,l){var d=this;return(d=s.call(this)||this).key=r,d.value=a,d.Ge=l,d.type=0,d}return D.__extends(t,s),t}(Ur),fn=function(s){function t(r,a,l,d){var m=this;return(m=s.call(this)||this).key=r,m.data=a,m.We=l,m.Ge=d,m.type=1,m}return D.__extends(t,s),t}(Ur);function Js(s,t){return r=s,a=t instanceof Ft?t.data():Ve.empty(),l=new zr(a),r.We.fields.forEach(function(d){if(!d.m()){var m=r.data.field(d);null!==m?l.set(d,m):l.delete(d)}}),l.Xe();var r,a,l}var oi=function(s){function t(r,a){var l=this;return(l=s.call(this)||this).key=r,l.fieldTransforms=a,l.type=2,l.Ge=we.exists(!0),l}return D.__extends(t,s),t}(Ur);function bs(s,t){return t}function to(s,t,r){for(var a=new zr(t),l=0;l<s.fieldTransforms.length;l++)a.set(s.fieldTransforms[l].field,r[l]);return a.Xe()}var sr=function(s){function t(r,a){var l=this;return(l=s.call(this)||this).key=r,l.Ge=a,l.type=3,l}return D.__extends(t,s),t}(Ur),eo=function(s){function t(r,a){var l=this;return(l=s.call(this)||this).key=r,l.Ge=a,l.type=4,l}return D.__extends(t,s),t}(Ur),Ve=function(){function s(t){this.proto=t}return s.empty=function(){return new s({mapValue:{}})},s.prototype.field=function(t){if(t.m())return this.proto;for(var r=this.proto,a=0;a<t.length-1;++a)if(!r.mapValue.fields||!ii(r=r.mapValue.fields[t.get(a)]))return null;return(r=(r.mapValue.fields||{})[t._()])||null},s.prototype.isEqual=function(t){return En(this.proto,t.proto)},s}(),zr=function(){function s(t){void 0===t&&(t=Ve.empty()),this.Ze=t,this.tn=new Map}return s.prototype.set=function(t,r){return this.en(t,r),this},s.prototype.delete=function(t){return this.en(t,null),this},s.prototype.en=function(t,r){for(var a=this.tn,l=0;l<t.length-1;++l){var d=t.get(l),m=a.get(d);m instanceof Map?a=m:m&&10===Fn(m)?(m=new Map(Object.entries(m.mapValue.fields||{})),a.set(d,m),a=m):(m=new Map,a.set(d,m),a=m)}a.set(t._(),r)},s.prototype.Xe=function(){var t=this.nn(Q.P(),this.tn);return null!=t?new Ve(t):this.Ze},s.prototype.nn=function(t,r){var a=this,l=!1,d=this.Ze.field(t),m=ii(d)?Object.assign({},d.mapValue.fields):{};return r.forEach(function(v,w){if(v instanceof Map){var E=a.nn(t.child(w),v);null!=E&&(m[w]=E,l=!0)}else null!==v?(m[w]=v,l=!0):m.hasOwnProperty(w)&&(delete m[w],l=!0)}),l?{mapValue:{fields:m}}:null},s}();function ce(s){var t=[];return mi(s.fields||{},function(r,a){var l=new Q([r]);if(ii(a)){var d=ce(a.mapValue).fields;if(0===d.length)t.push(l);else for(var m=0,v=d;m<v.length;m++)t.push(l.child(v[m]))}else t.push(l)}),new $e(t)}var no=function(s,t){this.key=s,this.version=t},Ft=function(s){function t(r,a,l,d){var m=this;return(m=s.call(this,r,a)||this).sn=l,m.Je=!!d.Je,m.hasCommittedMutations=!!d.hasCommittedMutations,m}return D.__extends(t,s),t.prototype.field=function(r){return this.sn.field(r)},t.prototype.data=function(){return this.sn},t.prototype.rn=function(){return this.sn.proto},t.prototype.isEqual=function(r){return r instanceof t&&this.key.isEqual(r.key)&&this.version.isEqual(r.version)&&this.Je===r.Je&&this.hasCommittedMutations===r.hasCommittedMutations&&this.sn.isEqual(r.sn)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.sn.toString()+", {hasLocalMutations: "+this.Je+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.Je||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t}(no),le=function(s){function t(r,a,l){var d=this;return(d=s.call(this,r,a)||this).hasCommittedMutations=!(!l||!l.hasCommittedMutations),d}return D.__extends(t,s),t.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(r){return r instanceof t&&r.hasCommittedMutations===this.hasCommittedMutations&&r.version.isEqual(this.version)&&r.key.isEqual(this.key)},t}(no),Un=function(s){function t(){return null!==s&&s.apply(this,arguments)||this}return D.__extends(t,s),t.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(r){return r instanceof t&&r.version.isEqual(this.version)&&r.key.isEqual(this.key)},t}(no),Bn=function(s,t,r,a,l,d,m,v){void 0===t&&(t=null),void 0===r&&(r=[]),void 0===a&&(a=[]),void 0===l&&(l=null),void 0===d&&(d="F"),void 0===m&&(m=null),void 0===v&&(v=null),this.path=s,this.collectionGroup=t,this.on=r,this.filters=a,this.limit=l,this.an=d,this.startAt=m,this.endAt=v,this.cn=null,this.un=null};function or(s,t,r,a,l,d,m,v){return new Bn(s,t,r,a,l,d,m,v)}function Ti(s){return new Bn(s)}function ar(s){return!un(s.limit)&&"F"===s.an}function Ai(s){return!un(s.limit)&&"L"===s.an}function Ci(s){return s.on.length>0?s.on[0].field:null}function dn(s){for(var t=0,r=s.filters;t<r.length;t++){var a=r[t];if(a.hn())return a.field}return null}function _s(s){return null!==s.collectionGroup}function zn(s){var t=J(s);if(null===t.cn){t.cn=[];var r=dn(t),a=Ci(t);if(null!==r&&null===a)r.p()||t.cn.push(new mn(r)),t.cn.push(new mn(Q.v(),"asc"));else{for(var l=!1,d=0,m=t.on;d<m.length;d++){var v=m[d];t.cn.push(v),v.field.p()&&(l=!0)}if(!l){var w=t.on.length>0?t.on[t.on.length-1].dir:"asc";t.cn.push(new mn(Q.v(),w))}}}return t.cn}function Me(s){var t=J(s);if(!t.un)if("F"===t.an)t.un=Ar(t.path,t.collectionGroup,zn(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var r=[],a=0,l=zn(t);a<l.length;a++){var d=l[a];r.push(new mn(d.field,"desc"===d.dir?"asc":"desc"))}var v=t.endAt?new pn(t.endAt.position,!t.endAt.before):null,w=t.startAt?new pn(t.startAt.position,!t.startAt.before):null;t.un=Ar(t.path,t.collectionGroup,r,t.filters,t.limit,v,w)}return t.un}function Hn(s,t,r){return new Bn(s.path,s.collectionGroup,s.on.slice(),s.filters.slice(),t,r,s.startAt,s.endAt)}function ur(s,t){return new Bn(s.path,s.collectionGroup,s.on.slice(),s.filters.slice(),s.limit,s.an,t,s.endAt)}function Wn(s,t){return new Bn(s.path,s.collectionGroup,s.on.slice(),s.filters.slice(),s.limit,s.an,s.startAt,t)}function qn(s,t){return qi(Me(s),Me(t))&&s.an===t.an}function ws(s){return vi(Me(s))+"|lt:"+s.an}function Et(s){return"Query(target="+(r=(t=Me(s)).path.R(),null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=", filters: ["+t.filters.map(function(a){return(l=a).field.R()+" "+l.op+" "+wi(l.value);var l}).join(", ")+"]"),un(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=", orderBy: ["+t.orderBy.map(function(a){return(l=a).field.R()+" ("+l.dir+")";var l}).join(", ")+"]"),t.startAt&&(r+=", startAt: "+gn(t.startAt)),t.endAt&&(r+=", endAt: "+gn(t.endAt)),"Target("+r+"); limitType=")+s.an+")";var t,r}function Hr(s,t){return l=(a=t).key.path,(null!==(r=s).collectionGroup?a.key.N(r.collectionGroup)&&r.path.T(l):Y.F(r.path)?r.path.isEqual(l):r.path.I(l))&&function(r,a){for(var l=0,d=r.on;l<d.length;l++){var m=d[l];if(!m.field.p()&&null===a.field(m.field))return!1}return!0}(s,t)&&function(r,a){for(var l=0,d=r.filters;l<d.length;l++)if(!d[l].matches(a))return!1;return!0}(s,t)&&function(r,a){return!(r.startAt&&!ro(r.startAt,zn(r),a)||r.endAt&&ro(r.endAt,zn(r),a))}(s,t);var r,a,l}function cr(s){return function(t,r){for(var a=!1,l=0,d=zn(s);l<d.length;l++){var m=d[l],v=xs(m,t,r);if(0!==v)return v;a=a||m.field.p()}return 0}}var Se=function(s){function t(r,a,l){var d=this;return(d=s.call(this)||this).field=r,d.op=a,d.value=l,d}return D.__extends(t,s),t.create=function(r,a,l){if(r.p())return"in"===a||"not-in"===a?this.ln(r,a,l):new ai(r,a,l);if(Ki(l)){if("=="!==a&&"!="!==a)throw new G(j.INVALID_ARGUMENT,"Invalid query. Null only supports '==' and '!=' comparisons.");return new t(r,a,l)}if(jn(l)){if("=="!==a&&"!="!==a)throw new G(j.INVALID_ARGUMENT,"Invalid query. NaN only supports '==' and '!=' comparisons.");return new t(r,a,l)}return"array-contains"===a?new lr(r,l):"in"===a?new Mi(r,l):"not-in"===a?new Gr(r,l):"array-contains-any"===a?new To(r,l):new t(r,a,l)},t.ln=function(r,a,l){return"in"===a?new io(r,l):new Wr(r,l)},t.prototype.matches=function(r){var a=r.field(this.field);return"!="===this.op?null!==a&&this._n(Ot(a,this.value)):null!==a&&Fn(this.value)===Fn(a)&&this._n(Ot(a,this.value))},t.prototype._n=function(r){switch(this.op){case"<":return r<0;case"<=":return r<=0;case"==":return 0===r;case"!=":return 0!==r;case">":return r>0;case">=":return r>=0;default:return at()}},t.prototype.hn=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},t}(function(){}),ai=function(s){function t(r,a,l){var d=this;return(d=s.call(this,r,a,l)||this).key=Y.C(l.referenceValue),d}return D.__extends(t,s),t.prototype.matches=function(r){var a=Y.i(r.key,this.key);return this._n(a)},t}(Se),io=function(s){function t(r,a){var l=this;return(l=s.call(this,r,"in",a)||this).keys=qr(0,a),l}return D.__extends(t,s),t.prototype.matches=function(r){return this.keys.some(function(a){return a.isEqual(r.key)})},t}(Se),Wr=function(s){function t(r,a){var l=this;return(l=s.call(this,r,"not-in",a)||this).keys=qr(0,a),l}return D.__extends(t,s),t.prototype.matches=function(r){return!this.keys.some(function(a){return a.isEqual(r.key)})},t}(Se);function qr(s,t){var r;return((null===(r=t.arrayValue)||void 0===r?void 0:r.values)||[]).map(function(a){return Y.C(a.referenceValue)})}var lr=function(s){function t(r,a){return s.call(this,r,"array-contains",a)||this}return D.__extends(t,s),t.prototype.matches=function(r){var a=r.field(this.field);return ni(a)&&Pt(a.arrayValue,this.value)},t}(Se),Mi=function(s){function t(r,a){return s.call(this,r,"in",a)||this}return D.__extends(t,s),t.prototype.matches=function(r){var a=r.field(this.field);return null!==a&&Pt(this.value.arrayValue,a)},t}(Se),Gr=function(s){function t(r,a){return s.call(this,r,"not-in",a)||this}return D.__extends(t,s),t.prototype.matches=function(r){if(Pt(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var a=r.field(this.field);return null!==a&&!Pt(this.value.arrayValue,a)},t}(Se),To=function(s){function t(r,a){return s.call(this,r,"array-contains-any",a)||this}return D.__extends(t,s),t.prototype.matches=function(r){var a=this,l=r.field(this.field);return!(!ni(l)||!l.arrayValue.values)&&l.arrayValue.values.some(function(d){return Pt(a.value.arrayValue,d)})},t}(Se),pn=function(s,t){this.position=s,this.before=t};function gn(s){return(s.before?"b":"a")+":"+s.position.map(function(t){return wi(t)}).join(",")}function ro(s,t,r){for(var a=0,l=0;l<s.position.length;l++){var d=t[l],m=s.position[l];if(a=d.field.p()?Y.i(Y.C(m.referenceValue),r.key):Ot(m,r.field(d.field)),"desc"===d.dir&&(a*=-1),0!==a)break}return s.before?a<=0:a<0}function so(s,t){if(null===s)return null===t;if(null===t||s.before!==t.before||s.position.length!==t.position.length)return!1;for(var r=0;r<s.position.length;r++)if(!En(s.position[r],t.position[r]))return!1;return!0}var mn=function(s,t){void 0===t&&(t="asc"),this.field=s,this.dir=t};function xs(s,t,r){var l,m,v,w,a=s.field.p()?Y.i(t.key,r.key):(m=r,v=t.field(l=s.field),w=m.field(l),null!==v&&null!==w?Ot(v,w):at());switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return at()}}function Je(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}var Ue=function(){var s=this;this.promise=new Promise(function(t,r){s.resolve=t,s.reject=r})},Is=function(){function s(t,r,a,l,d){void 0===a&&(a=1e3),void 0===l&&(l=1.5),void 0===d&&(d=6e4),this.fn=t,this.dn=r,this.wn=a,this.mn=l,this.Tn=d,this.En=0,this.In=null,this.An=Date.now(),this.reset()}return s.prototype.reset=function(){this.En=0},s.prototype.Rn=function(){this.En=this.Tn},s.prototype.gn=function(t){var r=this;this.cancel();var a=Math.floor(this.En+this.Pn()),l=Math.max(0,Date.now()-this.An),d=Math.max(0,a-l);d>0&&rt("ExponentialBackoff","Backing off for "+d+" ms (base delay: "+this.En+" ms, delay with jitter: "+a+" ms, last attempt: "+l+" ms ago)"),this.In=this.fn.yn(this.dn,d,function(){return r.An=Date.now(),t()}),this.En*=this.mn,this.En<this.wn&&(this.En=this.wn),this.En>this.Tn&&(this.En=this.Tn)},s.prototype.Vn=function(){null!==this.In&&(this.In.pn(),this.In=null)},s.prototype.cancel=function(){null!==this.In&&(this.In.cancel(),this.In=null)},s.prototype.Pn=function(){return(Math.random()-.5)*this.En},s}(),Z=function(){function s(t){var r=this;this.bn=null,this.vn=null,this.result=void 0,this.error=void 0,this.Sn=!1,this.Dn=!1,t(function(a){r.Sn=!0,r.result=a,r.bn&&r.bn(a)},function(a){r.Sn=!0,r.error=a,r.vn&&r.vn(a)})}return s.prototype.catch=function(t){return this.next(void 0,t)},s.prototype.next=function(t,r){var a=this;return this.Dn&&at(),this.Dn=!0,this.Sn?this.error?this.Cn(r,this.error):this.Nn(t,this.result):new s(function(l,d){a.bn=function(m){a.Nn(t,m).next(l,d)},a.vn=function(m){a.Cn(r,m).next(l,d)}})},s.prototype.Fn=function(){var t=this;return new Promise(function(r,a){t.next(r,a)})},s.prototype.xn=function(t){try{var r=t();return r instanceof s?r:s.resolve(r)}catch(a){return s.reject(a)}},s.prototype.Nn=function(t,r){return t?this.xn(function(){return t(r)}):s.resolve(r)},s.prototype.Cn=function(t,r){return t?this.xn(function(){return t(r)}):s.reject(r)},s.resolve=function(t){return new s(function(r,a){r(t)})},s.reject=function(t){return new s(function(r,a){a(t)})},s.$n=function(t){return new s(function(r,a){var l=0,d=0,m=!1;t.forEach(function(v){++l,v.next(function(){++d,m&&d===l&&r()},function(w){return a(w)})}),m=!0,d===l&&r()})},s.kn=function(t){for(var r=s.resolve(!1),a=function(m){r=r.next(function(v){return v?s.resolve(v):m()})},l=0,d=t;l<d.length;l++)a(d[l]);return r},s.forEach=function(t,r){var a=this,l=[];return t.forEach(function(d,m){l.push(r.call(a,d,m))}),this.$n(l)},s}(),ui=function(){function s(t,r,a){this.name=t,this.version=r,this.Mn=a,12.2===s.On(tt.getUA())&&Gt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return s.delete=function(t){return rt("SimpleDb","Removing database:",t),Be(window.indexedDB.deleteDatabase(t)).Fn()},s.Ln=function(){if("undefined"==typeof indexedDB)return!1;if(s.Bn())return!0;var t=tt.getUA(),r=s.On(t),a=0<r&&r<10,l=s.qn(t),d=0<l&&l<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||a||d)},s.Bn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Un)},s.Qn=function(t,r){return t.store(r)},s.On=function(t){var r=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),a=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(a)},s.qn=function(t){var r=t.match(/Android ([\d.]+)/i),a=r?r[1].split(".").slice(0,2).join("."):"-1";return Number(a)},s.prototype.Wn=function(t){return D.__awaiter(this,void 0,void 0,function(){var r,a=this;return D.__generator(this,function(l){switch(l.label){case 0:return this.db?[3,2]:(rt("SimpleDb","Opening database:",this.name),r=this,[4,new Promise(function(d,m){var v=indexedDB.open(a.name,a.version);v.onsuccess=function(w){d(w.target.result)},v.onblocked=function(){m(new se(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},v.onerror=function(w){var E=w.target.error;m("VersionError"===E.name?new G(j.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new se(t,E))},v.onupgradeneeded=function(w){rt("SimpleDb",'Database "'+a.name+'" requires upgrade from version:',w.oldVersion),a.Mn.createOrUpgrade(w.target.result,v.transaction,w.oldVersion,a.version).next(function(){rt("SimpleDb","Database upgrade to version "+a.version+" complete")})}})]);case 1:r.db=l.sent(),l.label=2;case 2:return[2,(this.jn&&(this.db.onversionchange=function(d){return a.jn(d)}),this.db)]}})})},s.prototype.Kn=function(t){this.jn=t,this.db&&(this.db.onversionchange=function(r){return t(r)})},s.prototype.runTransaction=function(t,r,a,l){return D.__awaiter(this,void 0,void 0,function(){var d,m,v,w,E;return D.__generator(this,function(C){switch(C.label){case 0:d="readonly"===r,m=0,v=function(){var P,O,R,B,q;return D.__generator(this,function(ct){switch(ct.label){case 0:++m,ct.label=1;case 1:return ct.trys.push([1,4,,5]),[4,w.Wn(t)];case 2:return w.db=ct.sent(),P=ki.open(w.db,t,d?"readonly":"readwrite",a),O=l(P).catch(function(ut){return P.abort(ut),Z.reject(ut)}).Fn(),R={},O.catch(function(){}),[4,P.Gn];case 3:return[2,(R.value=(ct.sent(),O),R)];case 4:return rt("SimpleDb","Transaction failed with error:",(B=ct.sent()).message,"Retrying:",q="FirebaseError"!==B.name&&m<3),w.close(),q?[3,5]:[2,{value:Promise.reject(B)}];case 5:return[2]}})},w=this,C.label=1;case 1:return[5,v()];case 2:if("object"==typeof(E=C.sent()))return[2,E.value];C.label=3;case 3:return[3,1];case 4:return[2]}})})},s.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},s}(),ci=function(){function s(t){this.zn=t,this.Hn=!1,this.Yn=null}return Object.defineProperty(s.prototype,"Sn",{get:function(){return this.Hn},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Jn",{get:function(){return this.Yn},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"cursor",{set:function(t){this.zn=t},enumerable:!1,configurable:!0}),s.prototype.done=function(){this.Hn=!0},s.prototype.Xn=function(t){this.Yn=t},s.prototype.delete=function(){return Be(this.zn.delete())},s}(),se=function(s){function t(r,a){var l=this;return(l=s.call(this,j.UNAVAILABLE,"IndexedDB transaction '"+r+"' failed: "+a)||this).name="IndexedDbTransactionError",l}return D.__extends(t,s),t}(G);function Xt(s){return"IndexedDbTransactionError"===s.name}var ki=function(){function s(t,r){var a=this;this.action=t,this.transaction=r,this.aborted=!1,this.Zn=new Ue,this.transaction.oncomplete=function(){a.Zn.resolve()},this.transaction.onabort=function(){r.error?a.Zn.reject(new se(t,r.error)):a.Zn.resolve()},this.transaction.onerror=function(l){var d=b(l.target.error);a.Zn.reject(new se(t,d))}}return s.open=function(t,r,a,l){try{return new s(r,t.transaction(l,a))}catch(d){throw new se(r,d)}},Object.defineProperty(s.prototype,"Gn",{get:function(){return this.Zn.promise},enumerable:!1,configurable:!0}),s.prototype.abort=function(t){t&&this.Zn.reject(t),this.aborted||(rt("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},s.prototype.store=function(t){var r=this.transaction.objectStore(t);return new ga(r)},s}(),ga=function(){function s(t){this.store=t}return s.prototype.put=function(t,r){var a;return void 0!==r?(rt("SimpleDb","PUT",this.store.name,t,r),a=this.store.put(r,t)):(rt("SimpleDb","PUT",this.store.name,"<auto-key>",t),a=this.store.put(t)),Be(a)},s.prototype.add=function(t){return rt("SimpleDb","ADD",this.store.name,t,t),Be(this.store.add(t))},s.prototype.get=function(t){var r=this;return Be(this.store.get(t)).next(function(a){return void 0===a&&(a=null),rt("SimpleDb","GET",r.store.name,t,a),a})},s.prototype.delete=function(t){return rt("SimpleDb","DELETE",this.store.name,t),Be(this.store.delete(t))},s.prototype.count=function(){return rt("SimpleDb","COUNT",this.store.name),Be(this.store.count())},s.prototype.ts=function(t,r){var a=this.cursor(this.options(t,r)),l=[];return this.es(a,function(d,m){l.push(m)}).next(function(){return l})},s.prototype.ns=function(t,r){rt("SimpleDb","DELETE ALL",this.store.name);var a=this.options(t,r);a.ss=!1;var l=this.cursor(a);return this.es(l,function(d,m,v){return v.delete()})},s.prototype.rs=function(t,r){var a;r?a=t:(a={},r=t);var l=this.cursor(a);return this.es(l,r)},s.prototype.os=function(t){var r=this.cursor({});return new Z(function(a,l){r.onerror=function(d){var m=b(d.target.error);l(m)},r.onsuccess=function(d){var m=d.target.result;m?t(m.primaryKey,m.value).next(function(v){v?m.continue():a()}):a()}})},s.prototype.es=function(t,r){var a=[];return new Z(function(l,d){t.onerror=function(m){d(m.target.error)},t.onsuccess=function(m){var v=m.target.result;if(v){var w=new ci(v),E=r(v.primaryKey,v.value,w);if(E instanceof Z){var C=E.catch(function(P){return w.done(),Z.reject(P)});a.push(C)}w.Sn?l():null===w.Jn?v.continue():v.continue(w.Jn)}else l()}}).next(function(){return Z.$n(a)})},s.prototype.options=function(t,r){var a=void 0;return void 0!==t&&("string"==typeof t?a=t:r=t),{index:a,range:r}},s.prototype.cursor=function(t){var r="next";if(t.reverse&&(r="prev"),t.index){var a=this.store.index(t.index);return t.ss?a.openKeyCursor(t.range,r):a.openCursor(t.range,r)}return this.store.openCursor(t.range,r)},s}();function Be(s){return new Z(function(t,r){s.onsuccess=function(a){t(a.target.result)},s.onerror=function(a){var l=b(a.target.error);r(l)}})}var f=!1;function b(s){var t=ui.On(tt.getUA());if(t>=12.2&&t<13){var r="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(r)>=0){var a=new G("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+r+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return f||(f=!0,setTimeout(function(){throw a},0)),a}}return s}function x(){return"undefined"!=typeof window?window:null}function T(){return"undefined"!=typeof document?document:null}var L=function(){function s(t,r,a,l,d){this.cs=t,this.dn=r,this.us=a,this.op=l,this.hs=d,this.ls=new Ue,this.then=this.ls.promise.then.bind(this.ls.promise),this.ls.promise.catch(function(m){})}return s._s=function(t,r,a,l,d){var m=new s(t,r,Date.now()+a,l,d);return m.start(a),m},s.prototype.start=function(t){var r=this;this.fs=setTimeout(function(){return r.ds()},t)},s.prototype.pn=function(){return this.ds()},s.prototype.cancel=function(t){null!==this.fs&&(this.clearTimeout(),this.ls.reject(new G(j.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},s.prototype.ds=function(){var t=this;this.cs.ws(function(){return null!==t.fs?(t.clearTimeout(),t.op().then(function(r){return t.ls.resolve(r)})):Promise.resolve()})},s.prototype.clearTimeout=function(){null!==this.fs&&(this.hs(this),clearTimeout(this.fs),this.fs=null)},s}(),U=function(){function s(){var t=this;this.Ts=Promise.resolve(),this.Es=[],this.Is=!1,this.As=[],this.Rs=null,this.gs=!1,this.Ps=[],this.ys=new Is(this,"async_queue_retry"),this.Vs=function(){var a=T();a&&rt("AsyncQueue","Visibility state changed to  ",a.visibilityState),t.ys.Vn()};var r=T();r&&"function"==typeof r.addEventListener&&r.addEventListener("visibilitychange",this.Vs)}return Object.defineProperty(s.prototype,"ps",{get:function(){return this.Is},enumerable:!1,configurable:!0}),s.prototype.ws=function(t){this.enqueue(t)},s.prototype.bs=function(t){this.vs(),this.Ss(t)},s.prototype.Ds=function(){if(!this.Is){this.Is=!0;var t=T();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vs)}},s.prototype.enqueue=function(t){return this.vs(),this.Is?new Promise(function(r){}):this.Ss(t)},s.prototype.Cs=function(t){var r=this;this.ws(function(){return r.Es.push(t),r.Ns()})},s.prototype.Ns=function(){return D.__awaiter(this,void 0,void 0,function(){var t,r=this;return D.__generator(this,function(a){switch(a.label){case 0:if(0===this.Es.length)return[3,5];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.Es[0]()];case 2:return a.sent(),this.Es.shift(),this.ys.reset(),[3,4];case 3:if(!Xt(t=a.sent()))throw t;return rt("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Es.length>0&&this.ys.gn(function(){return r.Ns()}),a.label=5;case 5:return[2]}})})},s.prototype.Ss=function(t){var r=this,a=this.Ts.then(function(){return r.gs=!0,t().catch(function(l){throw r.Rs=l,r.gs=!1,Gt("INTERNAL UNHANDLED ERROR: ",(m=(d=l).message||"",d.stack&&(m=d.stack.includes(d.message)?d.stack:d.message+"\n"+d.stack),m)),l;var d,m}).then(function(l){return r.gs=!1,l})});return this.Ts=a,a},s.prototype.yn=function(t,r,a){var l=this;this.vs(),this.Ps.indexOf(t)>-1&&(r=0);var d=L._s(this,t,r,a,function(m){return l.Fs(m)});return this.As.push(d),d},s.prototype.vs=function(){this.Rs&&at()},s.prototype.xs=function(){},s.prototype.$s=function(){return D.__awaiter(this,void 0,void 0,function(){var t;return D.__generator(this,function(r){switch(r.label){case 0:return[4,t=this.Ts];case 1:r.sent(),r.label=2;case 2:if(t!==this.Ts)return[3,0];r.label=3;case 3:return[2]}})})},s.prototype.ks=function(t){for(var r=0,a=this.As;r<a.length;r++)if(a[r].dn===t)return!0;return!1},s.prototype.Ms=function(t){var r=this;return this.$s().then(function(){r.As.sort(function(m,v){return m.us-v.us});for(var a=0,l=r.As;a<l.length;a++){var d=l[a];if(d.pn(),"all"!==t&&d.dn===t)break}return r.$s()})},s.prototype.Os=function(t){this.Ps.push(t)},s.prototype.Fs=function(t){var r=this.As.indexOf(t);this.As.splice(r,1)},s}();function it(s,t){if(Gt("AsyncQueue",t+": "+s),Xt(s))return new G(j.UNAVAILABLE,t+": "+s);throw s}var kt=function(){this.Ls=void 0,this.listeners=[]},Ct=function(){this.Bs=new te(function(s){return ws(s)},qn),this.onlineState="Unknown",this.qs=new Set};function pe(s,t){return D.__awaiter(this,void 0,void 0,function(){var r,a,l,d,m,v,w;return D.__generator(this,function(E){switch(E.label){case 0:if(r=J(s),l=!1,(d=r.Bs.get(a=t.query))||(l=!0,d=new kt),!l)return[3,4];E.label=1;case 1:return E.trys.push([1,3,,4]),m=d,[4,r.Us(a)];case 2:return m.Ls=E.sent(),[3,4];case 3:return v=E.sent(),w=it(v,"Initialization of query '"+Et(t.query)+"' failed"),[2,void t.onError(w)];case 4:return r.Bs.set(a,d),d.listeners.push(t),t.Qs(r.onlineState),d.Ls&&t.Ws(d.Ls)&&Di(r),[2]}})})}function Ke(s,t){return D.__awaiter(this,void 0,void 0,function(){var r,a,l,d,m;return D.__generator(this,function(v){return r=J(s),l=!1,(d=r.Bs.get(a=t.query))&&(m=d.listeners.indexOf(t))>=0&&(d.listeners.splice(m,1),l=0===d.listeners.length),l?[2,(r.Bs.delete(a),r.js(a))]:[2]})})}function tn(s,t){for(var r=J(s),a=!1,l=0,d=t;l<d.length;l++){var m=d[l],w=r.Bs.get(m.query);if(w){for(var E=0,C=w.listeners;E<C.length;E++)C[E].Ws(m)&&(a=!0);w.Ls=m}}a&&Di(r)}function Yr(s,t,r){var a=J(s),l=a.Bs.get(t);if(l)for(var d=0,m=l.listeners;d<m.length;d++)m[d].onError(r);a.Bs.delete(t)}function Di(s){s.qs.forEach(function(t){t.next()})}var hr=function(){function s(t,r,a){this.query=t,this.Ks=r,this.Gs=!1,this.zs=null,this.onlineState="Unknown",this.options=a||{}}return s.prototype.Ws=function(t){if(!this.options.includeMetadataChanges){for(var r=[],a=0,l=t.docChanges;a<l.length;a++){var d=l[a];3!==d.type&&r.push(d)}t=new _i(t.query,t.docs,t.Qt,r,t.Wt,t.fromCache,t.jt,!0)}var m=!1;return this.Gs?this.Hs(t)&&(this.Ks.next(t),m=!0):this.Ys(t,this.onlineState)&&(this.Js(t),m=!0),this.zs=t,m},s.prototype.onError=function(t){this.Ks.error(t)},s.prototype.Qs=function(t){this.onlineState=t;var r=!1;return this.zs&&!this.Gs&&this.Ys(this.zs,t)&&(this.Js(this.zs),r=!0),r},s.prototype.Ys=function(t,r){return!t.fromCache||!(this.options.Xs&&"Offline"!==r||t.docs.m()&&"Offline"!==r)},s.prototype.Hs=function(t){return t.docChanges.length>0||!!(t.jt||this.zs&&this.zs.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},s.prototype.Js=function(t){t=_i.Gt(t.query,t.docs,t.Wt,t.fromCache),this.Gs=!0,this.Ks.next(t)},s}(),Xe=function(){function s(t){this.uid=t}return s.prototype.Zs=function(){return null!=this.uid},s.prototype.ti=function(){return this.Zs()?"uid:"+this.uid:"anonymous-user"},s.prototype.isEqual=function(t){return t.uid===this.uid},s}();Xe.UNAUTHENTICATED=new Xe(null),Xe.ei=new Xe("google-credentials-uid"),Xe.ni=new Xe("first-party-uid");var Ne=function(){function s(t,r){var a=this;this.previousValue=t,r&&(r.si=function(l){return a.ii(l)},this.ri=function(l){return r.oi(l)})}return s.prototype.ii=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},s.prototype.next=function(){var t=++this.previousValue;return this.ri&&this.ri(t),t},s}();function ma(s,t){return"firestore_clients_"+s+"_"+t}function lu(s,t,r){var a="firestore_mutations_"+s+"_"+r;return t.Zs()&&(a+="_"+t.uid),a}function Ao(s,t){return"firestore_targets_"+s+"_"+t}Ne.ai=-1;var hu=function(){function s(t,r,a,l){this.user=t,this.batchId=r,this.state=a,this.error=l}return s.ci=function(t,r,a){var l=JSON.parse(a),d="object"==typeof l&&-1!==["pending","acknowledged","rejected"].indexOf(l.state)&&(void 0===l.error||"object"==typeof l.error),m=void 0;return d&&l.error&&(d="string"==typeof l.error.message&&"string"==typeof l.error.code)&&(m=new G(l.error.code,l.error.message)),d?new s(t,r,l.state,m):(Gt("SharedClientState","Failed to parse mutation state for ID '"+r+"': "+a),null)},s.prototype.ui=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},s}(),fr=function(){function s(t,r,a){this.targetId=t,this.state=r,this.error=a}return s.ci=function(t,r){var a=JSON.parse(r),l="object"==typeof a&&-1!==["not-current","current","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error),d=void 0;return l&&a.error&&(l="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(d=new G(a.error.code,a.error.message)),l?new s(t,a.state,d):(Gt("SharedClientState","Failed to parse target state for ID '"+t+"': "+r),null)},s.prototype.ui=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},s}(),ya=function(){function s(t,r){this.clientId=t,this.activeTargetIds=r}return s.ci=function(t,r){for(var a=JSON.parse(r),l="object"==typeof a&&a.activeTargetIds instanceof Array,d=Bt(),m=0;l&&m<a.activeTargetIds.length;++m)l=_o(a.activeTargetIds[m]),d=d.add(a.activeTargetIds[m]);return l?new s(t,d):(Gt("SharedClientState","Failed to parse client data for instance '"+t+"': "+r),null)},s}(),_c=function(){function s(t,r){this.clientId=t,this.onlineState=r}return s.ci=function(t){var r=JSON.parse(t);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new s(r.clientId,r.onlineState):(Gt("SharedClientState","Failed to parse online state: "+t),null)},s}(),va=function(){function s(){this.activeTargetIds=Bt()}return s.prototype.hi=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},s.prototype.li=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},s.prototype.ui=function(){var t={activeTargetIds:this.activeTargetIds.A(),updateTimeMs:Date.now()};return JSON.stringify(t)},s}(),ba=function(){function s(t,r,a,l,d){this.window=t,this.fn=r,this.persistenceKey=a,this._i=l,this.fi=null,this.di=null,this.si=null,this.wi=this.mi.bind(this),this.Ti=new ve(wt),this.Ei=!1,this.Ii=[];var m=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=d,this.Ai=ma(this.persistenceKey,this._i),this.Ri="firestore_sequence_number_"+this.persistenceKey,this.Ti=this.Ti.ot(this._i,new va),this.gi=new RegExp("^firestore_clients_"+m+"_([^_]*)$"),this.Pi=new RegExp("^firestore_mutations_"+m+"_(\\d+)(?:_(.*))?$"),this.yi=new RegExp("^firestore_targets_"+m+"_(\\d+)$"),this.Vi="firestore_online_state_"+this.persistenceKey,this.window.addEventListener("storage",this.wi)}return s.Ln=function(t){return!(!t||!t.localStorage)},s.prototype.start=function(){return D.__awaiter(this,void 0,void 0,function(){var t,r,a,l,d,m,v,w,E,C,O=this;return D.__generator(this,function(R){switch(R.label){case 0:return[4,this.fi.pi()];case 1:for(t=R.sent(),r=0,a=t;r<a.length;r++)(l=a[r])!==this._i&&(d=this.getItem(ma(this.persistenceKey,l)))&&(m=ya.ci(l,d))&&(this.Ti=this.Ti.ot(m.clientId,m));for(this.bi(),(v=this.storage.getItem(this.Vi))&&(w=this.vi(v))&&this.Si(w),E=0,C=this.Ii;E<C.length;E++)this.mi(C[E]);return this.Ii=[],this.window.addEventListener("unload",function(){return O.Di()}),this.Ei=!0,[2]}})})},s.prototype.oi=function(t){this.setItem(this.Ri,JSON.stringify(t))},s.prototype.Ci=function(){return this.Ni(this.Ti)},s.prototype.Fi=function(t){var r=!1;return this.Ti.forEach(function(a,l){l.activeTargetIds.has(t)&&(r=!0)}),r},s.prototype.xi=function(t){this.$i(t,"pending")},s.prototype.ki=function(t,r,a){this.$i(t,r,a),this.Mi(t)},s.prototype.Oi=function(t){var r="not-current";if(this.Fi(t)){var a=this.storage.getItem(Ao(this.persistenceKey,t));if(a){var l=fr.ci(t,a);l&&(r=l.state)}}return this.Li.hi(t),this.bi(),r},s.prototype.Bi=function(t){this.Li.li(t),this.bi()},s.prototype.qi=function(t){return this.Li.activeTargetIds.has(t)},s.prototype.Ui=function(t){this.removeItem(Ao(this.persistenceKey,t))},s.prototype.Qi=function(t,r,a){this.Wi(t,r,a)},s.prototype.ji=function(t,r,a){var l=this;r.forEach(function(d){l.Mi(d)}),this.currentUser=t,a.forEach(function(d){l.xi(d)})},s.prototype.Ki=function(t){this.Gi(t)},s.prototype.Di=function(){this.Ei&&(this.window.removeEventListener("storage",this.wi),this.removeItem(this.Ai),this.Ei=!1)},s.prototype.getItem=function(t){var r=this.storage.getItem(t);return rt("SharedClientState","READ",t,r),r},s.prototype.setItem=function(t,r){rt("SharedClientState","SET",t,r),this.storage.setItem(t,r)},s.prototype.removeItem=function(t){rt("SharedClientState","REMOVE",t),this.storage.removeItem(t)},s.prototype.mi=function(t){var r=this,a=t;if(a.storageArea===this.storage){if(rt("SharedClientState","EVENT",a.key,a.newValue),a.key===this.Ai)return void Gt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.fn.Cs(function(){return D.__awaiter(r,void 0,void 0,function(){var l,d,m,v,w,E;return D.__generator(this,function(C){if(this.Ei){if(null!==a.key)if(this.gi.test(a.key)){if(null==a.newValue)return l=this.zi(a.key),[2,this.Hi(l,null)];if(d=this.Yi(a.key,a.newValue))return[2,this.Hi(d.clientId,d)]}else if(this.Pi.test(a.key)){if(null!==a.newValue&&(m=this.Ji(a.key,a.newValue)))return[2,this.Xi(m)]}else if(this.yi.test(a.key)){if(null!==a.newValue&&(v=this.Zi(a.key,a.newValue)))return[2,this.tr(v)]}else if(a.key===this.Vi){if(null!==a.newValue&&(w=this.vi(a.newValue)))return[2,this.Si(w)]}else a.key===this.Ri&&(E=function(P){var O=Ne.ai;if(null!=P)try{var R=JSON.parse(P);nt("number"==typeof R),O=R}catch(B){Gt("SharedClientState","Failed to read sequence number from WebStorage",B)}return O}(a.newValue))!==Ne.ai&&this.si(E)}else this.Ii.push(a);return[2]})})})}},Object.defineProperty(s.prototype,"Li",{get:function(){return this.Ti.get(this._i)},enumerable:!1,configurable:!0}),s.prototype.bi=function(){this.setItem(this.Ai,this.Li.ui())},s.prototype.$i=function(t,r,a){var l=new hu(this.currentUser,t,r,a),d=lu(this.persistenceKey,this.currentUser,t);this.setItem(d,l.ui())},s.prototype.Mi=function(t){var r=lu(this.persistenceKey,this.currentUser,t);this.removeItem(r)},s.prototype.Gi=function(t){this.storage.setItem(this.Vi,JSON.stringify({clientId:this._i,onlineState:t}))},s.prototype.Wi=function(t,r,a){var l=Ao(this.persistenceKey,t),d=new fr(t,r,a);this.setItem(l,d.ui())},s.prototype.zi=function(t){var r=this.gi.exec(t);return r?r[1]:null},s.prototype.Yi=function(t,r){var a=this.zi(t);return ya.ci(a,r)},s.prototype.Ji=function(t,r){var a=this.Pi.exec(t),l=Number(a[1]);return hu.ci(new Xe(void 0!==a[2]?a[2]:null),l,r)},s.prototype.Zi=function(t,r){var a=this.yi.exec(t),l=Number(a[1]);return fr.ci(l,r)},s.prototype.vi=function(t){return _c.ci(t)},s.prototype.Xi=function(t){return D.__awaiter(this,void 0,void 0,function(){return D.__generator(this,function(r){return t.user.uid===this.currentUser.uid?[2,this.fi.er(t.batchId,t.state,t.error)]:(rt("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},s.prototype.tr=function(t){return this.fi.nr(t.targetId,t.state,t.error)},s.prototype.Hi=function(t,r){var a=this,l=r?this.Ti.ot(t,r):this.Ti.remove(t),d=this.Ni(this.Ti),m=this.Ni(l),v=[],w=[];return m.forEach(function(E){d.has(E)||v.push(E)}),d.forEach(function(E){m.has(E)||w.push(E)}),this.fi.sr(v,w).then(function(){a.Ti=l})},s.prototype.Si=function(t){this.Ti.get(t.clientId)&&this.di(t.onlineState)},s.prototype.Ni=function(t){var r=Bt();return t.forEach(function(a,l){r=r.kt(l.activeTargetIds)}),r},s}(),_a=function(){function s(){this.ir=new va,this.rr={},this.di=null,this.si=null}return s.prototype.xi=function(t){},s.prototype.ki=function(t,r,a){},s.prototype.Oi=function(t){return this.ir.hi(t),this.rr[t]||"not-current"},s.prototype.Qi=function(t,r,a){this.rr[t]=r},s.prototype.Bi=function(t){this.ir.li(t)},s.prototype.qi=function(t){return this.ir.activeTargetIds.has(t)},s.prototype.Ui=function(t){delete this.rr[t]},s.prototype.Ci=function(){return this.ir.activeTargetIds},s.prototype.Fi=function(t){return this.ir.activeTargetIds.has(t)},s.prototype.start=function(){return this.ir=new va,Promise.resolve()},s.prototype.ji=function(t,r,a){},s.prototype.Ki=function(t){},s.prototype.Di=function(){},s.prototype.oi=function(t){},s}(),Es=function(){function s(t,r,a,l){this.batchId=t,this.ar=r,this.baseMutations=a,this.mutations=l}return s.prototype.cr=function(t,r,a){for(var l=a.ur,d=0;d<this.mutations.length;d++){var m=this.mutations[d];m.key.isEqual(t)&&(r=pa(m,r,l[d]))}return r},s.prototype.hr=function(t,r){for(var a=0,l=this.baseMutations;a<l.length;a++){var d=l[a];d.key.isEqual(t)&&(r=rr(d,r,r,this.ar))}for(var m=r,v=0,w=this.mutations;v<w.length;v++){var E=w[v];E.key.isEqual(t)&&(r=rr(E,r,m,this.ar))}return r},s.prototype.lr=function(t){var r=this,a=t;return this.mutations.forEach(function(l){var d=r.hr(l.key,t.get(l.key));d&&(a=a.ot(l.key,d))}),a},s.prototype.keys=function(){return this.mutations.reduce(function(t,r){return t.add(r.key)},Kt())},s.prototype.isEqual=function(t){return this.batchId===t.batchId&&Jn(this.mutations,t.mutations,function(r,a){return Br(r,a)})&&Jn(this.baseMutations,t.baseMutations,function(r,a){return Br(r,a)})},s}(),wc=function(){function s(t,r,a,l){this.batch=t,this._r=r,this.ur=a,this.dr=l}return s.from=function(t,r,a){nt(t.mutations.length===a.length);for(var l=We,d=t.mutations,m=0;m<d.length;m++)l=l.ot(d[m].key,a[m].version);return new s(t,r,a,l)},s}(),fu=function(){function s(){this.wr=new te(function(t){return t.toString()},function(t,r){return t.isEqual(r)}),this.mr=!1}return Object.defineProperty(s.prototype,"readTime",{get:function(){return this.Tr},set:function(t){this.Tr=t},enumerable:!1,configurable:!0}),s.prototype.Er=function(t,r){this.Ir(),this.readTime=r,this.wr.set(t.key,t)},s.prototype.Ar=function(t,r){this.Ir(),r&&(this.readTime=r),this.wr.set(t,null)},s.prototype.Rr=function(t,r){this.Ir();var a=this.wr.get(r);return void 0!==a?Z.resolve(a):this.gr(t,r)},s.prototype.getEntries=function(t,r){return this.Pr(t,r)},s.prototype.apply=function(t){return this.Ir(),this.mr=!0,this.yr(t)},s.prototype.Ir=function(){},s}(),wa="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Co=function(){function s(){this.Vr=[]}return s.prototype.pr=function(t){this.Vr.push(t)},s.prototype.br=function(){this.Vr.forEach(function(t){return t()})},s}(),oo=function(){function s(t,r,a){this.vr=t,this.Sr=r,this.Dr=a}return s.prototype.Cr=function(t,r){var a=this;return this.Sr.Nr(t,r).next(function(l){return a.Fr(t,r,l)})},s.prototype.Fr=function(t,r,a){return this.vr.Rr(t,r).next(function(l){for(var d=0,m=a;d<m.length;d++)l=m[d].hr(r,l);return l})},s.prototype.$r=function(t,r,a){var l=It();return r.forEach(function(d,m){for(var v=0,w=a;v<w.length;v++)m=w[v].hr(d,m);l=l.ot(d,m)}),l},s.prototype.kr=function(t,r){var a=this;return this.vr.getEntries(t,r).next(function(l){return a.Mr(t,l)})},s.prototype.Mr=function(t,r){var a=this;return this.Sr.Or(t,r).next(function(l){var d=a.$r(t,r,l),m=xt();return d.forEach(function(v,w){w||(w=new le(v,Mt.min())),m=m.ot(v,w)}),m})},s.prototype.Lr=function(t,r,a){return Y.F((l=r).path)&&null===l.collectionGroup&&0===l.filters.length?this.Br(t,r.path):_s(r)?this.qr(t,r,a):this.Ur(t,r,a);var l},s.prototype.Br=function(t,r){return this.Cr(t,new Y(r)).next(function(a){var l=Yt();return a instanceof Ft&&(l=l.ot(a.key,a)),l})},s.prototype.qr=function(t,r,a){var l=this,d=r.collectionGroup,m=Yt();return this.Dr.Qr(t,d).next(function(v){return Z.forEach(v,function(w){var C,P,E=(C=r,P=w.child(d),new Bn(P,null,C.on.slice(),C.filters.slice(),C.limit,C.an,C.startAt,C.endAt));return l.Ur(t,E,a).next(function(C){C.forEach(function(P,O){m=m.ot(P,O)})})}).next(function(){return m})})},s.prototype.Ur=function(t,r,a){var l,d,m=this;return this.vr.Lr(t,r,a).next(function(v){return l=v,m.Sr.Wr(t,r)}).next(function(v){return m.jr(t,d=v,l).next(function(w){l=w;for(var E=0,C=d;E<C.length;E++)for(var P=C[E],O=0,R=P.mutations;O<R.length;O++){var B=R[O],q=B.key,ct=l.get(q),ut=rr(B,ct,ct,P.ar);l=ut instanceof Ft?l.ot(q,ut):l.remove(q)}})}).next(function(){return l.forEach(function(v,w){Hr(r,w)||(l=l.remove(v))}),l})},s.prototype.jr=function(t,r,a){for(var l=Kt(),d=0,m=r;d<m.length;d++)for(var v=0,w=m[d].mutations;v<w.length;v++){var E=w[v];E instanceof fn&&null===a.get(E.key)&&(l=l.add(E.key))}var C=a;return this.vr.getEntries(t,l).next(function(P){return P.forEach(function(O,R){null!==R&&R instanceof Ft&&(C=C.ot(O,R))}),C})},s}(),Mo=function(){function s(t,r,a,l){this.targetId=t,this.fromCache=r,this.Kr=a,this.Gr=l}return s.zr=function(t,r){for(var a=Kt(),l=Kt(),d=0,m=r.docChanges;d<m.length;d++){var v=m[d];switch(v.type){case 0:a=a.add(v.doc.key);break;case 1:l=l.add(v.doc.key)}}return new s(t,r.fromCache,a,l)},s}();function du(s,t){var a=s[1],d=t[1],m=wt(s[0],t[0]);return 0===m?wt(a,d):m}var xc=function(){function s(t){this.Hr=t,this.buffer=new de(du),this.Yr=0}return s.prototype.Jr=function(){return++this.Yr},s.prototype.Xr=function(t){var r=[t,this.Jr()];if(this.buffer.size<this.Hr)this.buffer=this.buffer.add(r);else{var a=this.buffer.last();du(r,a)<0&&(this.buffer=this.buffer.delete(a).add(r))}},Object.defineProperty(s.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),s}(),dr={Zr:!1,eo:0,no:0,so:0},xe=function(){function s(t,r,a){this.io=t,this.ro=r,this.oo=a}return s.ao=function(t){return new s(t,s.co,s.uo)},s}();xe.ho=-1,xe.lo=1048576,xe._o=41943040,xe.co=10,xe.uo=1e3,xe.fo=new xe(xe._o,xe.co,xe.uo),xe.do=new xe(xe.ho,0,0);var Ic=function(){function s(t,r){this.wo=t,this.cs=r,this.mo=!1,this.To=null}return s.prototype.start=function(t){this.wo.params.io!==xe.ho&&this.Eo(t)},s.prototype.stop=function(){this.To&&(this.To.cancel(),this.To=null)},Object.defineProperty(s.prototype,"Ei",{get:function(){return null!==this.To},enumerable:!1,configurable:!0}),s.prototype.Eo=function(t){var r=this,a=this.mo?3e5:6e4;rt("LruGarbageCollector","Garbage collection scheduled in "+a+"ms"),this.To=this.cs.yn("lru_garbage_collection",a,function(){return D.__awaiter(r,void 0,void 0,function(){var l;return D.__generator(this,function(d){switch(d.label){case 0:this.To=null,this.mo=!0,d.label=1;case 1:return d.trys.push([1,3,,7]),[4,t.Io(this.wo)];case 2:return d.sent(),[3,7];case 3:return Xt(l=d.sent())?(rt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",l),[3,6]):[3,4];case 4:return[4,mr(l)];case 5:d.sent(),d.label=6;case 6:return[3,7];case 7:return[4,this.Eo(t)];case 8:return d.sent(),[2]}})})})},s}(),$r=function(){function s(t,r){this.Ao=t,this.params=r}return s.prototype.Ro=function(t,r){return this.Ao.Po(t).next(function(a){return Math.floor(r/100*a)})},s.prototype.yo=function(t,r){var a=this;if(0===r)return Z.resolve(Ne.ai);var l=new xc(r);return this.Ao.Ce(t,function(d){return l.Xr(d.sequenceNumber)}).next(function(){return a.Ao.Vo(t,function(d){return l.Xr(d)})}).next(function(){return l.maxValue})},s.prototype.po=function(t,r,a){return this.Ao.po(t,r,a)},s.prototype.bo=function(t,r){return this.Ao.bo(t,r)},s.prototype.vo=function(t,r){var a=this;return this.params.io===xe.ho?(rt("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(dr)):this.So(t).next(function(l){return l<a.params.io?(rt("LruGarbageCollector","Garbage collection skipped; Cache size "+l+" is lower than threshold "+a.params.io),dr):a.Do(t,r)})},s.prototype.So=function(t){return this.Ao.So(t)},s.prototype.Do=function(t,r){var a,l,d,m,v,w,E,C=this,P=Date.now();return this.Ro(t,this.params.ro).next(function(O){return O>C.params.oo?(rt("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+C.params.oo+" from "+O),l=C.params.oo):l=O,m=Date.now(),C.yo(t,l)}).next(function(O){return a=O,v=Date.now(),C.po(t,a,r)}).next(function(O){return d=O,w=Date.now(),C.bo(t,a)}).next(function(O){return E=Date.now(),Dn()<=Lt.LogLevel.DEBUG&&rt("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(m-P)+"ms\n\tDetermined least recently used "+l+" in "+(v-m)+"ms\n\tRemoved "+d+" targets in "+(w-v)+"ms\n\tRemoved "+O+" documents in "+(E-w)+"ms\nTotal Duration: "+(E-P)+"ms"),Z.resolve({Zr:!0,eo:l,no:d,so:O})})},s}();function Gn(s){for(var t="",r=0;r<s.length;r++)t.length>0&&(t=pu(t)),t=xa(s.get(r),t);return pu(t)}function xa(s,t){for(var r=t,a=s.length,l=0;l<a;l++){var d=s.charAt(l);switch(d){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=d}}return r}function pu(s){return s+"\x01\x01"}function li(s){var t=s.length;if(nt(t>=2),2===t)return nt("\x01"===s.charAt(0)&&"\x01"===s.charAt(1)),W.P();for(var r=t-2,a=[],l="",d=0;d<t;){var m=s.indexOf("\x01",d);switch((m<0||m>r)&&at(),s.charAt(m+1)){case"\x01":var v=s.substring(d,m),w=void 0;0===l.length?w=v:(w=l+=v,l=""),a.push(w);break;case"\x10":l+=s.substring(d,m),l+="\0";break;case"\x11":l+=s.substring(d,m+1);break;default:at()}d=m+2}return new W(a)}var Ec=function(s){this.Co=s};function ko(s,t){if(t.document)return w=!!t.hasCommittedMutations,E=Ye(s.Co,(v=t.document).name),C=Ce(v.updateTime),P=new Ve({mapValue:{fields:v.fields}}),new Ft(E,C,P,{hasCommittedMutations:!!w});var v,w,E,C,P;if(t.noDocument){var r=Y.$(t.noDocument.path),a=Do(t.noDocument.readTime);return new le(r,a,{hasCommittedMutations:!!t.hasCommittedMutations})}if(t.unknownDocument){var l=Y.$(t.unknownDocument.path),d=Do(t.unknownDocument.version);return new Un(l,d)}return at()}function pr(s,t,r){var O,R,a=Ia(r),l=t.key.path.h().A();if(t instanceof Ft){var d={name:Oe(O=s.Co,(R=t).key),fields:R.rn().mapValue.fields,updateTime:xi(O,R.version.Z())};return new he(null,null,d,t.hasCommittedMutations,a,l)}if(t instanceof le){var v=t.key.path.A(),w=ao(t.version),E=t.hasCommittedMutations;return new he(null,new Cc(v,w),null,E,a,l)}if(t instanceof Un){var C=t.key.path.A(),P=ao(t.version);return new he(new Mc(C,P),null,null,!0,a,l)}return at()}function Ia(s){var t=s.Z();return[t.seconds,t.nanoseconds]}function gu(s){var t=new Qt(s[0],s[1]);return Mt.J(t)}function ao(s){var t=s.Z();return new Ac(t.seconds,t.nanoseconds)}function Do(s){var t=new Qt(s.seconds,s.nanoseconds);return Mt.J(t)}function hi(s,t){var r=(t.baseMutations||[]).map(function(d){return Lr(s.Co,d)}),a=t.mutations.map(function(d){return Lr(s.Co,d)}),l=Qt.fromMillis(t.localWriteTimeMs);return new Es(t.batchId,l,r,a)}function uo(s){var t,r,a=Do(s.readTime),l=void 0!==s.lastLimboFreeSnapshotVersion?Do(s.lastLimboFreeSnapshotVersion):Mt.min();return void 0!==s.query.documents?(nt(1===(r=s.query).documents.length),t=Me(Ti(Qi(r.documents[0])))):t=Ii(s.query),new Cr(t,s.targetId,0,s.lastListenSequenceNumber,a,l,ye.fromBase64String(s.resumeToken))}function mu(s,t){var r,a=ao(t.nt),l=ao(t.lastLimboFreeSnapshotVersion);r=Gi(t.target)?fa(s.Co,t.target):Nr(s.Co,t.target);var d=t.resumeToken.toBase64();return new en(t.targetId,vi(t.target),a,d,t.sequenceNumber,l,r)}var Ss=function(){function s(t,r,a,l){this.userId=t,this.serializer=r,this.Dr=a,this.No=l,this.Fo={}}return s.xo=function(t,r,a,l){return nt(""!==t.uid),new s(t.Zs()?t.uid:"",r,a,l)},s.prototype.$o=function(t){var r=!0,a=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Pi(t).rs({index:ee.userMutationsIndex,range:a},function(l,d,m){r=!1,m.done()}).next(function(){return r})},s.prototype.ko=function(t,r,a,l){var d=this,m=Kr(t),v=Pi(t);return v.add({}).next(function(w){nt("number"==typeof w);for(var E=new Es(w,r,a,l),C=function(ut,gt,bt){var Dt=bt.baseMutations.map(function(Jt){return Sn(ut.Co,Jt)}),qt=bt.mutations.map(function(Jt){return Sn(ut.Co,Jt)});return new ee(gt,bt.batchId,bt.ar.toMillis(),Dt,qt)}(d.serializer,d.userId,E),P=[],O=new de(function(ut,gt){return wt(ut.R(),gt.R())}),R=0,B=l;R<B.length;R++){var q=B[R],ct=ze.key(d.userId,q.key.path,w);O=O.add(q.key.path.h()),P.push(v.put(C)),P.push(m.put(ct,ze.PLACEHOLDER))}return O.forEach(function(ut){P.push(d.Dr.Mo(t,ut))}),t.pr(function(){d.Fo[w]=E.keys()}),Z.$n(P).next(function(){return E})})},s.prototype.Oo=function(t,r){var a=this;return Pi(t).get(r).next(function(l){return l?(nt(l.userId===a.userId),hi(a.serializer,l)):null})},s.prototype.Lo=function(t,r){var a=this;return this.Fo[r]?Z.resolve(this.Fo[r]):this.Oo(t,r).next(function(l){if(l){var d=l.keys();return a.Fo[r]=d,d}return null})},s.prototype.Bo=function(t,r){var a=this,l=r+1,d=IDBKeyRange.lowerBound([this.userId,l]),m=null;return Pi(t).rs({index:ee.userMutationsIndex,range:d},function(v,w,E){w.userId===a.userId&&(nt(w.batchId>=l),m=hi(a.serializer,w)),E.done()}).next(function(){return m})},s.prototype.qo=function(t){var r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),a=-1;return Pi(t).rs({index:ee.userMutationsIndex,range:r,reverse:!0},function(l,d,m){a=d.batchId,m.done()}).next(function(){return a})},s.prototype.Uo=function(t){var r=this,a=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Pi(t).ts(ee.userMutationsIndex,a).next(function(l){return l.map(function(d){return hi(r.serializer,d)})})},s.prototype.Nr=function(t,r){var a=this,l=ze.prefixForPath(this.userId,r.path),d=IDBKeyRange.lowerBound(l),m=[];return Kr(t).rs({range:d},function(v,w,E){var C=v[0],O=v[2],R=li(v[1]);if(C===a.userId&&r.path.isEqual(R))return Pi(t).get(O).next(function(B){if(!B)throw at();nt(B.userId===a.userId),m.push(hi(a.serializer,B))});E.done()}).next(function(){return m})},s.prototype.Or=function(t,r){var a=this,l=new de(wt),d=[];return r.forEach(function(m){var v=ze.prefixForPath(a.userId,m.path),w=IDBKeyRange.lowerBound(v),E=Kr(t).rs({range:w},function(C,P,O){var R=C[0],q=C[2],ct=li(C[1]);R===a.userId&&m.path.isEqual(ct)?l=l.add(q):O.done()});d.push(E)}),Z.$n(d).next(function(){return a.Qo(t,l)})},s.prototype.Wr=function(t,r){var a=this,l=r.path,d=l.length+1,m=ze.prefixForPath(this.userId,l),v=IDBKeyRange.lowerBound(m),w=new de(wt);return Kr(t).rs({range:v},function(E,C,P){var O=E[0],B=E[2],q=li(E[1]);O===a.userId&&l.T(q)?q.length===d&&(w=w.add(B)):P.done()}).next(function(){return a.Qo(t,w)})},s.prototype.Qo=function(t,r){var a=this,l=[],d=[];return r.forEach(function(m){d.push(Pi(t).get(m).next(function(v){if(null===v)throw at();nt(v.userId===a.userId),l.push(hi(a.serializer,v))}))}),Z.$n(d).next(function(){return l})},s.prototype.Wo=function(t,r){var a=this;return Sa(t.jo,this.userId,r).next(function(l){return t.pr(function(){a.Ko(r.batchId)}),Z.forEach(l,function(d){return a.No.Go(t,d)})})},s.prototype.Ko=function(t){delete this.Fo[t]},s.prototype.zo=function(t){var r=this;return this.$o(t).next(function(a){if(!a)return Z.resolve();var l=IDBKeyRange.lowerBound(ze.prefixForUser(r.userId)),d=[];return Kr(t).rs({range:l},function(m,v,w){if(m[0]===r.userId){var E=li(m[1]);d.push(E)}else w.done()}).next(function(){nt(0===d.length)})})},s.prototype.Ho=function(t,r){return Ea(t,this.userId,r)},s.prototype.Yo=function(t){var r=this;return yu(t).get(this.userId).next(function(a){return a||new Oi(r.userId,-1,"")})},s}();function Ea(s,t,r){var a=ze.prefixForPath(t,r.path),l=a[1],d=IDBKeyRange.lowerBound(a),m=!1;return Kr(s).rs({range:d,ss:!0},function(v,w,E){v[0]===t&&v[1]===l&&(m=!0),E.done()}).next(function(){return m})}function Sa(s,t,r){var a=s.store(ee.store),l=s.store(ze.store),d=[],m=IDBKeyRange.only(r.batchId),v=0,w=a.rs({range:m},function(B,q,ct){return v++,ct.delete()});d.push(w.next(function(){nt(1===v)}));for(var E=[],C=0,P=r.mutations;C<P.length;C++){var O=P[C],R=ze.key(t,O.key.path,r.batchId);d.push(l.delete(R)),E.push(O.key)}return Z.$n(d).next(function(){return E})}function Pi(s){return An.Qn(s,ee.store)}function Kr(s){return An.Qn(s,ze.store)}function yu(s){return An.Qn(s,Oi.store)}var vu=function(){function s(t,r){this.serializer=t,this.Dr=r}return s.prototype.Er=function(t,r,a){return gr(t).put(Po(r),a)},s.prototype.Ar=function(t,r){var a=gr(t),l=Po(r);return a.delete(l)},s.prototype.updateMetadata=function(t,r){var a=this;return this.getMetadata(t).next(function(l){return l.byteSize+=r,a.Jo(t,l)})},s.prototype.Rr=function(t,r){var a=this;return gr(t).get(Po(r)).next(function(l){return a.Xo(l)})},s.prototype.Zo=function(t,r){var a=this;return gr(t).get(Po(r)).next(function(l){var d=a.Xo(l);return d?{ta:d,size:co(l)}:null})},s.prototype.getEntries=function(t,r){var a=this,l=It();return this.ea(t,r,function(d,m){var v=a.Xo(m);l=l.ot(d,v)}).next(function(){return l})},s.prototype.na=function(t,r){var a=this,l=It(),d=new ve(Y.i);return this.ea(t,r,function(m,v){var w=a.Xo(v);w?(l=l.ot(m,w),d=d.ot(m,co(v))):(l=l.ot(m,null),d=d.ot(m,0))}).next(function(){return{sa:l,ia:d}})},s.prototype.ea=function(t,r,a){if(r.m())return Z.resolve();var l=IDBKeyRange.bound(r.first().path.A(),r.last().path.A()),d=r._t(),m=d.It();return gr(t).rs({range:l},function(v,w,E){for(var C=Y.$(v);m&&Y.i(m,C)<0;)a(m,null),m=d.It();m&&m.isEqual(C)&&(a(m,w),m=d.At()?d.It():null),m?E.Xn(m.path.A()):E.done()}).next(function(){for(;m;)a(m,null),m=d.At()?d.It():null})},s.prototype.Lr=function(t,r,a){var l=this,d=Yt(),m=r.path.length+1,v={};if(a.isEqual(Mt.min())){var w=r.path.A();v.range=IDBKeyRange.lowerBound(w)}else{var E=r.path.A(),C=Ia(a);v.range=IDBKeyRange.lowerBound([E,C],!0),v.index=he.collectionReadTimeIndex}return gr(t).rs(v,function(P,O,R){if(P.length===m){var B=ko(l.serializer,O);r.path.T(B.key.path)?B instanceof Ft&&Hr(r,B)&&(d=d.ot(B.key,B)):R.done()}}).next(function(){return d})},s.prototype.ra=function(t){return new bu(this,!!t&&t.oa)},s.prototype.aa=function(t){return this.getMetadata(t).next(function(r){return r.byteSize})},s.prototype.getMetadata=function(t){return _u(t).get(Yn.key).next(function(r){return nt(!!r),r})},s.prototype.Jo=function(t,r){return _u(t).put(Yn.key,r)},s.prototype.Xo=function(t){if(t){var r=ko(this.serializer,t);return r instanceof le&&r.version.isEqual(Mt.min())?null:r}return null},s}(),bu=function(s){function t(r,a){var l=this;return(l=s.call(this)||this).ca=r,l.oa=a,l.ua=new te(function(d){return d.toString()},function(d,m){return d.isEqual(m)}),l}return D.__extends(t,s),t.prototype.yr=function(r){var a=this,l=[],d=0,m=new de(function(v,w){return wt(v.R(),w.R())});return this.wr.forEach(function(v,w){var E=a.ua.get(v);if(w){var C=pr(a.ca.serializer,w,a.readTime);m=m.add(v.path.h());var P=co(C);d+=P-E,l.push(a.ca.Er(r,v,C))}else if(d-=E,a.oa){var O=pr(a.ca.serializer,new le(v,Mt.min()),a.readTime);l.push(a.ca.Er(r,v,O))}else l.push(a.ca.Ar(r,v))}),m.forEach(function(v){l.push(a.ca.Dr.Mo(r,v))}),l.push(this.ca.updateMetadata(r,d)),Z.$n(l)},t.prototype.gr=function(r,a){var l=this;return this.ca.Zo(r,a).next(function(d){return null===d?(l.ua.set(a,0),null):(l.ua.set(a,d.size),d.ta)})},t.prototype.Pr=function(r,a){var l=this;return this.ca.na(r,a).next(function(d){var m=d.sa;return d.ia.forEach(function(v,w){l.ua.set(v,w)}),m})},t}(fu);function _u(s){return An.Qn(s,Yn.store)}function gr(s){return An.Qn(s,he.store)}function Po(s){return s.path.A()}function co(s){var t;if(s.document)t=s.document;else if(s.unknownDocument)t=s.unknownDocument;else{if(!s.noDocument)throw at();t=s.noDocument}return JSON.stringify(t).length}var Sc=function(){function s(){this.ha=new Oo}return s.prototype.Mo=function(t,r){return this.ha.add(r),Z.resolve()},s.prototype.Qr=function(t,r){return Z.resolve(this.ha.getEntries(r))},s}(),Oo=function(){function s(){this.index={}}return s.prototype.add=function(t){var r=t._(),a=t.h(),l=this.index[r]||new de(W.i),d=!l.has(a);return this.index[r]=l.add(a),d},s.prototype.has=function(t){var r=t._(),a=t.h(),l=this.index[r];return l&&l.has(a)},s.prototype.getEntries=function(t){return(this.index[t]||new de(W.i)).A()},s}(),Tc=function(){function s(t){this.serializer=t}return s.prototype.createOrUpgrade=function(t,r,a,l){var d=this;nt(a<l&&a>=0&&l<=10);var w,m=new ki("createOrUpgrade",r);a<1&&l>=1&&(t.createObjectStore(ge.store),(w=t).createObjectStore(Oi.store,{keyPath:Oi.keyPath}),w.createObjectStore(ee.store,{keyPath:ee.keyPath,autoIncrement:!0}).createIndex(ee.userMutationsIndex,ee.userMutationsKeyPath,{unique:!0}),w.createObjectStore(ze.store),wu(t),function(w){w.createObjectStore(he.store)}(t));var v=Z.resolve();return a<3&&l>=3&&(0!==a&&(function(w){w.deleteObjectStore(Re.store),w.deleteObjectStore(en.store),w.deleteObjectStore(nn.store)}(t),wu(t)),v=v.next(function(){return function(w){var E=w.store(nn.store),C=new nn(0,0,Mt.min().Z(),0);return E.put(nn.key,C)}(m)})),a<4&&l>=4&&(0!==a&&(v=v.next(function(){return function(w,E){return E.store(ee.store).ts().next(function(C){w.deleteObjectStore(ee.store),w.createObjectStore(ee.store,{keyPath:ee.keyPath,autoIncrement:!0}).createIndex(ee.userMutationsIndex,ee.userMutationsKeyPath,{unique:!0});var P=E.store(ee.store),O=C.map(function(R){return P.put(R)});return Z.$n(O)})}(t,m)})),v=v.next(function(){!function(w){w.createObjectStore(fi.store,{keyPath:fi.keyPath})}(t)})),a<5&&l>=5&&(v=v.next(function(){return d.removeAcknowledgedMutations(m)})),a<6&&l>=6&&(v=v.next(function(){return function(w){w.createObjectStore(Yn.store)}(t),d.addDocumentGlobal(m)})),a<7&&l>=7&&(v=v.next(function(){return d.ensureSequenceNumbers(m)})),a<8&&l>=8&&(v=v.next(function(){return d.createCollectionParentIndex(t,m)})),a<9&&l>=9&&(v=v.next(function(){(function(w){w.objectStoreNames.contains("remoteDocumentChanges")&&w.deleteObjectStore("remoteDocumentChanges")})(t),function(w){var E=w.objectStore(he.store);E.createIndex(he.readTimeIndex,he.readTimeIndexPath,{unique:!1}),E.createIndex(he.collectionReadTimeIndex,he.collectionReadTimeIndexPath,{unique:!1})}(r)})),a<10&&l>=10&&(v=v.next(function(){return d.rewriteCanonicalIds(m)})),v},s.prototype.addDocumentGlobal=function(t){var r=0;return t.store(he.store).rs(function(a,l){r+=co(l)}).next(function(){var a=new Yn(r);return t.store(Yn.store).put(Yn.key,a)})},s.prototype.removeAcknowledgedMutations=function(t){var r=this,a=t.store(Oi.store),l=t.store(ee.store);return a.ts().next(function(d){return Z.forEach(d,function(m){var v=IDBKeyRange.bound([m.userId,-1],[m.userId,m.lastAcknowledgedBatchId]);return l.ts(ee.userMutationsIndex,v).next(function(w){return Z.forEach(w,function(E){nt(E.userId===m.userId);var C=hi(r.serializer,E);return Sa(t,m.userId,C).next(function(){})})})})})},s.prototype.ensureSequenceNumbers=function(t){var r=t.store(Re.store),a=t.store(he.store);return t.store(nn.store).get(nn.key).next(function(l){var d=[];return a.rs(function(m,v){var w=new W(m),E=[0,Gn(w)];d.push(r.get(E).next(function(C){return C?Z.resolve():r.put(new Re(0,Gn(w),l.highestListenSequenceNumber))}))}).next(function(){return Z.$n(d)})})},s.prototype.createCollectionParentIndex=function(t,r){t.createObjectStore(Xr.store,{keyPath:Xr.keyPath});var a=r.store(Xr.store),l=new Oo,d=function(m){if(l.add(m)){var v=m._(),w=m.h();return a.put({collectionId:v,parent:Gn(w)})}};return r.store(he.store).rs({ss:!0},function(m,v){var w=new W(m);return d(w.h())}).next(function(){return r.store(ze.store).rs({ss:!0},function(m,v){var E=li(m[1]);return d(E.h())})})},s.prototype.rewriteCanonicalIds=function(t){var r=this,a=t.store(en.store);return a.rs(function(l,d){var m=uo(d),v=mu(r.serializer,m);return a.put(v)})},s}(),Ac=function(s,t){this.seconds=s,this.nanoseconds=t},ge=function(s,t,r){this.ownerId=s,this.allowTabSynchronization=t,this.leaseTimestampMs=r};ge.store="owner",ge.key="owner";var Oi=function(s,t,r){this.userId=s,this.lastAcknowledgedBatchId=t,this.lastStreamToken=r};Oi.store="mutationQueues",Oi.keyPath="userId";var ee=function(s,t,r,a,l){this.userId=s,this.batchId=t,this.localWriteTimeMs=r,this.baseMutations=a,this.mutations=l};ee.store="mutations",ee.keyPath="batchId",ee.userMutationsIndex="userMutationsIndex",ee.userMutationsKeyPath=["userId","batchId"];var ze=function(){function s(){}return s.prefixForUser=function(t){return[t]},s.prefixForPath=function(t,r){return[t,Gn(r)]},s.key=function(t,r,a){return[t,Gn(r),a]},s}();ze.store="documentMutations",ze.PLACEHOLDER=new ze;var Cc=function(s,t){this.path=s,this.readTime=t},Mc=function(s,t){this.path=s,this.version=t},he=function(s,t,r,a,l,d){this.unknownDocument=s,this.noDocument=t,this.document=r,this.hasCommittedMutations=a,this.readTime=l,this.parentPath=d};he.store="remoteDocuments",he.readTimeIndex="readTimeIndex",he.readTimeIndexPath="readTime",he.collectionReadTimeIndex="collectionReadTimeIndex",he.collectionReadTimeIndexPath=["parentPath","readTime"];var Yn=function(s){this.byteSize=s};Yn.store="remoteDocumentGlobal",Yn.key="remoteDocumentGlobalKey";var en=function(s,t,r,a,l,d,m){this.targetId=s,this.canonicalId=t,this.readTime=r,this.resumeToken=a,this.lastListenSequenceNumber=l,this.lastLimboFreeSnapshotVersion=d,this.query=m};en.store="targets",en.keyPath="targetId",en.queryTargetsIndexName="queryTargetsIndex",en.queryTargetsKeyPath=["canonicalId","targetId"];var Re=function(s,t,r){this.targetId=s,this.path=t,this.sequenceNumber=r};Re.store="targetDocuments",Re.keyPath=["targetId","path"],Re.documentTargetsIndex="documentTargetsIndex",Re.documentTargetsKeyPath=["path","targetId"];var nn=function(s,t,r,a){this.highestTargetId=s,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=r,this.targetCount=a};nn.key="targetGlobalKey",nn.store="targetGlobal";var Xr=function(s,t){this.collectionId=s,this.parent=t};function wu(s){s.createObjectStore(Re.store,{keyPath:Re.keyPath}).createIndex(Re.documentTargetsIndex,Re.documentTargetsKeyPath,{unique:!0}),s.createObjectStore(en.store,{keyPath:en.keyPath}).createIndex(en.queryTargetsIndexName,en.queryTargetsKeyPath,{unique:!0}),s.createObjectStore(nn.store)}Xr.store="collectionParents",Xr.keyPath=["collectionId","parent"];var fi=function(s,t,r,a){this.clientId=s,this.updateTimeMs=t,this.networkEnabled=r,this.inForeground=a};fi.store="clientMetadata",fi.keyPath="clientId";var xu=D.__spreadArrays(D.__spreadArrays(D.__spreadArrays([Oi.store,ee.store,ze.store,he.store,en.store,ge.store,nn.store,Re.store],[fi.store]),[Yn.store]),[Xr.store]),kc=function(){function s(){this.la=new Oo}return s.prototype.Mo=function(t,r){var a=this;if(!this.la.has(r)){var l=r._(),d=r.h();t.pr(function(){a.la.add(r)});var m={collectionId:l,parent:Gn(d)};return Ta(t).put(m)}return Z.resolve()},s.prototype.Qr=function(t,r){var a=[],l=IDBKeyRange.bound([r,""],[Hs(r),""],!1,!0);return Ta(t).ts(l).next(function(d){for(var m=0,v=d;m<v.length;m++){var w=v[m];if(w.collectionId!==r)break;a.push(li(w.parent))}return a})},s}();function Ta(s){return An.Qn(s,Xr.store)}var Lo=function(){function s(t){this._a=t}return s.prototype.next=function(){return this._a+=2,this._a},s.fa=function(){return new s(0)},s.da=function(){return new s(-1)},s}(),Dc=function(){function s(t,r){this.No=t,this.serializer=r}return s.prototype.wa=function(t){var r=this;return this.ma(t).next(function(a){var l=new Lo(a.highestTargetId);return a.highestTargetId=l.next(),r.Ta(t,a).next(function(){return a.highestTargetId})})},s.prototype.Ea=function(t){return this.ma(t).next(function(r){return Mt.J(new Qt(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds))})},s.prototype.Ia=function(t){return this.ma(t).next(function(r){return r.highestListenSequenceNumber})},s.prototype.Aa=function(t,r,a){var l=this;return this.ma(t).next(function(d){return d.highestListenSequenceNumber=r,a&&(d.lastRemoteSnapshotVersion=a.Z()),r>d.highestListenSequenceNumber&&(d.highestListenSequenceNumber=r),l.Ta(t,d)})},s.prototype.Ra=function(t,r){var a=this;return this.ga(t,r).next(function(){return a.ma(t).next(function(l){return l.targetCount+=1,a.Pa(r,l),a.Ta(t,l)})})},s.prototype.ya=function(t,r){return this.ga(t,r)},s.prototype.Va=function(t,r){var a=this;return this.pa(t,r.targetId).next(function(){return Ts(t).delete(r.targetId)}).next(function(){return a.ma(t)}).next(function(l){return nt(l.targetCount>0),l.targetCount-=1,a.Ta(t,l)})},s.prototype.po=function(t,r,a){var l=this,d=0,m=[];return Ts(t).rs(function(v,w){var E=uo(w);E.sequenceNumber<=r&&null===a.get(E.targetId)&&(d++,m.push(l.Va(t,E)))}).next(function(){return Z.$n(m)}).next(function(){return d})},s.prototype.Ce=function(t,r){return Ts(t).rs(function(a,l){var d=uo(l);r(d)})},s.prototype.ma=function(t){return Aa(t).get(nn.key).next(function(r){return nt(null!==r),r})},s.prototype.Ta=function(t,r){return Aa(t).put(nn.key,r)},s.prototype.ga=function(t,r){return Ts(t).put(mu(this.serializer,r))},s.prototype.Pa=function(t,r){var a=!1;return t.targetId>r.highestTargetId&&(r.highestTargetId=t.targetId,a=!0),t.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t.sequenceNumber,a=!0),a},s.prototype.ba=function(t){return this.ma(t).next(function(r){return r.targetCount})},s.prototype.va=function(t,r){var a=vi(r),l=IDBKeyRange.bound([a,Number.NEGATIVE_INFINITY],[a,Number.POSITIVE_INFINITY]),d=null;return Ts(t).rs({range:l,index:en.queryTargetsIndexName},function(m,v,w){var E=uo(v);qi(r,E.target)&&(d=E,w.done())}).next(function(){return d})},s.prototype.Sa=function(t,r,a){var l=this,d=[],m=Li(t);return r.forEach(function(v){var w=Gn(v.path);d.push(m.put(new Re(a,w))),d.push(l.No.Da(t,a,v))}),Z.$n(d)},s.prototype.Ca=function(t,r,a){var l=this,d=Li(t);return Z.forEach(r,function(m){var v=Gn(m.path);return Z.$n([d.delete([a,v]),l.No.Na(t,a,m)])})},s.prototype.pa=function(t,r){var a=Li(t),l=IDBKeyRange.bound([r],[r+1],!1,!0);return a.delete(l)},s.prototype.Fa=function(t,r){var a=IDBKeyRange.bound([r],[r+1],!1,!0),l=Li(t),d=Kt();return l.rs({range:a,ss:!0},function(m,v,w){var E=li(m[1]),C=new Y(E);d=d.add(C)}).next(function(){return d})},s.prototype.Ho=function(t,r){var a=Gn(r.path),l=IDBKeyRange.bound([a],[Hs(a)],!1,!0),d=0;return Li(t).rs({index:Re.documentTargetsIndex,ss:!0,range:l},function(m,v,w){0!==m[0]&&(d++,w.done())}).next(function(){return d>0})},s.prototype.Ue=function(t,r){return Ts(t).get(r).next(function(a){return a?uo(a):null})},s}();function Ts(s){return An.Qn(s,en.store)}function Aa(s){return An.Qn(s,nn.store)}function Li(s){return An.Qn(s,Re.store)}var lo="Failed to obtain exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ca=function(s){function t(r,a){var l=this;return(l=s.call(this)||this).jo=r,l.xa=a,l}return D.__extends(t,s),t}(Co),An=function(){function s(t,r,a,l,d,m,v,w,E,C){if(this.allowTabSynchronization=t,this.persistenceKey=r,this.clientId=a,this.fn=d,this.window=m,this.document=v,this.$a=E,this.ka=C,this.Ma=null,this.Oa=!1,this.isPrimary=!1,this.networkEnabled=!0,this.La=null,this.inForeground=!1,this.Ba=null,this.qa=null,this.Ua=Number.NEGATIVE_INFINITY,this.Qa=function(P){return Promise.resolve()},!s.Ln())throw new G(j.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.No=new Iu(this,l),this.Wa=r+"main",this.serializer=new Ec(w),this.ja=new ui(this.Wa,10,new Tc(this.serializer)),this.Ka=new Dc(this.No,this.serializer),this.Dr=new kc,this.vr=new vu(this.serializer,this.Dr),this.window&&this.window.localStorage?this.Ga=this.window.localStorage:(this.Ga=null,!1===C&&Gt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return s.Qn=function(t,r){if(t instanceof Ca)return ui.Qn(t.jo,r);throw at()},s.prototype.start=function(){var t=this;return this.za().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new G(j.FAILED_PRECONDITION,lo);return t.Ha(),t.Ya(),t.Ja(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(r){return t.Ka.Ia(r)})}).then(function(r){t.Ma=new Ne(r,t.$a)}).then(function(){t.Oa=!0}).catch(function(r){return t.ja&&t.ja.close(),Promise.reject(r)})},s.prototype.Xa=function(t){var r=this;return this.Qa=function(a){return D.__awaiter(r,void 0,void 0,function(){return D.__generator(this,function(l){return this.Ei?[2,t(a)]:[2]})})},t(this.isPrimary)},s.prototype.Za=function(t){var r=this;this.ja.Kn(function(a){return D.__awaiter(r,void 0,void 0,function(){return D.__generator(this,function(l){switch(l.label){case 0:return null===a.newVersion?[4,t()]:[3,2];case 1:l.sent(),l.label=2;case 2:return[2]}})})})},s.prototype.tc=function(t){var r=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.fn.ws(function(){return D.__awaiter(r,void 0,void 0,function(){return D.__generator(this,function(a){switch(a.label){case 0:return this.Ei?[4,this.za()]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})}))},s.prototype.za=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(r){return As(r).put(new fi(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.ec(r).next(function(a){a||(t.isPrimary=!1,t.fn.Cs(function(){return t.Qa(!1)}))})}).next(function(){return t.nc(r)}).next(function(a){return t.isPrimary&&!a?t.sc(r).next(function(){return!1}):!!a&&t.ic(r).next(function(){return!0})})}).catch(function(r){if(Xt(r))return rt("IndexedDbPersistence","Failed to extend owner lease: ",r),t.isPrimary;if(!t.allowTabSynchronization)throw r;return rt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",r),!1}).then(function(r){t.isPrimary!==r&&t.fn.Cs(function(){return t.Qa(r)}),t.isPrimary=r})},s.prototype.ec=function(t){var r=this;return Ni(t).get(ge.key).next(function(a){return Z.resolve(r.rc(a))})},s.prototype.oc=function(t){return As(t).delete(this.clientId)},s.prototype.ac=function(){return D.__awaiter(this,void 0,void 0,function(){var t,r,a,d=this;return D.__generator(this,function(m){switch(m.label){case 0:return!this.isPrimary||this.cc(this.Ua,18e5)?[3,2]:(this.Ua=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(v){var w=s.Qn(v,fi.store);return w.ts().next(function(E){var C=d.uc(E,18e5),P=E.filter(function(O){return-1===C.indexOf(O)});return Z.forEach(P,function(O){return w.delete(O.clientId)}).next(function(){return P})})}).catch(function(){return[]})]);case 1:if(t=m.sent(),this.Ga)for(r=0,a=t;r<a.length;r++)this.Ga.removeItem(this.hc(a[r].clientId));m.label=2;case 2:return[2]}})})},s.prototype.Ja=function(){var t=this;this.qa=this.fn.yn("client_metadata_refresh",4e3,function(){return t.za().then(function(){return t.ac()}).then(function(){return t.Ja()})})},s.prototype.rc=function(t){return!!t&&t.ownerId===this.clientId},s.prototype.nc=function(t){var r=this;return this.ka?Z.resolve(!0):Ni(t).get(ge.key).next(function(a){if(null!==a&&r.cc(a.leaseTimestampMs,5e3)&&!r.lc(a.ownerId)){if(r.rc(a)&&r.networkEnabled)return!0;if(!r.rc(a)){if(!a.allowTabSynchronization)throw new G(j.FAILED_PRECONDITION,lo);return!1}}return!(!r.networkEnabled||!r.inForeground)||As(t).ts().next(function(l){return void 0===r.uc(l,5e3).find(function(d){return!(r.clientId===d.clientId||!(!r.networkEnabled&&d.networkEnabled||!r.inForeground&&d.inForeground&&r.networkEnabled===d.networkEnabled))})})}).next(function(a){return r.isPrimary!==a&&rt("IndexedDbPersistence","Client "+(a?"is":"is not")+" eligible for a primary lease."),a})},s.prototype.Di=function(){return D.__awaiter(this,void 0,void 0,function(){var t=this;return D.__generator(this,function(r){switch(r.label){case 0:return this.Oa=!1,this._c(),this.qa&&(this.qa.cancel(),this.qa=null),this.fc(),this.dc(),[4,this.ja.runTransaction("shutdown","readwrite",[ge.store,fi.store],function(a){var l=new Ca(a,Ne.ai);return t.sc(l).next(function(){return t.oc(l)})})];case 1:return r.sent(),this.ja.close(),this.wc(),[2]}})})},s.prototype.uc=function(t,r){var a=this;return t.filter(function(l){return a.cc(l.updateTimeMs,r)&&!a.lc(l.clientId)})},s.prototype.pi=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(r){return As(r).ts().next(function(a){return t.uc(a,18e5).map(function(l){return l.clientId})})})},Object.defineProperty(s.prototype,"Ei",{get:function(){return this.Oa},enumerable:!1,configurable:!0}),s.prototype.mc=function(t){return Ss.xo(t,this.serializer,this.Dr,this.No)},s.prototype.Tc=function(){return this.Ka},s.prototype.Ec=function(){return this.vr},s.prototype.Ic=function(){return this.Dr},s.prototype.runTransaction=function(t,r,a){var d,l=this;return rt("IndexedDbPersistence","Starting transaction:",t),this.ja.runTransaction(t,"readonly"===r?"readonly":"readwrite",xu,function(v){return d=new Ca(v,l.Ma?l.Ma.next():Ne.ai),"readwrite-primary"===r?l.ec(d).next(function(w){return!!w||l.nc(d)}).next(function(w){if(!w)throw Gt("Failed to obtain primary lease for action '"+t+"'."),l.isPrimary=!1,l.fn.Cs(function(){return l.Qa(!1)}),new G(j.FAILED_PRECONDITION,wa);return a(d)}).next(function(w){return l.ic(d).next(function(){return w})}):l.Ac(d).next(function(){return a(d)})}).then(function(v){return d.br(),v})},s.prototype.Ac=function(t){var r=this;return Ni(t).get(ge.key).next(function(a){if(null!==a&&r.cc(a.leaseTimestampMs,5e3)&&!r.lc(a.ownerId)&&!r.rc(a)&&!(r.ka||r.allowTabSynchronization&&a.allowTabSynchronization))throw new G(j.FAILED_PRECONDITION,lo)})},s.prototype.ic=function(t){var r=new ge(this.clientId,this.allowTabSynchronization,Date.now());return Ni(t).put(ge.key,r)},s.Ln=function(){return ui.Ln()},s.prototype.sc=function(t){var r=this,a=Ni(t);return a.get(ge.key).next(function(l){return r.rc(l)?(rt("IndexedDbPersistence","Releasing primary lease."),a.delete(ge.key)):Z.resolve()})},s.prototype.cc=function(t,r){var a=Date.now();return!(t<a-r||t>a&&(Gt("Detected an update time that is in the future: "+t+" > "+a),1))},s.prototype.Ha=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ba=function(){t.fn.ws(function(){return t.inForeground="visible"===t.document.visibilityState,t.za()})},this.document.addEventListener("visibilitychange",this.Ba),this.inForeground="visible"===this.document.visibilityState)},s.prototype.fc=function(){this.Ba&&(this.document.removeEventListener("visibilitychange",this.Ba),this.Ba=null)},s.prototype.Ya=function(){var t,r=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.La=function(){r._c(),r.fn.ws(function(){return r.Di()})},this.window.addEventListener("unload",this.La))},s.prototype.dc=function(){this.La&&(this.window.removeEventListener("unload",this.La),this.La=null)},s.prototype.lc=function(t){var r;try{var a=null!==(null===(r=this.Ga)||void 0===r?void 0:r.getItem(this.hc(t)));return rt("IndexedDbPersistence","Client '"+t+"' "+(a?"is":"is not")+" zombied in LocalStorage"),a}catch(l){return Gt("IndexedDbPersistence","Failed to get zombied client id.",l),!1}},s.prototype._c=function(){if(this.Ga)try{this.Ga.setItem(this.hc(this.clientId),String(Date.now()))}catch(t){Gt("Failed to set zombie client id.",t)}},s.prototype.wc=function(){if(this.Ga)try{this.Ga.removeItem(this.hc(this.clientId))}catch(t){}},s.prototype.hc=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},s}();function Ni(s){return An.Qn(s,ge.store)}function As(s){return An.Qn(s,fi.store)}var Iu=function(){function s(t,r){this.db=t,this.wo=new $r(this,r)}return s.prototype.Po=function(t){var r=this.Rc(t);return this.db.Tc().ba(t).next(function(a){return r.next(function(l){return a+l})})},s.prototype.Rc=function(t){var r=0;return this.Vo(t,function(a){r++}).next(function(){return r})},s.prototype.Ce=function(t,r){return this.db.Tc().Ce(t,r)},s.prototype.Vo=function(t,r){return this.gc(t,function(a,l){return r(l)})},s.prototype.Da=function(t,r,a){return No(t,a)},s.prototype.Na=function(t,r,a){return No(t,a)},s.prototype.po=function(t,r,a){return this.db.Tc().po(t,r,a)},s.prototype.Go=function(t,r){return No(t,r)},s.prototype.Pc=function(t,r){return l=r,d=!1,yu(a=t).os(function(m){return Ea(a,m,l).next(function(v){return v&&(d=!0),Z.resolve(!v)})}).next(function(){return d});var a,l,d},s.prototype.bo=function(t,r){var a=this,l=this.db.Ec().ra(),d=[],m=0;return this.gc(t,function(v,w){if(w<=r){var E=a.Pc(t,v).next(function(C){if(!C)return m++,l.Rr(t,v).next(function(){return l.Ar(v),Li(t).delete([0,Gn(v.path)])})});d.push(E)}}).next(function(){return Z.$n(d)}).next(function(){return l.apply(t)}).next(function(){return m})},s.prototype.removeTarget=function(t,r){var a=r.st(t.xa);return this.db.Tc().ya(t,a)},s.prototype.yc=function(t,r){return No(t,r)},s.prototype.gc=function(t,r){var a,l=Li(t),d=Ne.ai;return l.rs({index:Re.documentTargetsIndex},function(m,v){var E=v.path,C=v.sequenceNumber;0===m[0]?(d!==Ne.ai&&r(new Y(li(a)),d),d=C,a=E):d=Ne.ai}).next(function(){d!==Ne.ai&&r(new Y(li(a)),d)})},s.prototype.So=function(t){return this.db.Ec().aa(t)},s}();function No(s,t){return Li(s).put((a=s.xa,new Re(0,Gn(t.path),a)));var a}function Cn(s,t){var r=s.projectId;return s.j||(r+="."+s.database),"firestore/"+t+"/"+r+"/"}var Pc=function(){function s(t,r,a){this.persistence=t,this.Vc=r,this.bc=new ve(wt),this.vc=new te(function(l){return vi(l)},qi),this.Sc=Mt.min(),this.Sr=t.mc(a),this.Dc=t.Ec(),this.Ka=t.Tc(),this.Cc=new oo(this.Dc,this.Sr,this.persistence.Ic()),this.Vc.Nc(this.Cc)}return s.prototype.Io=function(t){var r=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(a){return t.vo(a,r.bc)})},s}();function Oc(s,t){var r=J(s);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(a){var m,v,w,E,C,P,O,l=t.batch.keys(),d=r.Dc.ra({oa:!0});return(m=r,v=a,w=t,E=d,C=w.batch,P=C.keys(),O=Z.resolve(),P.forEach(function(R){O=O.next(function(){return E.Rr(v,R)}).next(function(B){var q=B,ct=w.dr.get(R);nt(null!==ct),(!q||q.version.L(ct)<0)&&(q=C.cr(R,q,w))&&E.Er(q,w._r)})}),O.next(function(){return m.Sr.Wo(v,C)})).next(function(){return d.apply(a)}).next(function(){return r.Sr.zo(a)}).next(function(){return r.Cc.kr(a,l)})})}function Eu(s){var t=J(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",function(r){return t.Ka.Ea(r)})}function Lc(s,t){var r=J(s),a=t.nt,l=r.bc;return r.persistence.runTransaction("Apply remote event","readwrite-primary",function(d){var m=r.Dc.ra({oa:!0});l=r.bc;var v=[];t.zt.forEach(function(P,O){var ct,ut,gt,R=l.get(O);if(R){v.push(r.Ka.Ca(d,P.se,O).next(function(){return r.Ka.Sa(d,P.ee,O)}));var B=P.resumeToken;if(B.O()>0){var q=R.it(B,a).st(d.xa);l=l.ot(O,q),ct=R,gt=P,nt((ut=q).resumeToken.O()>0),(0===ct.resumeToken.O()||ut.nt.X()-ct.nt.X()>=3e8||gt.ee.size+gt.ne.size+gt.se.size>0)&&v.push(r.Ka.ya(d,q))}}});var w=xt(),E=Kt();if(t.Yt.forEach(function(P,O){E=E.add(P)}),v.push(m.getEntries(d,E).next(function(P){t.Yt.forEach(function(O,R){var B=P.get(O);R instanceof le&&R.version.isEqual(Mt.min())?(m.Ar(O,a),w=w.ot(O,R)):null==B||R.version.L(B.version)>0||0===R.version.L(B.version)&&B.hasPendingWrites?(m.Er(R,a),w=w.ot(O,R)):rt("LocalStore","Ignoring outdated watch update for ",O,". Current version:",B.version," Watch version:",R.version),t.Jt.has(O)&&v.push(r.persistence.No.yc(d,O))})})),!a.isEqual(Mt.min())){var C=r.Ka.Ea(d).next(function(P){return r.Ka.Aa(d,d.xa,a)});v.push(C)}return Z.$n(v).next(function(){return m.apply(d)}).next(function(){return r.Cc.Mr(d,w)})}).then(function(d){return r.bc=l,d})}function Nc(s,t){var r=J(s);return r.persistence.runTransaction("Get next mutation batch","readonly",function(a){return void 0===t&&(t=-1),r.Sr.Bo(a,t)})}function ho(s,t){var r=J(s);return r.persistence.runTransaction("Allocate target","readwrite",function(a){var l;return r.Ka.va(a,t).next(function(d){return d?Z.resolve(l=d):r.Ka.wa(a).next(function(m){return l=new Cr(t,m,0,a.xa),r.Ka.Ra(a,l).next(function(){return l})})})}).then(function(a){var l=r.bc.get(a.targetId);return(null===l||a.nt.L(l.nt)>0)&&(r.bc=r.bc.ot(a.targetId,a),r.vc.set(t,a.targetId)),a})}function Zr(s,t,r){return D.__awaiter(this,void 0,void 0,function(){var a,l,d,m;return D.__generator(this,function(v){switch(v.label){case 0:a=J(s),l=a.bc.get(t),d=r?"readwrite":"readwrite-primary",v.label=1;case 1:return v.trys.push([1,4,,5]),r?[3,3]:[4,a.persistence.runTransaction("Release target",d,function(w){return a.persistence.No.removeTarget(w,l)})];case 2:v.sent(),v.label=3;case 3:return[3,5];case 4:if(!Xt(m=v.sent()))throw m;return rt("LocalStore","Failed to update sequence numbers for target "+t+": "+m),[3,5];case 5:return a.bc=a.bc.remove(t),a.vc.delete(l.target),[2]}})})}function Cs(s,t,r){var a=J(s),l=Mt.min(),d=Kt();return a.persistence.runTransaction("Execute query","readonly",function(m){return(v=a,w=m,E=Me(t),C=J(v),P=C.vc.get(E),void 0!==P?Z.resolve(C.bc.get(P)):C.Ka.va(w,E)).next(function(v){if(v)return l=v.lastLimboFreeSnapshotVersion,a.Ka.Fa(m,v.targetId).next(function(w){d=w})}).next(function(){return a.Vc.Lr(m,t,r?l:Mt.min(),r?d:Kt())}).next(function(v){return{documents:v,Fc:d}});var v,w,E,C,P})}function Su(s,t){var r=J(s),a=J(r.Ka),l=r.bc.get(t);return l?Promise.resolve(l.target):r.persistence.runTransaction("Get target data","readonly",function(d){return a.Ue(d,t).next(function(m){return m?m.target:null})})}function Rc(s){var t=J(s);return t.persistence.runTransaction("Get new document changes","readonly",function(r){return l=r,d=t.Sc,m=J(t.Dc),v=xt(),w=Ia(d),E=gr(l),C=IDBKeyRange.lowerBound(w,!0),E.rs({index:he.readTimeIndex,range:C},function(P,O){var R=ko(m.serializer,O);v=v.ot(R.key,R),w=O.readTime}).next(function(){return{xc:v,readTime:gu(w)}});var l,d,m,v,w,E,C}).then(function(r){var a=r.xc;return t.Sc=r.readTime,a})}function Fc(s){return D.__awaiter(this,void 0,void 0,function(){var t;return D.__generator(this,function(r){return[2,(t=J(s)).persistence.runTransaction("Synchronize last document change read time","readonly",function(a){return d=gr(a),m=Mt.min(),d.rs({index:he.readTimeIndex,reverse:!0},function(v,w,E){w.readTime&&(m=gu(w.readTime)),E.done()}).next(function(){return m});var d,m}).then(function(a){t.Sc=a})]})})}function mr(s){return D.__awaiter(this,void 0,void 0,function(){return D.__generator(this,function(t){if(s.code!==j.FAILED_PRECONDITION||s.message!==wa)throw s;return rt("LocalStore","Unexpectedly lost primary lease"),[2]})})}var Ma=function(){function s(){this.$c=new de(Te.kc),this.Mc=new de(Te.Oc)}return s.prototype.m=function(){return this.$c.m()},s.prototype.Da=function(t,r){var a=new Te(t,r);this.$c=this.$c.add(a),this.Mc=this.Mc.add(a)},s.prototype.Lc=function(t,r){var a=this;t.forEach(function(l){return a.Da(l,r)})},s.prototype.Na=function(t,r){this.Bc(new Te(t,r))},s.prototype.qc=function(t,r){var a=this;t.forEach(function(l){return a.Na(l,r)})},s.prototype.Uc=function(t){var r=this,a=new Y(new W([])),l=new Te(a,t),d=new Te(a,t+1),m=[];return this.Mc.Ft([l,d],function(v){r.Bc(v),m.push(v.key)}),m},s.prototype.Qc=function(){var t=this;this.$c.forEach(function(r){return t.Bc(r)})},s.prototype.Bc=function(t){this.$c=this.$c.delete(t),this.Mc=this.Mc.delete(t)},s.prototype.Wc=function(t){var r=new Y(new W([])),a=new Te(r,t),l=new Te(r,t+1),d=Kt();return this.Mc.Ft([a,l],function(m){d=d.add(m.key)}),d},s.prototype.Ho=function(t){var r=new Te(t,0),a=this.$c.$t(r);return null!==a&&t.isEqual(a.key)},s}(),Te=function(){function s(t,r){this.key=t,this.jc=r}return s.kc=function(t,r){return Y.i(t.key,r.key)||wt(t.jc,r.jc)},s.Oc=function(t,r){return wt(t.jc,r.jc)||Y.i(t.key,r.key)},s}(),jc=function(s,t){this.user=t,this.type="OAuth",this.Kc={},this.Kc.Authorization="Bearer "+s},Tu=function(){function s(){this.Gc=null}return s.prototype.getToken=function(){return Promise.resolve(null)},s.prototype.zc=function(){},s.prototype.Hc=function(t){this.Gc=t,t(Xe.UNAUTHENTICATED)},s.prototype.Yc=function(){this.Gc=null},s}(),Vc=function(){function s(t){var r=this;this.Jc=null,this.currentUser=Xe.UNAUTHENTICATED,this.Xc=!1,this.Zc=0,this.Gc=null,this.forceRefresh=!1,this.Jc=function(){r.Zc++,r.currentUser=r.tu(),r.Xc=!0,r.Gc&&r.Gc(r.currentUser)},this.Zc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.Jc):(this.Jc(null),t.get().then(function(a){r.auth=a,r.Jc&&r.auth.addAuthTokenListener(r.Jc)},function(){}))}return s.prototype.getToken=function(){var t=this,r=this.Zc,a=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(a).then(function(l){return t.Zc!==r?(rt("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):l?(nt("string"==typeof l.accessToken),new jc(l.accessToken,t.currentUser)):null}):Promise.resolve(null)},s.prototype.zc=function(){this.forceRefresh=!0},s.prototype.Hc=function(t){this.Gc=t,this.Xc&&t(this.currentUser)},s.prototype.Yc=function(){this.auth&&this.auth.removeAuthTokenListener(this.Jc),this.Jc=null,this.Gc=null},s.prototype.tu=function(){var t=this.auth&&this.auth.getUid();return nt(null===t||"string"==typeof t),new Xe(t)},s}(),Uc=function(){function s(t,r){this.eu=t,this.nu=r,this.type="FirstParty",this.user=Xe.ni}return Object.defineProperty(s.prototype,"Kc",{get:function(){var t={"X-Goog-AuthUser":this.nu},r=this.eu.auth.getAuthHeaderValueForFirstParty([]);return r&&(t.Authorization=r),t},enumerable:!1,configurable:!0}),s}(),Au=function(){function s(t,r){this.eu=t,this.nu=r}return s.prototype.getToken=function(){return Promise.resolve(new Uc(this.eu,this.nu))},s.prototype.Hc=function(t){t(Xe.ni)},s.prototype.Yc=function(){},s.prototype.zc=function(){},s}(),Cu=function(){function s(t,r,a,l,d,m){this.fn=t,this.su=a,this.iu=l,this.ru=d,this.listener=m,this.state=0,this.ou=0,this.au=null,this.stream=null,this.ys=new Is(t,r)}return s.prototype.cu=function(){return 1===this.state||2===this.state||4===this.state},s.prototype.uu=function(){return 2===this.state},s.prototype.start=function(){3!==this.state?this.auth():this.hu()},s.prototype.stop=function(){return D.__awaiter(this,void 0,void 0,function(){return D.__generator(this,function(t){switch(t.label){case 0:return this.cu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},s.prototype.lu=function(){this.state=0,this.ys.reset()},s.prototype._u=function(){var t=this;this.uu()&&null===this.au&&(this.au=this.fn.yn(this.su,6e4,function(){return t.fu()}))},s.prototype.du=function(t){this.wu(),this.stream.send(t)},s.prototype.fu=function(){return D.__awaiter(this,void 0,void 0,function(){return D.__generator(this,function(t){return this.uu()?[2,this.close(0)]:[2]})})},s.prototype.wu=function(){this.au&&(this.au.cancel(),this.au=null)},s.prototype.close=function(t,r){return D.__awaiter(this,void 0,void 0,function(){return D.__generator(this,function(a){switch(a.label){case 0:return this.wu(),this.ys.cancel(),this.ou++,3!==t?this.ys.reset():r&&r.code===j.RESOURCE_EXHAUSTED?(Gt(r.toString()),Gt("Using maximum backoff delay to prevent overloading the backend."),this.ys.Rn()):r&&r.code===j.UNAUTHENTICATED&&this.ru.zc(),null!==this.stream&&(this.mu(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Tu(r)];case 1:return a.sent(),[2]}})})},s.prototype.mu=function(){},s.prototype.auth=function(){var t=this;this.state=1;var r=this.Eu(this.ou),a=this.ou;this.ru.getToken().then(function(l){t.ou===a&&t.Iu(l)},function(l){r(function(){var d=new G(j.UNKNOWN,"Fetching auth token failed: "+l.message);return t.Au(d)})})},s.prototype.Iu=function(t){var r=this,a=this.Eu(this.ou);this.stream=this.Ru(t),this.stream.gu(function(){a(function(){return r.state=2,r.listener.gu()})}),this.stream.Tu(function(l){a(function(){return r.Au(l)})}),this.stream.onMessage(function(l){a(function(){return r.onMessage(l)})})},s.prototype.hu=function(){var t=this;this.state=4,this.ys.gn(function(){return D.__awaiter(t,void 0,void 0,function(){return D.__generator(this,function(r){return this.state=0,this.start(),[2]})})})},s.prototype.Au=function(t){return rt("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},s.prototype.Eu=function(t){var r=this;return function(a){r.fn.ws(function(){return r.ou===t?a():(rt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},s}(),Bc=function(s){function t(r,a,l,d,m){var v=this;return(v=s.call(this,r,"listen_stream_connection_backoff","listen_stream_idle",a,l,m)||this).serializer=d,v}return D.__extends(t,s),t.prototype.Ru=function(r){return this.iu.Pu("Listen",r)},t.prototype.onMessage=function(r){this.ys.reset();var a=function(d,m){var v,Xn;if("targetChange"in m){var w="NO_CHANGE"===(Xn=m.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===Xn?1:"REMOVE"===Xn?2:"CURRENT"===Xn?3:"RESET"===Xn?4:at(),E=m.targetChange.targetIds||[],C=function(Xn,Ui){return Xn.Qe?(nt(void 0===Ui||"string"==typeof Ui),ye.fromBase64String(Ui||"")):(nt(void 0===Ui||Ui instanceof Uint8Array),ye.fromUint8Array(Ui||new Uint8Array))}(d,m.targetChange.resumeToken),P=m.targetChange.cause,O=P&&function(Xn){var Ui=void 0===Xn.code?j.UNKNOWN:Gs(Xn.code);return new G(Ui,Xn.message||"")}(P);v=new ps(w,E,C,O||null)}else if("documentChange"in m){var R=m.documentChange,B=Ye(d,R.document.name),q=Ce(R.document.updateTime),ct=new Ve({mapValue:{fields:R.document.fields}}),ut=new Ft(B,q,ct,{});v=new ti(R.targetIds||[],R.removedTargetIds||[],ut.key,ut)}else if("documentDelete"in m){var Dt=m.documentDelete,qt=Ye(d,Dt.document),Jt=Dt.readTime?Ce(Dt.readTime):Mt.min(),pi=new le(qt,Jt);v=new ti([],Dt.removedTargetIds||[],pi.key,pi)}else if("documentRemove"in m){var Us=m.documentRemove,ia=Ye(d,Us.document);v=new ti([],Us.removedTargetIds||[],ia,null)}else{if(!("filter"in m))return at();var Bs=m.filter,eu=new ha(Bs.count||0);v=new Nn(Bs.targetId,eu)}return v}(this.serializer,r),l=function(d){if(!("targetChange"in d))return Mt.min();var m=d.targetChange;return m.targetIds&&m.targetIds.length?Mt.min():m.readTime?Ce(m.readTime):Mt.min()}(r);return this.listener.yu(a,l)},t.prototype.Vu=function(r){var d,m,v,w,a={};a.database=Ji(this.serializer),a.addTarget=(d=this.serializer,(v=Gi(w=(m=r).target)?{documents:fa(d,w)}:{query:Nr(d,w)}).targetId=m.targetId,m.resumeToken.O()>0&&(v.resumeToken=Zi(d,m.resumeToken)),v);var l=function(d,m){var v=function(w,E){switch(E){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return at()}}(0,m.et);return null==v?null:{"goog-listen-tags":v}}(0,r);l&&(a.labels=l),this.du(a)},t.prototype.pu=function(r){var a={};a.database=Ji(this.serializer),a.removeTarget=r,this.du(a)},t}(Cu),zc=function(s){function t(r,a,l,d,m){var v=this;return(v=s.call(this,r,"write_stream_connection_backoff","write_stream_idle",a,l,m)||this).serializer=d,v.bu=!1,v}return D.__extends(t,s),Object.defineProperty(t.prototype,"vu",{get:function(){return this.bu},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.bu=!1,this.lastStreamToken=void 0,s.prototype.start.call(this)},t.prototype.mu=function(){this.bu&&this.Su([])},t.prototype.Ru=function(r){return this.iu.Pu("Write",r)},t.prototype.onMessage=function(r){if(nt(!!r.streamToken),this.lastStreamToken=r.streamToken,this.bu){this.ys.reset();var a=(m=r.commitTime,(d=r.writeResults)&&d.length>0?(nt(void 0!==m),d.map(function(v){return function(w,E){var C=Ce(w.updateTime?w.updateTime:E);C.isEqual(Mt.min())&&(C=Ce(E));var P=null;return w.transformResults&&w.transformResults.length>0&&(P=w.transformResults),new So(C,P)}(v,m)})):[]),l=Ce(r.commitTime);return this.listener.Du(l,a)}var d,m;return nt(!r.writeResults||0===r.writeResults.length),this.bu=!0,this.listener.Cu()},t.prototype.Nu=function(){var r={};r.database=Ji(this.serializer),this.du(r)},t.prototype.Su=function(r){var a=this,l={streamToken:this.lastStreamToken,writes:r.map(function(d){return Sn(a.serializer,d)})};this.du(l)},t}(Cu),Hc=function(s){function t(r,a,l){var d=this;return(d=s.call(this)||this).credentials=r,d.iu=a,d.serializer=l,d.Fu=!1,d}return D.__extends(t,s),t.prototype.xu=function(){if(this.Fu)throw new G(j.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.$u=function(r,a,l){var d=this;return this.xu(),this.credentials.getToken().then(function(m){return d.iu.$u(r,a,l,m)}).catch(function(m){throw m.code===j.UNAUTHENTICATED&&d.credentials.zc(),m})},t.prototype.ku=function(r,a,l){var d=this;return this.xu(),this.credentials.getToken().then(function(m){return d.iu.ku(r,a,l,m)}).catch(function(m){throw m.code===j.UNAUTHENTICATED&&d.credentials.zc(),m})},t.prototype.terminate=function(){this.Fu=!1},t}(function(){}),$n=function(){function s(t,r){this.cs=t,this.di=r,this.state="Unknown",this.Mu=0,this.Ou=null,this.Lu=!0}return s.prototype.Bu=function(){var t=this;0===this.Mu&&(this.qu("Unknown"),this.Ou=this.cs.yn("online_state_timeout",1e4,function(){return t.Ou=null,t.Uu("Backend didn't respond within 10 seconds."),t.qu("Offline"),Promise.resolve()}))},s.prototype.Qu=function(t){"Online"===this.state?this.qu("Unknown"):(this.Mu++,this.Mu>=1&&(this.Wu(),this.Uu("Connection failed 1 times. Most recent error: "+t.toString()),this.qu("Offline")))},s.prototype.set=function(t){this.Wu(),this.Mu=0,"Online"===t&&(this.Lu=!1),this.qu(t)},s.prototype.qu=function(t){t!==this.state&&(this.state=t,this.di(t))},s.prototype.Uu=function(t){var r="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Lu?(Gt(r),this.Lu=!1):rt("OnlineStateTracker",r)},s.prototype.Wu=function(){null!==this.Ou&&(this.Ou.cancel(),this.Ou=null)},s}(),Mu=function(s,t,r,a,l){var d=this;this.ju=s,this.Ku=t,this.cs=r,this.Gu={},this.zu=[],this.Hu=new Map,this.Yu=new Set,this.Ju=[],this.Xu=l,this.Xu.Zu(function(m){r.ws(function(){return D.__awaiter(d,void 0,void 0,function(){return D.__generator(this,function(v){switch(v.label){case 0:return yr(this)?(rt("RemoteStore","Restarting streams for network reachability change."),[4,function(w){return D.__awaiter(this,void 0,void 0,function(){var E;return D.__generator(this,function(C){switch(C.label){case 0:return(E=J(w)).Yu.add(4),[4,Ri(E)];case 1:return C.sent(),E.th.set("Unknown"),E.Yu.delete(4),[4,fo(E)];case 2:return C.sent(),[2]}})})}(this)]):[3,2];case 1:v.sent(),v.label=2;case 2:return[2]}})})})}),this.th=new $n(r,a)};function fo(s){return D.__awaiter(this,void 0,void 0,function(){var t,r;return D.__generator(this,function(a){switch(a.label){case 0:if(!yr(s))return[3,4];t=0,r=s.Ju,a.label=1;case 1:return t<r.length?[4,(0,r[t])(!0)]:[3,4];case 2:a.sent(),a.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function Ri(s){return D.__awaiter(this,void 0,void 0,function(){var t,r;return D.__generator(this,function(a){switch(a.label){case 0:t=0,r=s.Ju,a.label=1;case 1:return t<r.length?[4,(0,r[t])(!1)]:[3,4];case 2:a.sent(),a.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function ku(s){return D.__awaiter(this,void 0,void 0,function(){var t;return D.__generator(this,function(r){switch(r.label){case 0:return t=J(s),rt("RemoteStore","RemoteStore shutting down."),t.Yu.add(5),[4,Ri(t)];case 1:return r.sent(),t.Xu.Di(),t.th.set("Unknown"),[2]}})})}function Ro(s,t){var r=J(s);r.Hu.has(t.targetId)||(r.Hu.set(t.targetId,t),Da(r)?Ms(r):Ds(r).uu()&&ka(r,t))}function po(s,t){var r=J(s),a=Ds(r);r.Hu.delete(t),a.uu()&&Du(r,t),0===r.Hu.size&&(a.uu()?a._u():yr(r)&&r.th.set("Unknown"))}function ka(s,t){s.eh.Ie(t.targetId),Ds(s).Vu(t)}function Du(s,t){s.eh.Ie(t),Ds(s).pu(t)}function Ms(s){s.eh=new Ks({qe:function(t){return s.Gu.qe(t)},Ue:function(t){return s.Hu.get(t)||null}}),Ds(s).start(),s.th.Bu()}function Da(s){return yr(s)&&!Ds(s).cu()&&s.Hu.size>0}function yr(s){return 0===J(s).Yu.size}function Pa(s){s.eh=void 0}function Pu(s){return D.__awaiter(this,void 0,void 0,function(){return D.__generator(this,function(t){return s.Hu.forEach(function(r,a){ka(s,r)}),[2]})})}function Wc(s,t){return D.__awaiter(this,void 0,void 0,function(){return D.__generator(this,function(r){return Pa(s),Da(s)?(s.th.Qu(t),Ms(s)):s.th.set("Unknown"),[2]})})}function qc(s,t,r){return D.__awaiter(this,void 0,void 0,function(){var a,l,d;return D.__generator(this,function(m){switch(m.label){case 0:if(s.th.set("Online"),!(t instanceof ps&&2===t.state&&t.cause))return[3,6];m.label=1;case 1:return m.trys.push([1,3,,5]),[4,function(v,w){return D.__awaiter(this,void 0,void 0,function(){var E,C,P,O;return D.__generator(this,function(R){switch(R.label){case 0:E=w.cause,C=0,P=w.targetIds,R.label=1;case 1:return C<P.length?v.Hu.has(O=P[C])?[4,v.Gu.nh(O,E)]:[3,3]:[3,5];case 2:R.sent(),v.Hu.delete(O),v.eh.removeTarget(O),R.label=3;case 3:R.label=4;case 4:return C++,[3,1];case 5:return[2]}})})}(s,t)];case 2:return m.sent(),[3,5];case 3:return a=m.sent(),rt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),a),[4,vr(s,a)];case 4:return m.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof ti?s.eh.be(t):t instanceof Nn?s.eh.$e(t):s.eh.De(t),r.isEqual(Mt.min()))return[3,13];m.label=7;case 7:return m.trys.push([7,11,,13]),[4,Eu(s.ju)];case 8:return l=m.sent(),r.L(l)>=0?[4,(v=s,w=r,E=v.eh.Oe(w),E.zt.forEach(function(C,P){if(C.resumeToken.O()>0){var O=v.Hu.get(P);O&&v.Hu.set(P,O.it(C.resumeToken,w))}}),E.Ht.forEach(function(C){var P=v.Hu.get(C);if(P){v.Hu.set(C,P.it(ye.B,P.nt)),Du(v,C);var O=new Cr(P.target,C,1,P.sequenceNumber);ka(v,O)}}),v.Gu.sh(E))]:[3,10];case 9:m.sent(),m.label=10;case 10:return[3,13];case 11:return rt("RemoteStore","Failed to raise snapshot:",d=m.sent()),[4,vr(s,d)];case 12:return m.sent(),[3,13];case 13:return[2]}var v,w,E})})}function vr(s,t,r){return D.__awaiter(this,void 0,void 0,function(){var a=this;return D.__generator(this,function(l){switch(l.label){case 0:if(!Xt(t))throw t;return s.Yu.add(1),[4,Ri(s)];case 1:return l.sent(),s.th.set("Offline"),r||(r=function(){return Eu(s.ju)}),s.cs.Cs(function(){return D.__awaiter(a,void 0,void 0,function(){return D.__generator(this,function(d){switch(d.label){case 0:return rt("RemoteStore","Retrying IndexedDB access"),[4,r()];case 1:return d.sent(),s.Yu.delete(1),[4,fo(s)];case 2:return d.sent(),[2]}})})}),[2]}})})}function Oa(s,t){return t().catch(function(r){return vr(s,r,t)})}function ks(s){return D.__awaiter(this,void 0,void 0,function(){var t,r,a,l,d;return D.__generator(this,function(m){switch(m.label){case 0:t=J(s),r=br(t),a=t.zu.length>0?t.zu[t.zu.length-1].batchId:-1,m.label=1;case 1:if(!(yr(v=t)&&v.zu.length<10))return[3,7];m.label=2;case 2:return m.trys.push([2,4,,6]),[4,Nc(t.ju,a)];case 3:return null===(l=m.sent())?(0===t.zu.length&&r._u(),[3,7]):(a=l.batchId,function(v,w){v.zu.push(w);var E=br(v);E.uu()&&E.vu&&E.Su(w.mutations)}(t,l),[3,6]);case 4:return d=m.sent(),[4,vr(t,d)];case 5:return m.sent(),[3,6];case 6:return[3,1];case 7:return Ou(t)&&Lu(t),[2]}var v})})}function Ou(s){return yr(s)&&!br(s).cu()&&s.zu.length>0}function Lu(s){br(s).start()}function Gc(s){return D.__awaiter(this,void 0,void 0,function(){return D.__generator(this,function(t){return br(s).Nu(),[2]})})}function Qr(s){return D.__awaiter(this,void 0,void 0,function(){var t,r,a;return D.__generator(this,function(d){for(t=br(s),r=0,a=s.zu;r<a.length;r++)t.Su(a[r].mutations);return[2]})})}function Fo(s,t,r){return D.__awaiter(this,void 0,void 0,function(){var a,l;return D.__generator(this,function(d){switch(d.label){case 0:return a=s.zu.shift(),l=wc.from(a,t,r),[4,Oa(s,function(){return s.Gu.ih(l)})];case 1:return d.sent(),[4,ks(s)];case 2:return d.sent(),[2]}})})}function Yc(s,t){return D.__awaiter(this,void 0,void 0,function(){return D.__generator(this,function(r){switch(r.label){case 0:return t&&br(s).vu?[4,function(a,l){return D.__awaiter(this,void 0,void 0,function(){var d,m;return D.__generator(this,function(v){switch(v.label){case 0:return qs(m=l.code)&&m!==j.ABORTED?(d=a.zu.shift(),br(a).lu(),[4,Oa(a,function(){return a.Gu.rh(d.batchId,l)})]):[3,3];case 1:return v.sent(),[4,ks(a)];case 2:v.sent(),v.label=3;case 3:return[2]}})})}(s,t)]:[3,2];case 1:r.sent(),r.label=2;case 2:return Ou(s)&&Lu(s),[2]}})})}function La(s,t){return D.__awaiter(this,void 0,void 0,function(){var r;return D.__generator(this,function(l){switch(l.label){case 0:return r=J(s),t?(r.Yu.delete(2),[4,fo(r)]):[3,2];case 1:return l.sent(),[3,5];case 2:return t?[3,4]:(r.Yu.add(2),[4,Ri(r)]);case 3:l.sent(),r.th.set("Unknown"),l.label=4;case 4:l.label=5;case 5:return[2]}})})}function Ds(s){var r,a,l,d,t=this;return s.oh||(s.oh=(r=s.Ku,a=s.cs,l={gu:Pu.bind(null,s),Tu:Wc.bind(null,s),yu:qc.bind(null,s)},(d=J(r)).xu(),new Bc(a,d.iu,d.credentials,d.serializer,l)),s.Ju.push(function(r){return D.__awaiter(t,void 0,void 0,function(){return D.__generator(this,function(a){switch(a.label){case 0:return r?(s.oh.lu(),Da(s)?Ms(s):s.th.set("Unknown"),[3,3]):[3,1];case 1:return[4,s.oh.stop()];case 2:a.sent(),Pa(s),a.label=3;case 3:return[2]}})})})),s.oh}function br(s){var r,a,l,d,t=this;return s.ah||(s.ah=(r=s.Ku,a=s.cs,l={gu:Gc.bind(null,s),Tu:Yc.bind(null,s),Cu:Qr.bind(null,s),Du:Fo.bind(null,s)},(d=J(r)).xu(),new zc(a,d.iu,d.credentials,d.serializer,l)),s.Ju.push(function(r){return D.__awaiter(t,void 0,void 0,function(){return D.__generator(this,function(a){switch(a.label){case 0:return r?(s.ah.lu(),[4,ks(s)]):[3,2];case 1:return a.sent(),[3,4];case 2:return[4,s.ah.stop()];case 3:a.sent(),s.zu.length>0&&(rt("RemoteStore","Stopping write stream with "+s.zu.length+" pending writes"),s.zu=[]),a.label=4;case 4:return[2]}})})})),s.ah}var Kn=function(s){this.key=s},$c=function(s){this.key=s},Nu=function(){function s(t,r){this.query=t,this.uh=r,this.hh=null,this.te=!1,this.lh=Kt(),this.Wt=Kt(),this._h=cr(t),this.fh=new Rt(this._h)}return Object.defineProperty(s.prototype,"dh",{get:function(){return this.uh},enumerable:!1,configurable:!0}),s.prototype.wh=function(t,r){var a=this,l=r?r.mh:new bi,d=r?r.fh:this.fh,m=r?r.Wt:this.Wt,v=d,w=!1,E=ar(this.query)&&d.size===this.query.limit?d.last():null,C=Ai(this.query)&&d.size===this.query.limit?d.first():null;if(t.ht(function(O,R){var B=d.get(O),q=R instanceof Ft?R:null;q&&(q=Hr(a.query,q)?q:null);var ct=!!B&&a.Wt.has(B.key),ut=!!q&&(q.Je||a.Wt.has(q.key)&&q.hasCommittedMutations),gt=!1;B&&q?B.data().isEqual(q.data())?ct!==ut&&(l.track({type:3,doc:q}),gt=!0):a.Th(B,q)||(l.track({type:2,doc:q}),gt=!0,(E&&a._h(q,E)>0||C&&a._h(q,C)<0)&&(w=!0)):!B&&q?(l.track({type:0,doc:q}),gt=!0):B&&!q&&(l.track({type:1,doc:B}),gt=!0,(E||C)&&(w=!0)),gt&&(q?(v=v.add(q),m=ut?m.add(O):m.delete(O)):(v=v.delete(O),m=m.delete(O)))}),ar(this.query)||Ai(this.query))for(;v.size>this.query.limit;){var P=ar(this.query)?v.last():v.first();v=v.delete(P.key),m=m.delete(P.key),l.track({type:1,doc:P})}return{fh:v,mh:l,Eh:w,Wt:m}},s.prototype.Th=function(t,r){return t.Je&&r.hasCommittedMutations&&!r.Je},s.prototype.yr=function(t,r,a){var l=this,d=this.fh;this.fh=t.fh,this.Wt=t.Wt;var m=t.mh.Ut();m.sort(function(C,P){return R=P.type,(B=function(q){switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return at()}})(C.type)-B(R)||l._h(C.doc,P.doc);var R,B}),this.Ih(a);var v=r?this.Ah():[],w=0===this.lh.size&&this.te?1:0,E=w!==this.hh;return this.hh=w,0!==m.length||E?{snapshot:new _i(this.query,t.fh,d,m,t.Wt,0===w,E,!1),Rh:v}:{Rh:v}},s.prototype.Qs=function(t){return this.te&&"Offline"===t?(this.te=!1,this.yr({fh:this.fh,mh:new bi,Wt:this.Wt,Eh:!1},!1)):{Rh:[]}},s.prototype.gh=function(t){return!this.uh.has(t)&&!!this.fh.has(t)&&!this.fh.get(t).Je},s.prototype.Ih=function(t){var r=this;t&&(t.ee.forEach(function(a){return r.uh=r.uh.add(a)}),t.ne.forEach(function(a){}),t.se.forEach(function(a){return r.uh=r.uh.delete(a)}),this.te=t.te)},s.prototype.Ah=function(){var t=this;if(!this.te)return[];var r=this.lh;this.lh=Kt(),this.fh.forEach(function(l){t.gh(l.key)&&(t.lh=t.lh.add(l.key))});var a=[];return r.forEach(function(l){t.lh.has(l)||a.push(new $c(l))}),this.lh.forEach(function(l){r.has(l)||a.push(new Kn(l))}),a},s.prototype.Ph=function(t){this.uh=t.Fc,this.lh=Kt();var r=this.wh(t.documents);return this.yr(r,!0)},s.prototype.yh=function(){return _i.Gt(this.query,this.fh,this.Wt,0===this.hh)},s}(),Jr=function(s,t,r){this.query=s,this.targetId=t,this.view=r},ql=function(s){this.key=s,this.Vh=!1},Kc=function(){function s(t,r,a,l,d,m){this.ju=t,this.ph=r,this.bh=a,this.Sh=l,this.currentUser=d,this.Dh=m,this.Ch={},this.Nh=new te(function(v){return ws(v)},qn),this.Fh=new Map,this.xh=[],this.$h=new ve(Y.i),this.kh=new Map,this.Mh=new Ma,this.Oh={},this.Lh=new Map,this.Bh=Lo.da(),this.onlineState="Unknown",this.qh=void 0}return Object.defineProperty(s.prototype,"Uh",{get:function(){return!0===this.qh},enumerable:!1,configurable:!0}),s}();function Xc(s,t){return D.__awaiter(this,void 0,void 0,function(){var r,l,d,m,v;return D.__generator(this,function(w){switch(w.label){case 0:return r=Bo(s),(d=r.Nh.get(t))?(r.Sh.Oi(d.targetId),l=d.view.yh(),[3,4]):[3,1];case 1:return[4,ho(r.ju,Me(t))];case 2:return m=w.sent(),v=r.Sh.Oi(m.targetId),[4,ts(r,t,m.targetId,"current"===v)];case 3:l=w.sent(),r.Uh&&Ro(r.ph,m),w.label=4;case 4:return[2,l]}})})}function ts(s,t,r,a){return D.__awaiter(this,void 0,void 0,function(){var l,d,m,v,w,E;return D.__generator(this,function(C){switch(C.label){case 0:return s.Qh=function(P,O,R){return function(B,q,ct,ut){return D.__awaiter(this,void 0,void 0,function(){var gt,bt,Dt;return D.__generator(this,function(qt){switch(qt.label){case 0:return(gt=q.view.wh(ct)).Eh?[4,Cs(B.ju,q.query,!1).then(function(Jt){return q.view.wh(Jt.documents,gt)})]:[3,2];case 1:gt=qt.sent(),qt.label=2;case 2:return bt=ut&&ut.zt.get(q.targetId),Dt=q.view.yr(gt,B.Uh,bt),[2,(es(B,q.targetId,Dt.Rh),Dt.snapshot)]}})})}(s,P,O,R)},[4,Cs(s.ju,t,!0)];case 1:return l=C.sent(),d=new Nu(t,l.Fc),m=d.wh(l.documents),v=ds.Zt(r,a&&"Offline"!==s.onlineState),w=d.yr(m,s.Uh,v),es(s,r,w.Rh),E=new Jr(t,r,d),[2,(s.Nh.set(t,E),s.Fh.has(r)?s.Fh.get(r).push(t):s.Fh.set(r,[t]),w.snapshot)]}})})}function Zc(s,t){return D.__awaiter(this,void 0,void 0,function(){var r,a,l;return D.__generator(this,function(d){switch(d.label){case 0:return r=J(s),a=r.Nh.get(t),(l=r.Fh.get(a.targetId)).length>1?[2,(r.Fh.set(a.targetId,l.filter(function(m){return!qn(m,t)})),void r.Nh.delete(t))]:r.Uh?(r.Sh.Bi(a.targetId),r.Sh.Fi(a.targetId)?[3,2]:[4,Zr(r.ju,a.targetId,!1).then(function(){r.Sh.Ui(a.targetId),po(r.ph,a.targetId),di(r,a.targetId)}).catch(mr)]):[3,3];case 1:d.sent(),d.label=2;case 2:return[3,5];case 3:return di(r,a.targetId),[4,Zr(r.ju,a.targetId,!0)];case 4:d.sent(),d.label=5;case 5:return[2]}})})}function jo(s,t){return D.__awaiter(this,void 0,void 0,function(){var r,a;return D.__generator(this,function(l){switch(l.label){case 0:r=J(s),l.label=1;case 1:return l.trys.push([1,4,,6]),[4,Lc(r.ju,t)];case 2:return a=l.sent(),t.zt.forEach(function(d,m){var v=r.kh.get(m);v&&(nt(d.ee.size+d.ne.size+d.se.size<=1),d.ee.size>0?v.Vh=!0:d.ne.size>0?nt(v.Vh):d.se.size>0&&(nt(v.Vh),v.Vh=!1))}),[4,ns(r,a,t)];case 3:return l.sent(),[3,6];case 4:return[4,mr(l.sent())];case 5:return l.sent(),[3,6];case 6:return[2]}})})}function Ru(s,t,r){var a=J(s);if(a.Uh&&0===r||!a.Uh&&1===r){var l=[];a.Nh.forEach(function(d,m){var v=m.view.Qs(t);v.snapshot&&l.push(v.snapshot)}),function(d,m){var v=J(d);v.onlineState=m;var w=!1;v.Bs.forEach(function(E,C){for(var P=0,O=C.listeners;P<O.length;P++)O[P].Qs(m)&&(w=!0)}),w&&Di(v)}(a.bh,t),l.length&&a.Ch.yu(l),a.onlineState=t,a.Uh&&a.Sh.Ki(t)}}function Qc(s,t,r){return D.__awaiter(this,void 0,void 0,function(){var a,l,d,m,v,w;return D.__generator(this,function(E){switch(E.label){case 0:return(a=J(s)).Sh.Qi(t,"rejected",r),l=a.kh.get(t),(d=l&&l.key)?(m=(m=new ve(Y.i)).ot(d,new le(d,Mt.min())),v=Kt().add(d),w=new Yi(Mt.min(),new Map,new de(wt),m,v),[4,jo(a,w)]):[3,2];case 1:return E.sent(),a.$h=a.$h.remove(d),a.kh.delete(t),ja(a),[3,4];case 2:return[4,Zr(a.ju,t,!1).then(function(){return di(a,t,r)}).catch(mr)];case 3:E.sent(),E.label=4;case 4:return[2]}})})}function Na(s,t){return D.__awaiter(this,void 0,void 0,function(){var r,a,l;return D.__generator(this,function(d){switch(d.label){case 0:r=J(s),a=t.batch.batchId,d.label=1;case 1:return d.trys.push([1,4,,6]),[4,Oc(r.ju,t)];case 2:return l=d.sent(),Vo(r,a,null),Ra(r,a),r.Sh.ki(a,"acknowledged"),[4,ns(r,l)];case 3:return d.sent(),[3,6];case 4:return[4,mr(d.sent())];case 5:return d.sent(),[3,6];case 6:return[2]}})})}function Fu(s,t,r){return D.__awaiter(this,void 0,void 0,function(){var a,l;return D.__generator(this,function(d){switch(d.label){case 0:a=J(s),d.label=1;case 1:return d.trys.push([1,4,,6]),[4,(m=a.ju,v=t,w=J(m),w.persistence.runTransaction("Reject batch","readwrite-primary",function(E){var C;return w.Sr.Oo(E,v).next(function(P){return nt(null!==P),C=P.keys(),w.Sr.Wo(E,P)}).next(function(){return w.Sr.zo(E)}).next(function(){return w.Cc.kr(E,C)})}))];case 2:return l=d.sent(),Vo(a,t,r),Ra(a,t),a.Sh.ki(t,"rejected",r),[4,ns(a,l)];case 3:return d.sent(),[3,6];case 4:return[4,mr(d.sent())];case 5:return d.sent(),[3,6];case 6:return[2]}var m,v,w})})}function Ra(s,t){(s.Lh.get(t)||[]).forEach(function(r){r.resolve()}),s.Lh.delete(t)}function Vo(s,t,r){var a=J(s),l=a.Oh[a.currentUser.ti()];if(l){var d=l.get(t);d&&(r?d.reject(r):d.resolve(),l=l.remove(t)),a.Oh[a.currentUser.ti()]=l}}function di(s,t,r){void 0===r&&(r=null),s.Sh.Bi(t);for(var a=0,l=s.Fh.get(t);a<l.length;a++){var d=l[a];s.Nh.delete(d),r&&s.Ch.Wh(d,r)}s.Fh.delete(t),s.Uh&&s.Mh.Uc(t).forEach(function(m){s.Mh.Ho(m)||Fa(s,m)})}function Fa(s,t){var r=s.$h.get(t);null!==r&&(po(s.ph,r),s.$h=s.$h.remove(t),s.kh.delete(r),ja(s))}function es(s,t,r){for(var a=0,l=r;a<l.length;a++){var d=l[a];d instanceof Kn?(s.Mh.Da(d.key,t),Jc(s,d)):d instanceof $c?(rt("SyncEngine","Document no longer in limbo: "+d.key),s.Mh.Na(d.key,t),s.Mh.Ho(d.key)||Fa(s,d.key)):at()}}function Jc(s,t){var r=t.key;s.$h.get(r)||(rt("SyncEngine","New document in limbo: "+r),s.xh.push(r),ja(s))}function ja(s){for(;s.xh.length>0&&s.$h.size<s.Dh;){var t=s.xh.shift(),r=s.Bh.next();s.kh.set(r,new ql(t)),s.$h=s.$h.ot(t,r),Ro(s.ph,new Cr(Me(Ti(t.path)),r,2,Ne.ai))}}function ns(s,t,r){return D.__awaiter(this,void 0,void 0,function(){var a,l,d,m;return D.__generator(this,function(v){switch(v.label){case 0:return a=J(s),l=[],d=[],m=[],a.Nh.m()?[3,3]:(a.Nh.forEach(function(w,E){m.push(a.Qh(E,t,r).then(function(C){if(C){a.Uh&&a.Sh.Qi(E.targetId,C.fromCache?"not-current":"current"),l.push(C);var P=Mo.zr(E.targetId,C);d.push(P)}}))}),[4,Promise.all(m)]);case 1:return v.sent(),a.Ch.yu(l),[4,function(w,E){return D.__awaiter(this,void 0,void 0,function(){var C,P,O,R,B,q,ct,gt;return D.__generator(this,function(bt){switch(bt.label){case 0:C=J(w),bt.label=1;case 1:return bt.trys.push([1,3,,4]),[4,C.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(Dt){return Z.forEach(E,function(qt){return Z.forEach(qt.Kr,function(Jt){return C.persistence.No.Da(Dt,qt.targetId,Jt)}).next(function(){return Z.forEach(qt.Gr,function(Jt){return C.persistence.No.Na(Dt,qt.targetId,Jt)})})})})];case 2:return bt.sent(),[3,4];case 3:if(!Xt(P=bt.sent()))throw P;return rt("LocalStore","Failed to update sequence numbers: "+P),[3,4];case 4:for(O=0,R=E;O<R.length;O++)q=(B=R[O]).targetId,B.fromCache||(ct=C.bc.get(q),gt=ct.rt(ct.nt),C.bc=C.bc.ot(q,gt));return[2]}})})}(a.ju,d)];case 2:v.sent(),v.label=3;case 3:return[2]}})})}function tl(s,t){return D.__awaiter(this,void 0,void 0,function(){var r,a;return D.__generator(this,function(l){switch(l.label){case 0:return(r=J(s)).currentUser.isEqual(t)?[3,3]:(rt("SyncEngine","User change. New user:",t.ti()),[4,function(d,m){return D.__awaiter(this,void 0,void 0,function(){var v,w,E,C;return D.__generator(this,function(P){switch(P.label){case 0:return v=J(d),w=v.Sr,E=v.Cc,[4,v.persistence.runTransaction("Handle user change","readonly",function(O){var R;return v.Sr.Uo(O).next(function(B){return R=B,w=v.persistence.mc(m),E=new oo(v.Dc,w,v.persistence.Ic()),w.Uo(O)}).next(function(B){for(var q=[],ct=[],ut=Kt(),gt=0,bt=R;gt<bt.length;gt++){var Dt=bt[gt];q.push(Dt.batchId);for(var qt=0,Jt=Dt.mutations;qt<Jt.length;qt++)ut=ut.add(Jt[qt].key)}for(var Vi=0,Us=B;Vi<Us.length;Vi++){var ia=Us[Vi];ct.push(ia.batchId);for(var yo=0,Bs=ia.mutations;yo<Bs.length;yo++)ut=ut.add(Bs[yo].key)}return E.kr(O,ut).next(function(eu){return{jh:eu,Kh:q,Gh:ct}})})})];case 1:return C=P.sent(),[2,(v.Sr=w,v.Cc=E,v.Vc.Nc(v.Cc),C)]}})})}(r.ju,t)]);case 1:return a=l.sent(),r.currentUser=t,(d=r).Lh.forEach(function(v){v.forEach(function(w){w.reject(new G(j.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),d.Lh.clear(),r.Sh.ji(t,a.Kh,a.Gh),[4,ns(r,a.jh)];case 2:l.sent(),l.label=3;case 3:return[2]}var d})})}function ju(s,t){var r=J(s),a=r.kh.get(t);if(a&&a.Vh)return Kt().add(a.key);var l=Kt(),d=r.Fh.get(t);if(!d)return l;for(var m=0,v=d;m<v.length;m++){var E=r.Nh.get(v[m]);l=l.kt(E.view.dh)}return l}function Vu(s,t){return D.__awaiter(this,void 0,void 0,function(){var r,a,l;return D.__generator(this,function(d){switch(d.label){case 0:return[4,Cs((r=J(s)).ju,t.query,!0)];case 1:return a=d.sent(),l=t.view.Ph(a),[2,(r.Uh&&es(r,t.targetId,l.Rh),l)]}})})}function el(s,t,r,a){return D.__awaiter(this,void 0,void 0,function(){var l,d;return D.__generator(this,function(m){switch(m.label){case 0:return[4,(v=(l=J(s)).ju,w=t,E=J(v),C=J(E.Sr),E.persistence.runTransaction("Lookup mutation documents","readonly",function(P){return C.Lo(P,w).next(function(O){return O?E.Cc.kr(P,O):Z.resolve(null)})}))];case 1:return null===(d=m.sent())?[3,6]:"pending"!==r?[3,3]:[4,ks(l.ph)];case 2:return m.sent(),[3,4];case 3:"acknowledged"===r||"rejected"===r?(Vo(l,t,a||null),Ra(l,t),function(v,w){J(J(v).Sr).Ko(w)}(l.ju,t)):at(),m.label=4;case 4:return[4,ns(l,d)];case 5:return m.sent(),[3,7];case 6:rt("SyncEngine","Cannot apply mutation batch with id: "+t),m.label=7;case 7:return[2]}var v,w,E,C})})}function nl(s,t){return D.__awaiter(this,void 0,void 0,function(){var r,a,l,d,m,w,E;return D.__generator(this,function(C){switch(C.label){case 0:return Bo(r=J(s)),Va(r),!0!==t||!0===r.qh?[3,3]:(a=r.Sh.Ci(),[4,Uu(r,a.A())]);case 1:return l=C.sent(),r.qh=!0,[4,La(r.ph,!0)];case 2:for(C.sent(),d=0,m=l;d<m.length;d++)Ro(r.ph,m[d]);return[3,7];case 3:return!1!==t||!1===r.qh?[3,7]:(w=[],E=Promise.resolve(),r.Fh.forEach(function(P,O){r.Sh.qi(O)?w.push(O):E=E.then(function(){return di(r,O),Zr(r.ju,O,!0)}),po(r.ph,O)}),[4,E]);case 4:return C.sent(),[4,Uu(r,w)];case 5:return C.sent(),(O=J(r)).kh.forEach(function(R,B){po(O.ph,B)}),O.Mh.Qc(),O.kh=new Map,O.$h=new ve(Y.i),r.qh=!1,[4,La(r.ph,!1)];case 6:C.sent(),C.label=7;case 7:return[2]}var O})})}function Uu(s,t,r){return D.__awaiter(this,void 0,void 0,function(){var a,l,d,m,v,w,E,C,P,O,B,q,ct;return D.__generator(this,function(ut){switch(ut.label){case 0:a=J(s),l=[],d=[],m=0,v=t,ut.label=1;case 1:return m<v.length?(E=void 0,(C=a.Fh.get(w=v[m]))&&0!==C.length?[4,ho(a.ju,Me(C[0]))]:[3,7]):[3,13];case 2:E=ut.sent(),P=0,O=C,ut.label=3;case 3:return P<O.length?(B=a.Nh.get(O[P]),[4,Vu(a,B)]):[3,6];case 4:(q=ut.sent()).snapshot&&d.push(q.snapshot),ut.label=5;case 5:return P++,[3,3];case 6:return[3,11];case 7:return[4,Su(a.ju,w)];case 8:return ct=ut.sent(),[4,ho(a.ju,ct)];case 9:return E=ut.sent(),[4,ts(a,Ps(ct),w,!1)];case 10:ut.sent(),ut.label=11;case 11:l.push(E),ut.label=12;case 12:return m++,[3,1];case 13:return[2,(a.Ch.yu(d),l)]}})})}function Ps(s){return or(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function Uo(s){var t=J(s);return J(J(t.ju).persistence).pi()}function Bu(s,t,r,a){return D.__awaiter(this,void 0,void 0,function(){var l,d,m;return D.__generator(this,function(v){switch(v.label){case 0:return(l=J(s)).qh?(rt("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!l.Fh.has(t))return[3,8];switch(r){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Rc(l.ju)];case 3:return d=v.sent(),m=Yi.Xt(t,"current"===r),[4,ns(l,d,m)];case 4:return v.sent(),[3,8];case 5:return[4,Zr(l.ju,t,!0)];case 6:return v.sent(),di(l,t,a),[3,8];case 7:at(),v.label=8;case 8:return[2]}})})}function He(s,t,r){return D.__awaiter(this,void 0,void 0,function(){var a,l,d,m,v,w,E,C,P;return D.__generator(this,function(R){switch(R.label){case 0:if(!(a=Bo(s)).qh)return[3,10];l=0,d=t,R.label=1;case 1:return l<d.length?a.Fh.has(m=d[l])?(rt("SyncEngine","Adding an already active target "+m),[3,5]):[4,Su(a.ju,m)]:[3,6];case 2:return v=R.sent(),[4,ho(a.ju,v)];case 3:return w=R.sent(),[4,ts(a,Ps(v),w.targetId,!1)];case 4:R.sent(),Ro(a.ph,w),R.label=5;case 5:return l++,[3,1];case 6:E=function(B){return D.__generator(this,function(q){switch(q.label){case 0:return a.Fh.has(B)?[4,Zr(a.ju,B,!1).then(function(){po(a.ph,B),di(a,B)}).catch(mr)]:[3,2];case 1:q.sent(),q.label=2;case 2:return[2]}})},C=0,P=r,R.label=7;case 7:return C<P.length?[5,E(P[C])]:[3,10];case 8:R.sent(),R.label=9;case 9:return C++,[3,7];case 10:return[2]}})})}function Bo(s){var t=J(s);return t.ph.Gu.sh=jo.bind(null,t),t.ph.Gu.qe=ju.bind(null,t),t.ph.Gu.nh=Qc.bind(null,t),t.Ch.yu=tn.bind(null,t.bh),t.Ch.Wh=Yr.bind(null,t.bh),t}function Va(s){var t=J(s);return t.ph.Gu.ih=Na.bind(null,t),t.ph.Gu.rh=Fu.bind(null,t),t}var zo=function(){function s(){}return s.prototype.Nc=function(t){this.zh=t},s.prototype.Lr=function(t,r,a,l){var m,d=this;return 0===(m=r).filters.length&&null===m.limit&&null==m.startAt&&null==m.endAt&&(0===m.on.length||1===m.on.length&&m.on[0].field.p())||a.isEqual(Mt.min())?this.Hh(t,r):this.zh.kr(t,l).next(function(m){var v=d.Yh(r,m);return(ar(r)||Ai(r))&&d.Eh(r.an,v,l,a)?d.Hh(t,r):(Dn()<=Lt.LogLevel.DEBUG&&rt("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Et(r)),d.zh.Lr(t,r,a).next(function(w){return v.forEach(function(E){w=w.ot(E.key,E)}),w}))})},s.prototype.Yh=function(t,r){var a=new de(cr(t));return r.forEach(function(l,d){d instanceof Ft&&Hr(t,d)&&(a=a.add(d))}),a},s.prototype.Eh=function(t,r,a,l){if(a.size!==r.size)return!0;var d="F"===t?r.last():r.first();return!!d&&(d.hasPendingWrites||d.version.L(l)>0)},s.prototype.Hh=function(t,r){return Dn()<=Lt.LogLevel.DEBUG&&rt("IndexFreeQueryEngine","Using full collection scan to execute query:",Et(r)),this.zh.Lr(t,r,Mt.min())},s}(),il=function(){function s(t,r){this.Dr=t,this.No=r,this.Sr=[],this.Jh=1,this.Xh=new de(Te.kc)}return s.prototype.$o=function(t){return Z.resolve(0===this.Sr.length)},s.prototype.ko=function(t,r,a,l){var d=this.Jh;this.Jh++;var m=new Es(d,r,a,l);this.Sr.push(m);for(var v=0,w=l;v<w.length;v++){var E=w[v];this.Xh=this.Xh.add(new Te(E.key,d)),this.Dr.Mo(t,E.key.path.h())}return Z.resolve(m)},s.prototype.Oo=function(t,r){return Z.resolve(this.Zh(r))},s.prototype.Bo=function(t,r){var l=this.tl(r+1),d=l<0?0:l;return Z.resolve(this.Sr.length>d?this.Sr[d]:null)},s.prototype.qo=function(){return Z.resolve(0===this.Sr.length?-1:this.Jh-1)},s.prototype.Uo=function(t){return Z.resolve(this.Sr.slice())},s.prototype.Nr=function(t,r){var a=this,l=new Te(r,0),d=new Te(r,Number.POSITIVE_INFINITY),m=[];return this.Xh.Ft([l,d],function(v){var w=a.Zh(v.jc);m.push(w)}),Z.resolve(m)},s.prototype.Or=function(t,r){var a=this,l=new de(wt);return r.forEach(function(d){var m=new Te(d,0),v=new Te(d,Number.POSITIVE_INFINITY);a.Xh.Ft([m,v],function(w){l=l.add(w.jc)})}),Z.resolve(this.el(l))},s.prototype.Wr=function(t,r){var a=r.path,l=a.length+1,d=a;Y.F(d)||(d=d.child(""));var m=new Te(new Y(d),0),v=new de(wt);return this.Xh.xt(function(w){var E=w.key.path;return!!a.T(E)&&(E.length===l&&(v=v.add(w.jc)),!0)},m),Z.resolve(this.el(v))},s.prototype.el=function(t){var r=this,a=[];return t.forEach(function(l){var d=r.Zh(l);null!==d&&a.push(d)}),a},s.prototype.Wo=function(t,r){var a=this;nt(0===this.nl(r.batchId,"removed")),this.Sr.shift();var l=this.Xh;return Z.forEach(r.mutations,function(d){var m=new Te(d.key,r.batchId);return l=l.delete(m),a.No.Go(t,d.key)}).next(function(){a.Xh=l})},s.prototype.Ko=function(t){},s.prototype.Ho=function(t,r){var a=new Te(r,0),l=this.Xh.$t(a);return Z.resolve(r.isEqual(l&&l.key))},s.prototype.zo=function(t){return Z.resolve()},s.prototype.nl=function(t,r){return this.tl(t)},s.prototype.tl=function(t){return 0===this.Sr.length?0:t-this.Sr[0].batchId},s.prototype.Zh=function(t){var r=this.tl(t);return r<0||r>=this.Sr.length?null:this.Sr[r]},s}(),zu=function(){function s(t,r){this.Dr=t,this.sl=r,this.docs=new ve(Y.i),this.size=0}return s.prototype.Er=function(t,r,a){var l=r.key,d=this.docs.get(l),m=d?d.size:0,v=this.sl(r);return this.docs=this.docs.ot(l,{ta:r,size:v,readTime:a}),this.size+=v-m,this.Dr.Mo(t,l.path.h())},s.prototype.Ar=function(t){var r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)},s.prototype.Rr=function(t,r){var a=this.docs.get(r);return Z.resolve(a?a.ta:null)},s.prototype.getEntries=function(t,r){var a=this,l=It();return r.forEach(function(d){var m=a.docs.get(d);l=l.ot(d,m?m.ta:null)}),Z.resolve(l)},s.prototype.Lr=function(t,r,a){for(var l=Yt(),d=new Y(r.path.child("")),m=this.docs.ft(d);m.At();){var v=m.It(),E=v.value,C=E.ta,P=E.readTime;if(!r.path.T(v.key.path))break;P.L(a)<=0||C instanceof Ft&&Hr(r,C)&&(l=l.ot(C.key,C))}return Z.resolve(l)},s.prototype.il=function(t,r){return Z.forEach(this.docs,function(a){return r(a)})},s.prototype.ra=function(t){return new rl(this)},s.prototype.aa=function(t){return Z.resolve(this.size)},s}(),rl=function(s){function t(r){var a=this;return(a=s.call(this)||this).ca=r,a}return D.__extends(t,s),t.prototype.yr=function(r){var a=this,l=[];return this.wr.forEach(function(d,m){m?l.push(a.ca.Er(r,m,a.readTime)):a.ca.Ar(d)}),Z.$n(l)},t.prototype.gr=function(r,a){return this.ca.Rr(r,a)},t.prototype.Pr=function(r,a){return this.ca.getEntries(r,a)},t}(fu),Hu=function(){function s(t){this.persistence=t,this.rl=new te(function(r){return vi(r)},qi),this.lastRemoteSnapshotVersion=Mt.min(),this.highestTargetId=0,this.ol=0,this.al=new Ma,this.targetCount=0,this.cl=Lo.fa()}return s.prototype.Ce=function(t,r){return this.rl.forEach(function(a,l){return r(l)}),Z.resolve()},s.prototype.Ea=function(t){return Z.resolve(this.lastRemoteSnapshotVersion)},s.prototype.Ia=function(t){return Z.resolve(this.ol)},s.prototype.wa=function(t){return this.highestTargetId=this.cl.next(),Z.resolve(this.highestTargetId)},s.prototype.Aa=function(t,r,a){return a&&(this.lastRemoteSnapshotVersion=a),r>this.ol&&(this.ol=r),Z.resolve()},s.prototype.ga=function(t){this.rl.set(t.target,t);var r=t.targetId;r>this.highestTargetId&&(this.cl=new Lo(r),this.highestTargetId=r),t.sequenceNumber>this.ol&&(this.ol=t.sequenceNumber)},s.prototype.Ra=function(t,r){return this.ga(r),this.targetCount+=1,Z.resolve()},s.prototype.ya=function(t,r){return this.ga(r),Z.resolve()},s.prototype.Va=function(t,r){return this.rl.delete(r.target),this.al.Uc(r.targetId),this.targetCount-=1,Z.resolve()},s.prototype.po=function(t,r,a){var l=this,d=0,m=[];return this.rl.forEach(function(v,w){w.sequenceNumber<=r&&null===a.get(w.targetId)&&(l.rl.delete(v),m.push(l.pa(t,w.targetId)),d++)}),Z.$n(m).next(function(){return d})},s.prototype.ba=function(t){return Z.resolve(this.targetCount)},s.prototype.va=function(t,r){var a=this.rl.get(r)||null;return Z.resolve(a)},s.prototype.Sa=function(t,r,a){return this.al.Lc(r,a),Z.resolve()},s.prototype.Ca=function(t,r,a){this.al.qc(r,a);var l=this.persistence.No,d=[];return l&&r.forEach(function(m){d.push(l.Go(t,m))}),Z.$n(d)},s.prototype.pa=function(t,r){return this.al.Uc(r),Z.resolve()},s.prototype.Fa=function(t,r){var a=this.al.Wc(r);return Z.resolve(a)},s.prototype.Ho=function(t,r){return Z.resolve(this.al.Ho(r))},s}(),sl=function(){function s(t){var r=this;this.ul={},this.Ma=new Ne(0),this.Oa=!1,this.Oa=!0,this.No=t(this),this.Ka=new Hu(this),this.Dr=new Sc,this.vr=new zu(this.Dr,function(d){return r.No.hl(d)})}return s.prototype.start=function(){return Promise.resolve()},s.prototype.Di=function(){return this.Oa=!1,Promise.resolve()},Object.defineProperty(s.prototype,"Ei",{get:function(){return this.Oa},enumerable:!1,configurable:!0}),s.prototype.Za=function(){},s.prototype.tc=function(){},s.prototype.Ic=function(){return this.Dr},s.prototype.mc=function(t){var r=this.ul[t.ti()];return r||(r=new il(this.Dr,this.No),this.ul[t.ti()]=r),r},s.prototype.Tc=function(){return this.Ka},s.prototype.Ec=function(){return this.vr},s.prototype.runTransaction=function(t,r,a){var l=this;rt("MemoryPersistence","Starting transaction:",t);var d=new ol(this.Ma.next());return this.No.ll(),a(d).next(function(m){return l.No._l(d).next(function(){return m})}).Fn().then(function(m){return d.br(),m})},s.prototype.fl=function(t,r){return Z.kn(Object.values(this.ul).map(function(a){return function(){return a.Ho(t,r)}}))},s}(),ol=function(s){function t(r){var a=this;return(a=s.call(this)||this).xa=r,a}return D.__extends(t,s),t}(Co),al=function(){function s(t){this.persistence=t,this.dl=new Ma,this.wl=null}return s.ml=function(t){return new s(t)},Object.defineProperty(s.prototype,"Tl",{get:function(){if(this.wl)return this.wl;throw at()},enumerable:!1,configurable:!0}),s.prototype.Da=function(t,r,a){return this.dl.Da(a,r),this.Tl.delete(a.toString()),Z.resolve()},s.prototype.Na=function(t,r,a){return this.dl.Na(a,r),this.Tl.add(a.toString()),Z.resolve()},s.prototype.Go=function(t,r){return this.Tl.add(r.toString()),Z.resolve()},s.prototype.removeTarget=function(t,r){var a=this;this.dl.Uc(r.targetId).forEach(function(d){return a.Tl.add(d.toString())});var l=this.persistence.Tc();return l.Fa(t,r.targetId).next(function(d){d.forEach(function(m){return a.Tl.add(m.toString())})}).next(function(){return l.Va(t,r)})},s.prototype.ll=function(){this.wl=new Set},s.prototype._l=function(t){var r=this,a=this.persistence.Ec().ra();return Z.forEach(this.Tl,function(l){var d=Y.D(l);return r.El(t,d).next(function(m){m||a.Ar(d)})}).next(function(){return r.wl=null,a.apply(t)})},s.prototype.yc=function(t,r){var a=this;return this.El(t,r).next(function(l){l?a.Tl.delete(r.toString()):a.Tl.add(r.toString())})},s.prototype.hl=function(t){return 0},s.prototype.El=function(t,r){var a=this;return Z.kn([function(){return Z.resolve(a.dl.Ho(r))},function(){return a.persistence.Tc().Ho(t,r)},function(){return a.persistence.fl(t,r)}])},s}(),Ho=function(){function s(t){this.Il=t.Il,this.Al=t.Al}return s.prototype.gu=function(t){this.Rl=t},s.prototype.Tu=function(t){this.gl=t},s.prototype.onMessage=function(t){this.Pl=t},s.prototype.close=function(){this.Al()},s.prototype.send=function(t){this.Il(t)},s.prototype.yl=function(){this.Rl()},s.prototype.Vl=function(t){this.gl(t)},s.prototype.pl=function(t){this.Pl(t)},s}(),ul={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},cl=function(s){function t(r){var a=this;return(a=s.call(this,r)||this).forceLongPolling=r.forceLongPolling,a.W=r.W,a}return D.__extends(t,s),t.prototype.Nl=function(r,a,l,d){return new Promise(function(m,v){var w=new S.XhrIo;w.listenOnce(S.EventType.COMPLETE,function(){try{switch(w.getLastErrorCode()){case S.ErrorCode.NO_ERROR:var C=w.getResponseJson();rt("Connection","XHR received:",JSON.stringify(C)),m(C);break;case S.ErrorCode.TIMEOUT:rt("Connection",'RPC "'+r+'" timed out'),v(new G(j.DEADLINE_EXCEEDED,"Request time out"));break;case S.ErrorCode.HTTP_ERROR:var P=w.getStatus();if(rt("Connection",'RPC "'+r+'" failed with status:',P,"response text:",w.getResponseText()),P>0){var O=w.getResponseJson().error;if(O&&O.status&&O.message){var R=(q=O.status.toLowerCase().replace("_","-"),Object.values(j).indexOf(q)>=0?q:j.UNKNOWN);v(new G(R,O.message))}else v(new G(j.UNKNOWN,"Server responded with status "+w.getStatus()))}else v(new G(j.UNAVAILABLE,"Connection failed."));break;default:at()}}finally{rt("Connection",'RPC "'+r+'" completed.')}var q});var E=JSON.stringify(d);w.send(a,"POST",E,l,15)})},t.prototype.Pu=function(r,a){var l=[this.vl,"/","google.firestore.v1.Firestore","/",r,"/channel"],d=S.createWebChannelTransport(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.U.projectId+"/databases/"+this.U.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.W};this.Cl(m.initMessageHeaders,a),tt.isMobileCordova()||tt.isReactNative()||tt.isElectron()||tt.isIE()||tt.isUWP()||tt.isBrowserExtension()||(m.httpHeadersOverwriteParam="$httpHeaders");var v=l.join("");rt("Connection","Creating WebChannel: "+v,m);var w=d.createWebChannel(v,m),E=!1,C=!1,P=new Ho({Il:function(R){C?rt("Connection","Not sending because WebChannel is closed:",R):(E||(rt("Connection","Opening WebChannel transport."),w.open(),E=!0),rt("Connection","WebChannel sending:",R),w.send(R))},Al:function(){return w.close()}}),O=function(R,B){w.listen(R,function(q){try{B(q)}catch(ct){setTimeout(function(){throw ct},0)}})};return O(S.WebChannel.EventType.OPEN,function(){C||rt("Connection","WebChannel transport opened.")}),O(S.WebChannel.EventType.CLOSE,function(){C||(C=!0,rt("Connection","WebChannel transport closed"),P.Vl())}),O(S.WebChannel.EventType.ERROR,function(R){C||(C=!0,Pn("Connection","WebChannel transport errored:",R),P.Vl(new G(j.UNAVAILABLE,"The operation could not be completed")))}),O(S.WebChannel.EventType.MESSAGE,function(R){var B;if(!C){var q=R.data[0];nt(!!q);var ut=q.error||(null===(B=q[0])||void 0===B?void 0:B.error);if(ut){rt("Connection","WebChannel received error:",ut);var gt=ut.status,bt=function(qt){var Jt=ne[qt];if(void 0!==Jt)return Gs(Jt)}(gt),Dt=ut.message;void 0===bt&&(bt=j.INTERNAL,Dt="Unknown error status: "+gt+" with message "+ut.message),C=!0,P.Vl(new G(bt,Dt)),w.close()}else rt("Connection","WebChannel received:",q),P.pl(q)}}),setTimeout(function(){P.yl()},0),P},t}(function(){function s(t){this.bl=t,this.U=t.U,this.vl=(t.ssl?"https":"http")+"://"+t.host,this.Sl="projects/"+this.U.projectId+"/databases/"+this.U.database+"/documents"}return s.prototype.$u=function(t,r,a,l){var d=this.Dl(t,r);rt("RestConnection","Sending: ",d,a);var m={};return this.Cl(m,l),this.Nl(t,d,m,a).then(function(v){return rt("RestConnection","Received: ",v),v},function(v){throw Pn("RestConnection",t+" failed with error: ",v,"url: ",d,"request:",a),v})},s.prototype.ku=function(t,r,a,l){return this.$u(t,r,a,l)},s.prototype.Cl=function(t,r){if(t["X-Goog-Api-Client"]="gl-js/ fire/7.24.0",t["Content-Type"]="text/plain",r)for(var a in r.Kc)r.Kc.hasOwnProperty(a)&&(t[a]=r.Kc[a])},s.prototype.Dl=function(t,r){return this.vl+"/v1/"+r+":"+ul[t]},s}()),Os=function(){function s(){var t=this;this.Fl=function(){return t.xl()},this.$l=function(){return t.kl()},this.Ml=[],this.Ol()}return s.prototype.Zu=function(t){this.Ml.push(t)},s.prototype.Di=function(){window.removeEventListener("online",this.Fl),window.removeEventListener("offline",this.$l)},s.prototype.Ol=function(){window.addEventListener("online",this.Fl),window.addEventListener("offline",this.$l)},s.prototype.xl=function(){rt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,r=this.Ml;t<r.length;t++)(0,r[t])(0)},s.prototype.kl=function(){rt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,r=this.Ml;t<r.length;t++)(0,r[t])(1)},s.Ln=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},s}(),Wu=function(){function s(){}return s.prototype.Zu=function(t){},s.prototype.Di=function(){},s}();function Wo(s){return new Pe(s,!0)}var qu="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",qo=function(){function s(){}return s.prototype.initialize=function(t){return D.__awaiter(this,void 0,void 0,function(){return D.__generator(this,function(r){switch(r.label){case 0:return this.Sh=this.Ll(t),this.persistence=this.Bl(t),[4,this.persistence.start()];case 1:return r.sent(),this.ql=this.Ul(t),this.ju=this.Ql(t),[2]}})})},s.prototype.Ul=function(t){return null},s.prototype.Ql=function(t){return r=this.persistence,a=new zo,new Pc(r,a,t.Wl);var r,a},s.prototype.Bl=function(t){if(t.persistenceSettings.jl)throw new G(j.FAILED_PRECONDITION,qu);return new sl(al.ml)},s.prototype.Ll=function(t){return new _a},s.prototype.terminate=function(){return D.__awaiter(this,void 0,void 0,function(){return D.__generator(this,function(t){switch(t.label){case 0:return this.ql&&this.ql.stop(),[4,this.Sh.Di()];case 1:return t.sent(),[4,this.persistence.Di()];case 2:return t.sent(),[2]}})})},s.prototype.clearPersistence=function(t,r){throw new G(j.FAILED_PRECONDITION,qu)},s}(),ll=function(s){function t(){return null!==s&&s.apply(this,arguments)||this}return D.__extends(t,s),t.prototype.initialize=function(r){return D.__awaiter(this,void 0,void 0,function(){var a,l=this;return D.__generator(this,function(d){switch(d.label){case 0:return[4,s.prototype.initialize.call(this,r)];case 1:return d.sent(),a=this.Kl.fi,this.Sh instanceof ba?(this.Sh.fi={er:el.bind(null,a),nr:Bu.bind(null,a),sr:He.bind(null,a),pi:Uo.bind(null,a)},[4,this.Sh.start()]):[3,3];case 2:d.sent(),d.label=3;case 3:return[4,this.persistence.Xa(function(m){return D.__awaiter(l,void 0,void 0,function(){return D.__generator(this,function(v){switch(v.label){case 0:return[4,nl(this.Kl.fi,m)];case 1:return v.sent(),this.ql&&(m&&!this.ql.Ei?this.ql.start(this.ju):m||this.ql.stop()),[2]}})})})];case 4:return d.sent(),[2]}})})},t.prototype.Ll=function(r){if(r.persistenceSettings.jl&&r.persistenceSettings.synchronizeTabs){var a=x();if(!ba.Ln(a))throw new G(j.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var l=Cn(r.bl.U,r.bl.persistenceKey);return new ba(a,r.cs,l,r.clientId,r.Wl)}return new _a},t}(function(s){function t(r){var a=this;return(a=s.call(this)||this).Kl=r,a}return D.__extends(t,s),t.prototype.initialize=function(r){return D.__awaiter(this,void 0,void 0,function(){return D.__generator(this,function(a){switch(a.label){case 0:return[4,s.prototype.initialize.call(this,r)];case 1:return a.sent(),[4,Fc(this.ju)];case 2:return a.sent(),[4,this.Kl.initialize(this,r)];case 3:return a.sent(),[4,Va(this.Kl.fi)];case 4:return a.sent(),[4,ks(this.Kl.ph)];case 5:return a.sent(),[2]}})})},t.prototype.Ul=function(r){return new Ic(this.persistence.No.wo,r.cs)},t.prototype.Bl=function(r){var a=Cn(r.bl.U,r.bl.persistenceKey),l=Wo(r.bl.U);return new An(r.persistenceSettings.synchronizeTabs,a,r.clientId,xe.ao(r.persistenceSettings.cacheSizeBytes),r.cs,x(),T(),l,this.Sh,r.persistenceSettings.ka)},t.prototype.Ll=function(r){return new _a},t.prototype.clearPersistence=function(r,a){return function(l){return D.__awaiter(this,void 0,void 0,function(){return D.__generator(this,function(m){switch(m.label){case 0:return ui.Ln()?[4,ui.delete(l+"main")]:[2,Promise.resolve()];case 1:return m.sent(),[2]}})})}(Cn(r,a))},t}(qo)),Ls=function(){function s(){}return s.prototype.initialize=function(t,r){return D.__awaiter(this,void 0,void 0,function(){var a=this;return D.__generator(this,function(l){switch(l.label){case 0:return this.ju?[3,2]:(this.ju=t.ju,this.Sh=t.Sh,this.Ku=this.Gl(r),this.ph=this.zl(r),this.bh=this.Hl(r),this.fi=this.Yl(r),this.Sh.di=function(d){return Ru(a.fi,d,1)},this.ph.Gu.Jl=tl.bind(null,this.fi),[4,La(this.ph,this.fi.Uh)]);case 1:l.sent(),l.label=2;case 2:return[2]}})})},s.prototype.Hl=function(t){return new Ct},s.prototype.Gl=function(t){var a=Wo(t.bl.U),l=new cl(t.bl);return new Hc(t.credentials,l,a)},s.prototype.zl=function(t){var r,a,l,d,m,v=this;return r=this.ju,a=this.Ku,l=t.cs,d=function(w){return Ru(v.fi,w,0)},m=Os.Ln()?new Os:new Wu,new Mu(r,a,l,d,m)},s.prototype.Yl=function(t){return w=!t.persistenceSettings.jl||!t.persistenceSettings.synchronizeTabs,E=new Kc(this.ju,this.ph,this.bh,this.Sh,t.Wl,t.Dh),w&&(E.qh=!0),E;var w,E},s.prototype.terminate=function(){return ku(this.ph)},s}(),Go=function(){function s(t){this.observer=t,this.muted=!1}return s.prototype.next=function(t){this.observer.next&&this.Xl(this.observer.next,t)},s.prototype.error=function(t){this.observer.error?this.Xl(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},s.prototype.Zl=function(){this.muted=!0},s.prototype.Xl=function(t,r){var a=this;this.muted||setTimeout(function(){a.muted||t(r)},0)},s}(),Ua=function(s){!function(r,a,l,d){if(!(a instanceof Array)||a.length<1)throw new G(j.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+Qn(1,"element")+".")}(0,s);for(var t=0;t<s.length;++t)if(Nt("FieldPath","string",t,s[t]),0===s[t].length)throw new G(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.t_=new Q(s)},is=function(s){function t(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return s.call(this,r)||this}return D.__extends(t,s),t.documentId=function(){return new t(Q.v().R())},t.prototype.isEqual=function(r){if(!(r instanceof t))throw xn("isEqual","FieldPath",1,r);return this.t_.isEqual(r.t_)},t}(Ua),hl=new RegExp("[~\\*/\\[\\]]"),rs=function(s){this.e_=s},go=function(s){function t(){return null!==s&&s.apply(this,arguments)||this}return D.__extends(t,s),t.prototype.n_=function(r){if(2!==r.s_)throw r.i_(1===r.s_?this.e_+"() can only appear at the top level of your update data":this.e_+"() cannot be used with set() unless you pass {merge:true}");return r.We.push(r.path),null},t.prototype.isEqual=function(r){return r instanceof t},t}(rs);function Gu(s,t,r){return new Ha({s_:3,r_:t.settings.r_,methodName:s.e_,o_:r},t.U,t.serializer,t.ignoreUndefinedProperties)}var fl=function(s){function t(){return null!==s&&s.apply(this,arguments)||this}return D.__extends(t,s),t.prototype.n_=function(r){return new ir(r.path,new ln)},t.prototype.isEqual=function(r){return r instanceof t},t}(rs),Ba=function(s){function t(r,a){var l=this;return(l=s.call(this,r)||this).a_=a,l}return D.__extends(t,s),t.prototype.n_=function(r){var a=Gu(this,r,!0),l=this.a_.map(function(m){return os(m,a)}),d=new _e(l);return new ir(r.path,d)},t.prototype.isEqual=function(r){return this===r},t}(rs),dl=function(s){function t(r,a){var l=this;return(l=s.call(this,r)||this).a_=a,l}return D.__extends(t,s),t.prototype.n_=function(r){var a=Gu(this,r,!0),l=this.a_.map(function(m){return os(m,a)}),d=new Ei(l);return new ir(r.path,d)},t.prototype.isEqual=function(r){return this===r},t}(rs),pl=function(s){function t(r,a){var l=this;return(l=s.call(this,r)||this).c_=a,l}return D.__extends(t,s),t.prototype.n_=function(r){var a=new Vn(r.serializer,ms(r.serializer,this.c_));return new ir(r.path,a)},t.prototype.isEqual=function(r){return this===r},t}(rs),Yo=function(){function s(t,r){if($("GeoPoint",arguments,2),Nt("GeoPoint","number",1,t),Nt("GeoPoint","number",2,r),!isFinite(t)||t<-90||t>90)throw new G(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new G(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this.u_=t,this.h_=r}return Object.defineProperty(s.prototype,"latitude",{get:function(){return this.u_},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"longitude",{get:function(){return this.h_},enumerable:!1,configurable:!0}),s.prototype.isEqual=function(t){return this.u_===t.u_&&this.h_===t.h_},s.prototype.toJSON=function(){return{latitude:this.u_,longitude:this.h_}},s.prototype.Y=function(t){return wt(this.u_,t.u_)||wt(this.h_,t.h_)},s}(),Ns=function(s){this.l_=s},gl=/^__.*__$/,Rs=function(s,t,r){this.__=s,this.f_=t,this.d_=r},Yu=function(){function s(t,r,a){this.data=t,this.We=r,this.fieldTransforms=a}return s.prototype.w_=function(t,r){var a=[];return a.push(null!==this.We?new fn(t,this.data,this.We,r):new Si(t,this.data,r)),this.fieldTransforms.length>0&&a.push(new oi(t,this.fieldTransforms)),a},s}(),$u=function(){function s(t,r,a){this.data=t,this.We=r,this.fieldTransforms=a}return s.prototype.w_=function(t,r){var a=[new fn(t,this.data,this.We,r)];return this.fieldTransforms.length>0&&a.push(new oi(t,this.fieldTransforms)),a},s}();function za(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw at()}}var Ha=function(){function s(t,r,a,l,d,m){this.settings=t,this.U=r,this.serializer=a,this.ignoreUndefinedProperties=l,void 0===d&&this.m_(),this.fieldTransforms=d||[],this.We=m||[]}return Object.defineProperty(s.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"s_",{get:function(){return this.settings.s_},enumerable:!1,configurable:!0}),s.prototype.T_=function(t){return new s(Object.assign(Object.assign({},this.settings),t),this.U,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.We)},s.prototype.E_=function(t){var r,a=null===(r=this.path)||void 0===r?void 0:r.child(t),l=this.T_({path:a,o_:!1});return l.I_(t),l},s.prototype.A_=function(t){var r,a=null===(r=this.path)||void 0===r?void 0:r.child(t),l=this.T_({path:a,o_:!1});return l.m_(),l},s.prototype.R_=function(t){return this.T_({path:void 0,o_:!0})},s.prototype.i_=function(t){return qa(t,this.settings.methodName,this.settings.g_||!1,this.path,this.settings.r_)},s.prototype.contains=function(t){return void 0!==this.We.find(function(r){return t.T(r)})||void 0!==this.fieldTransforms.find(function(r){return t.T(r.field)})},s.prototype.m_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.I_(this.path.get(t))},s.prototype.I_=function(t){if(0===t.length)throw this.i_("Document fields must not be empty");if(za(this.s_)&&gl.test(t))throw this.i_('Document fields cannot begin and end with "__"')},s}(),$o=function(){function s(t,r,a){this.U=t,this.ignoreUndefinedProperties=r,this.serializer=a||Wo(t)}return s.prototype.P_=function(t,r,a,l){return void 0===l&&(l=!1),new Ha({s_:t,methodName:r,r_:a,path:Q.P(),o_:!1,g_:l},this.U,this.serializer,this.ignoreUndefinedProperties)},s}();function ss(s,t,r,a,l,d){void 0===d&&(d={});var m=s.P_(d.merge||d.mergeFields?2:0,t,r,l);Xo("Data must be an object, but it was:",m,a);var v,w,E=Xu(a,m);if(d.merge)v=new $e(m.We),w=m.fieldTransforms;else if(d.mergeFields){for(var C=[],P=0,O=d.mergeFields;P<O.length;P++){var R=O[P],B=void 0;if(R instanceof Ua)B=R.t_;else{if("string"!=typeof R)throw at();B=Zo(t,R,r)}if(!m.contains(B))throw new G(j.INVALID_ARGUMENT,"Field '"+B+"' is specified in your field mask but missing from your input data.");Ga(C,B)||C.push(B)}v=new $e(C),w=m.fieldTransforms.filter(function(q){return v.Ye(q.field)})}else v=null,w=m.fieldTransforms;return new Yu(new Ve(E),v,w)}function Wa(s,t,r,a){var l=s.P_(1,t,r);Xo("Data must be an object, but it was:",l,a);var d=[],m=new zr;mi(a,function(w,E){var C=Zo(t,w,r),P=l.A_(C);if(E instanceof go||E instanceof Ns&&E.l_ instanceof go)d.push(C);else{var O=os(E,P);null!=O&&(d.push(C),m.set(C,O))}});var v=new $e(d);return new $u(m.Xe(),v,l.fieldTransforms)}function Ko(s,t,r,a,l,d){var m=s.P_(1,t,r),v=[Fs(t,a,r)],w=[l];if(d.length%2!=0)throw new G(j.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var E=0;E<d.length;E+=2)v.push(Fs(t,d[E])),w.push(d[E+1]);for(var C=[],P=new zr,O=v.length-1;O>=0;--O)if(!Ga(C,v[O])){var R=v[O],B=w[O],q=m.A_(R);if(B instanceof go||B instanceof Ns&&B.l_ instanceof go)C.push(R);else{var ct=os(B,q);null!=ct&&(C.push(R),P.set(R,ct))}}var ut=new $e(C);return new $u(P.Xe(),ut,m.fieldTransforms)}function Ku(s,t,r,a){return void 0===a&&(a=!1),os(r,s.P_(a?4:3,t))}function os(s,t){if(s instanceof Ns&&(s=s.l_),Zu(s))return Xo("Unsupported field value:",t,s),Xu(s,t);if(s instanceof rs)return function(r,a){if(!za(a.s_))throw a.i_(r.e_+"() can only be used with update() and set()");if(!a.path)throw a.i_(r.e_+"() is not currently supported inside arrays");var l=r.n_(a);l&&a.fieldTransforms.push(l)}(s,t),null;if(t.path&&t.We.push(t.path),s instanceof Array){if(t.settings.o_&&4!==t.s_)throw t.i_("Nested arrays are not supported");return function(r,a){for(var l=[],d=0,m=0,v=r;m<v.length;m++){var w=os(v[m],a.R_(d));null==w&&(w={nullValue:"NULL_VALUE"}),l.push(w),d++}return{arrayValue:{values:l}}}(s,t)}return function(r,a){if(null===r)return{nullValue:"NULL_VALUE"};if("number"==typeof r)return ms(a.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){var l=Qt.fromDate(r);return{timestampValue:xi(a.serializer,l)}}if(r instanceof Qt){var d=new Qt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:xi(a.serializer,d)}}if(r instanceof Yo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zi)return{bytesValue:Zi(a.serializer,r.q)};if(r instanceof Rs){var m=a.U,v=r.__;if(!v.isEqual(m))throw a.i_("Document reference is for database "+v.projectId+"/"+v.database+" but should be for database "+m.projectId+"/"+m.database);return{referenceValue:ie(r.__||a.U,r.f_.path)}}if(void 0===r&&a.ignoreUndefinedProperties)return null;throw a.i_("Unsupported field value: "+wn(r))}(s,t)}function Xu(s,t){var r={};return wr(s)?t.path&&t.path.length>0&&t.We.push(t.path):mi(s,function(a,l){var d=os(l,t.E_(a));null!=d&&(r[a]=d)}),{mapValue:{fields:r}}}function Zu(s){return!("object"!=typeof s||null===s||s instanceof Array||s instanceof Date||s instanceof Qt||s instanceof Yo||s instanceof zi||s instanceof Rs||s instanceof rs)}function Xo(s,t,r){if(!Zu(r)||!Ir(r)){var a=wn(r);throw t.i_("an object"===a?s+" a custom object":s+" "+a)}}function Fs(s,t,r){if(t instanceof Ua)return t.t_;if("string"==typeof t)return Zo(s,t);throw qa("Field path arguments must be of type string or FieldPath.",s,!1,void 0,r)}function Zo(s,t,r){try{return function(l){if(l.search(hl)>=0)throw new G(j.INVALID_ARGUMENT,"Invalid field path ("+l+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(is.bind.apply(is,D.__spreadArrays([void 0],l.split("."))))}catch(d){throw new G(j.INVALID_ARGUMENT,"Invalid field path ("+l+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(t).t_}catch(l){throw qa((a=l)instanceof Error?a.message:a.toString(),s,!1,void 0,r)}var a}function qa(s,t,r,a,l){var d=a&&!a.m(),m=void 0!==l,v="Function "+t+"() called with invalid data";r&&(v+=" (via `toFirestore()`)");var w="";return(d||m)&&(w+=" (found",d&&(w+=" in field "+a),m&&(w+=" in document "+l),w+=")"),new G(j.INVALID_ARGUMENT,(v+=". ")+s+w)}function Ga(s,t){return s.some(function(r){return r.isEqual(t)})}var Qo=function(){function s(t){this.Ku=t,this.y_=new Map,this.mutations=[],this.V_=!1,this.p_=null,this.b_=new Set}return s.prototype.v_=function(t){return D.__awaiter(this,void 0,void 0,function(){var r,a=this;return D.__generator(this,function(l){switch(l.label){case 0:if(this.S_(),this.mutations.length>0)throw new G(j.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(d,m){return D.__awaiter(this,void 0,void 0,function(){var v,w,E,C,P,O;return D.__generator(this,function(R){switch(R.label){case 0:return v=J(d),w=Ji(v.serializer)+"/documents",E={documents:m.map(function(B){return Oe(v.serializer,B)})},[4,v.ku("BatchGetDocuments",w,E)];case 1:return C=R.sent(),P=new Map,C.forEach(function(B){var ct,ut,q=(ct=v.serializer,"found"in(ut=B)?function(gt,bt){nt(!!bt.found);var Dt=Ye(gt,bt.found.name),qt=Ce(bt.found.updateTime),Jt=new Ve({mapValue:{fields:bt.found.fields}});return new Ft(Dt,qt,Jt,{})}(ct,ut):"missing"in ut?function(gt,bt){nt(!!bt.missing),nt(!!bt.readTime);var Dt=Ye(gt,bt.missing),qt=Ce(bt.readTime);return new le(Dt,qt)}(ct,ut):at());P.set(q.key.toString(),q)}),O=[],[2,(m.forEach(function(B){var q=P.get(B.toString());nt(!!q),O.push(q)}),O)]}})})}(this.Ku,t)];case 1:return[2,((r=l.sent()).forEach(function(d){d instanceof le||d instanceof Ft?a.D_(d):at()}),r)]}})})},s.prototype.set=function(t,r){this.write(r.w_(t,this.Ge(t))),this.b_.add(t.toString())},s.prototype.update=function(t,r){try{this.write(r.w_(t,this.C_(t)))}catch(a){this.p_=a}this.b_.add(t.toString())},s.prototype.delete=function(t){this.write([new sr(t,this.Ge(t))]),this.b_.add(t.toString())},s.prototype.commit=function(){return D.__awaiter(this,void 0,void 0,function(){var t,r=this;return D.__generator(this,function(a){switch(a.label){case 0:if(this.S_(),this.p_)throw this.p_;return t=this.y_,this.mutations.forEach(function(l){t.delete(l.key.toString())}),t.forEach(function(l,d){var m=Y.D(d);r.mutations.push(new eo(m,r.Ge(m)))}),[4,function(l,d){return D.__awaiter(this,void 0,void 0,function(){var m,v,w;return D.__generator(this,function(E){switch(E.label){case 0:return m=J(l),v=Ji(m.serializer)+"/documents",w={writes:d.map(function(C){return Sn(m.serializer,C)})},[4,m.$u("Commit",v,w)];case 1:return E.sent(),[2]}})})}(this.Ku,this.mutations)];case 1:return a.sent(),this.V_=!0,[2]}})})},s.prototype.D_=function(t){var r;if(t instanceof Ft)r=t.version;else{if(!(t instanceof le))throw at();r=Mt.min()}var a=this.y_.get(t.key.toString());if(a){if(!r.isEqual(a))throw new G(j.ABORTED,"Document version changed between two reads.")}else this.y_.set(t.key.toString(),r)},s.prototype.Ge=function(t){var r=this.y_.get(t.toString());return!this.b_.has(t.toString())&&r?we.updateTime(r):we.ze()},s.prototype.C_=function(t){var r=this.y_.get(t.toString());if(!this.b_.has(t.toString())&&r){if(r.isEqual(Mt.min()))throw new G(j.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return we.updateTime(r)}return we.exists(!0)},s.prototype.write=function(t){this.S_(),this.mutations=this.mutations.concat(t)},s.prototype.S_=function(){},s}(),Qu=function(){function s(t,r,a,l){this.cs=t,this.Ku=r,this.updateFunction=a,this.ls=l,this.N_=5,this.ys=new Is(this.cs,"transaction_retry")}return s.prototype.run=function(){this.F_()},s.prototype.F_=function(){var t=this;this.ys.gn(function(){return D.__awaiter(t,void 0,void 0,function(){var r,a,l=this;return D.__generator(this,function(d){return r=new Qo(this.Ku),(a=this.x_(r))&&a.then(function(m){l.cs.ws(function(){return r.commit().then(function(){l.ls.resolve(m)}).catch(function(v){l.k_(v)})})}).catch(function(m){l.k_(m)}),[2]})})})},s.prototype.x_=function(t){try{var r=this.updateFunction(t);return!un(r)&&r.catch&&r.then?r:(this.ls.reject(Error("Transaction callback must return a Promise")),null)}catch(a){return this.ls.reject(a),null}},s.prototype.k_=function(t){var r=this;this.N_>0&&this.M_(t)?(this.N_-=1,this.cs.ws(function(){return r.F_(),Promise.resolve()})):this.ls.reject(t)},s.prototype.M_=function(t){if("FirebaseError"===t.name){var r=t.code;return"aborted"===r||"failed-precondition"===r||!qs(r)}return!1},s}(),ml=function(){function s(t,r){this.credentials=t,this.cs=r,this.clientId=Sr.k(),this.O_=new Ue}return s.prototype.start=function(t,r,a,l){var d=this;this.L_(),this.bl=t;var m=new Ue,v=!1;return this.credentials.Hc(function(w){if(!v)return v=!0,rt("FirestoreClient","Initializing. user=",w.uid),d.B_(r,a,l,w,m).then(d.O_.resolve,d.O_.reject);d.cs.Cs(function(){return function(E,C){return D.__awaiter(this,void 0,void 0,function(){var P,O;return D.__generator(this,function(R){switch(R.label){case 0:return(P=J(E)).cs.xs(),rt("RemoteStore","RemoteStore received new credentials"),O=yr(P),P.Yu.add(3),[4,Ri(P)];case 1:return R.sent(),O&&P.th.set("Unknown"),[4,P.Gu.Jl(C)];case 2:return R.sent(),P.Yu.delete(3),[4,fo(P)];case 3:return R.sent(),[2]}})})}(d.ph,w)})}),this.cs.ws(function(){return d.O_.promise}),m.promise},s.prototype.enableNetwork=function(){var t=this;return this.L_(),this.cs.enqueue(function(){return t.persistence.tc(!0),(a=J(t.ph)).Yu.delete(0),fo(a);var a})},s.prototype.B_=function(t,r,a,l,d){return D.__awaiter(this,void 0,void 0,function(){var m,v,w=this;return D.__generator(this,function(E){switch(E.label){case 0:return E.trys.push([0,3,,4]),[4,t.initialize(m={cs:this.cs,bl:this.bl,clientId:this.clientId,credentials:this.credentials,Wl:l,Dh:100,persistenceSettings:a})];case 1:return E.sent(),[4,r.initialize(t,m)];case 2:return E.sent(),this.persistence=t.persistence,this.Sh=t.Sh,this.ju=t.ju,this.ql=t.ql,this.Ku=r.Ku,this.ph=r.ph,this.fi=r.fi,this.q_=r.bh,this.q_.Us=Xc.bind(null,this.fi),this.q_.js=Zc.bind(null,this.fi),this.persistence.Za(function(){return D.__awaiter(w,void 0,void 0,function(){return D.__generator(this,function(C){switch(C.label){case 0:return[4,this.terminate()];case 1:return C.sent(),[2]}})})}),d.resolve(),[3,4];case 3:if(v=E.sent(),d.reject(v),!this.U_(v))throw v;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+v),this.B_(new qo,new Ls,{jl:!1},l,d))];case 4:return[2]}})})},s.prototype.U_=function(t){return"FirebaseError"===t.name?t.code===j.FAILED_PRECONDITION||t.code===j.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},s.prototype.L_=function(){if(this.cs.ps)throw new G(j.FAILED_PRECONDITION,"The client has already been terminated.")},s.prototype.disableNetwork=function(){var t=this;return this.L_(),this.cs.enqueue(function(){return t.persistence.tc(!1),function(r){return D.__awaiter(this,void 0,void 0,function(){var a;return D.__generator(this,function(l){switch(l.label){case 0:return(a=J(r)).Yu.add(0),[4,Ri(a)];case 1:return l.sent(),a.th.set("Offline"),[2]}})})}(t.ph)})},s.prototype.terminate=function(){var t=this;this.cs.Ds();var r=new Ue;return this.cs.bs(function(){return D.__awaiter(t,void 0,void 0,function(){var a,l;return D.__generator(this,function(d){switch(d.label){case 0:return d.trys.push([0,4,,5]),this.ql&&this.ql.stop(),[4,ku(this.ph)];case 1:return d.sent(),[4,this.Sh.Di()];case 2:return d.sent(),[4,this.persistence.Di()];case 3:return d.sent(),this.credentials.Yc(),r.resolve(),[3,5];case 4:return a=d.sent(),l=it(a,"Failed to shutdown persistence"),r.reject(l),[3,5];case 5:return[2]}})})}),r.promise},s.prototype.waitForPendingWrites=function(){var t=this;this.L_();var r=new Ue;return this.cs.ws(function(){return function(a,l){return D.__awaiter(this,void 0,void 0,function(){var d,m,v,w,E;return D.__generator(this,function(C){switch(C.label){case 0:yr((d=J(a)).ph)||rt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),C.label=1;case 1:return C.trys.push([1,3,,4]),[4,(P=d.ju,O=J(P),O.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(R){return O.Sr.qo(R)}))];case 2:return-1===(m=C.sent())?[2,void l.resolve()]:((v=d.Lh.get(m)||[]).push(l),d.Lh.set(m,v),[3,4]);case 3:return w=C.sent(),E=it(w,"Initialization of waitForPendingWrites() operation failed"),l.reject(E),[3,4];case 4:return[2]}var P,O})})}(t.fi,r)}),r.promise},s.prototype.listen=function(t,r,a){var l=this;this.L_();var d=new Go(a),m=new hr(t,d,r);return this.cs.ws(function(){return pe(l.q_,m)}),function(){d.Zl(),l.cs.ws(function(){return Ke(l.q_,m)})}},s.prototype.Q_=function(t){return D.__awaiter(this,void 0,void 0,function(){var r,a=this;return D.__generator(this,function(l){switch(l.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return l.sent(),r=new Ue,[2,(this.cs.ws(function(){return function(d,m,v){return D.__awaiter(this,void 0,void 0,function(){var w,E,C;return D.__generator(this,function(P){switch(P.label){case 0:return P.trys.push([0,2,,3]),[4,(O=d,R=m,B=J(O),B.persistence.runTransaction("read document","readonly",function(q){return B.Cc.Cr(q,R)}))];case 1:return(w=P.sent())instanceof Ft?v.resolve(w):w instanceof le?v.resolve(null):v.reject(new G(j.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return E=P.sent(),C=it(E,"Failed to get document '"+m+" from cache"),v.reject(C),[3,3];case 3:return[2]}var O,R,B})})}(a.ju,t,r)}),r.promise)]}})})},s.prototype.W_=function(t,r){return void 0===r&&(r={}),D.__awaiter(this,void 0,void 0,function(){var a,l=this;return D.__generator(this,function(d){switch(d.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return d.sent(),a=new Ue,[2,(this.cs.ws(function(){return m=l.q_,v=l.cs,w=t,E=r,C=a,P=new Go({next:function(R){v.ws(function(){return Ke(m,O)});var B=R.docs.has(w);!B&&R.fromCache?C.reject(new G(j.UNAVAILABLE,"Failed to get document because the client is offline.")):B&&R.fromCache&&E&&"server"===E.source?C.reject(new G(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):C.resolve(R)},error:function(R){return C.reject(R)}}),O=new hr(Ti(w.path),P,{includeMetadataChanges:!0,Xs:!0}),pe(m,O);var m,v,w,E,C,P,O}),a.promise)]}})})},s.prototype.j_=function(t){return D.__awaiter(this,void 0,void 0,function(){var r,a=this;return D.__generator(this,function(l){switch(l.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return l.sent(),r=new Ue,[2,(this.cs.ws(function(){return function(d,m,v){return D.__awaiter(this,void 0,void 0,function(){var w,E,C,P,O,R;return D.__generator(this,function(B){switch(B.label){case 0:return B.trys.push([0,2,,3]),[4,Cs(d,m,!0)];case 1:return w=B.sent(),E=new Nu(m,w.Fc),C=E.wh(w.documents),P=E.yr(C,!1),v.resolve(P.snapshot),[3,3];case 2:return O=B.sent(),R=it(O,"Failed to execute query '"+m+" against cache"),v.reject(R),[3,3];case 3:return[2]}})})}(a.ju,t,r)}),r.promise)]}})})},s.prototype.K_=function(t,r){return void 0===r&&(r={}),D.__awaiter(this,void 0,void 0,function(){var a,l=this;return D.__generator(this,function(d){switch(d.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return d.sent(),a=new Ue,[2,(this.cs.ws(function(){return m=l.q_,v=l.cs,w=t,E=r,C=a,P=new Go({next:function(R){v.ws(function(){return Ke(m,O)}),R.fromCache&&"server"===E.source?C.reject(new G(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):C.resolve(R)},error:function(R){return C.reject(R)}}),O=new hr(w,P,{includeMetadataChanges:!0,Xs:!0}),pe(m,O);var m,v,w,E,C,P,O}),a.promise)]}})})},s.prototype.write=function(t){var r=this;this.L_();var a=new Ue;return this.cs.ws(function(){return function(l,d,m){return D.__awaiter(this,void 0,void 0,function(){var v,w,E,C;return D.__generator(this,function(P){switch(P.label){case 0:v=Va(l),P.label=1;case 1:return P.trys.push([1,5,,6]),[4,(O=v.ju,R=d,q=J(O),ct=Qt.now(),ut=R.reduce(function(gt,bt){return gt.add(bt.key)},Kt()),q.persistence.runTransaction("Locally write mutations","readwrite",function(gt){return q.Cc.kr(gt,ut).next(function(bt){B=bt;for(var Dt=[],qt=0,Jt=R;qt<Jt.length;qt++){var pi=Jt[qt],Vi=Zs(pi,B.get(pi.key));null!=Vi&&Dt.push(new fn(pi.key,Vi,ce(Vi.proto.mapValue),we.exists(!0)))}return q.Sr.ko(gt,ct,Dt,R)})}).then(function(gt){var bt=gt.lr(B);return{batchId:gt.batchId,wr:bt}}))];case 2:return w=P.sent(),v.Sh.xi(w.batchId),function(O,R,B){var q=O.Oh[O.currentUser.ti()];q||(q=new ve(wt)),q=q.ot(R,B),O.Oh[O.currentUser.ti()]=q}(v,w.batchId,m),[4,ns(v,w.wr)];case 3:return P.sent(),[4,ks(v.ph)];case 4:return P.sent(),[3,6];case 5:return E=P.sent(),C=it(E,"Failed to persist write"),m.reject(C),[3,6];case 6:return[2]}var O,R,B,q,ct,ut})})}(r.fi,t,a)}),a.promise},s.prototype.U=function(){return this.bl.U},s.prototype.G_=function(t){var r=this;this.L_();var a=new Go(t);return this.cs.ws(function(){return D.__awaiter(r,void 0,void 0,function(){return D.__generator(this,function(l){return[2,(d=this.q_,m=a,J(d).qs.add(m),void m.next())];var d,m})})}),function(){a.Zl(),r.cs.ws(function(){return D.__awaiter(r,void 0,void 0,function(){return D.__generator(this,function(l){return[2,(d=this.q_,m=a,void J(d).qs.delete(m))];var d,m})})})}},Object.defineProperty(s.prototype,"z_",{get:function(){return this.cs.ps},enumerable:!1,configurable:!0}),s.prototype.transaction=function(t){var r=this;this.L_();var a=new Ue;return this.cs.ws(function(){return new Qu(r.cs,r.Ku,t,a).run(),Promise.resolve()}),a.promise},s}();function mo(s){return function(t,r){if("object"!=typeof t||null===t)return!1;for(var a=t,l=0,d=["next","error","complete"];l<d.length;l++){var m=d[l];if(m in a&&"function"==typeof a[m])return!0}return!1}(s)}var as=function(){function s(t,r,a,l,d){this.U=t,this.timestampsInSnapshots=r,this.H_=a,this.Y_=l,this.J_=d}return s.prototype.X_=function(t){switch(Fn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Wt(t.integerValue||t.doubleValue);case 3:return this.Z_(t.timestampValue);case 4:return this.tf(t);case 5:return t.stringValue;case 6:return this.J_(ei(t.bytesValue));case 7:return this.ef(t.referenceValue);case 8:return this.nf(t.geoPointValue);case 9:return this.sf(t.arrayValue);case 10:return this.if(t.mapValue);default:throw at()}},s.prototype.if=function(t){var r=this,a={};return mi(t.fields||{},function(l,d){a[l]=r.X_(d)}),a},s.prototype.nf=function(t){return new Yo(Wt(t.latitude),Wt(t.longitude))},s.prototype.sf=function(t){var r=this;return(t.values||[]).map(function(a){return r.X_(a)})},s.prototype.tf=function(t){switch(this.H_){case"previous":var r=kr(t);return null==r?null:this.X_(r);case"estimate":return this.Z_(Ee(t));default:return null}},s.prototype.Z_=function(t){var r=Vt(t),a=new Qt(r.seconds,r.nanos);return this.timestampsInSnapshots?a:a.toDate()},s.prototype.ef=function(t){var r=W.g(t);nt(zt(r));var a=new Ws(r.get(1),r.get(3)),l=new Y(r.u(5));return a.isEqual(this.U)||Gt("Document "+l+" contains a document reference within a different database ("+a.projectId+"/"+a.database+") which is not supported. It will be treated as a reference in the current database ("+this.U.projectId+"/"+this.U.database+") instead."),this.Y_(l)},s}(),Ya=xe.ho,Fi=function(){function s(t){var r,a,l,d,m;if(void 0===t.host){if(void 0!==t.ssl)throw new G(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else fe("settings","non-empty string","host",t.host),this.host=t.host,ae("settings","boolean","ssl",t.ssl),this.ssl=null===(r=t.ssl)||void 0===r||r;if(an("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling","experimentalAutoDetectLongPolling","ignoreUndefinedProperties"]),ae("settings","object","credentials",t.credentials),this.credentials=t.credentials,ae("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),ae("settings","boolean","ignoreUndefinedProperties",t.ignoreUndefinedProperties),!0===t.timestampsInSnapshots?Gt("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===t.timestampsInSnapshots&&Gt("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(a=t.timestampsInSnapshots)||void 0===a||a,this.ignoreUndefinedProperties=null!==(l=t.ignoreUndefinedProperties)&&void 0!==l&&l,ae("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=xe._o;else{if(t.cacheSizeBytes!==Ya&&t.cacheSizeBytes<xe.lo)throw new G(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+xe.lo);this.cacheSizeBytes=t.cacheSizeBytes}ae("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.experimentalForceLongPolling=null!==(d=t.experimentalForceLongPolling)&&void 0!==d&&d,ae("settings","boolean","experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalAutoDetectLongPolling=null!==(m=t.experimentalAutoDetectLongPolling)&&void 0!==m&&m,function(v,w,E,C){if(!0===w&&!0===C)throw new G(j.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")}(0,t.experimentalForceLongPolling,0,t.experimentalAutoDetectLongPolling)}return s.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},s}(),Jo=function(){function s(t,r,a,l){var d=this;if(void 0===a&&(a=new qo),void 0===l&&(l=new Ls),this.rf=a,this.af=l,this.cf=null,this.uf=new U,this.INTERNAL={delete:function(){return D.__awaiter(d,void 0,void 0,function(){return D.__generator(this,function(w){switch(w.label){case 0:return this.hf(),[4,this.lf.terminate()];case 1:return w.sent(),[2]}})})}},"object"==typeof t.options){var m=t;this.cf=m,this.__=s._f(m),this.ff=m.name,this.df=new Vc(r)}else{var v=t;if(!v.projectId)throw new G(j.INVALID_ARGUMENT,"Must provide projectId");this.__=new Ws(v.projectId,v.database),this.ff="[DEFAULT]",this.df=new Tu}this.wf=new Fi({})}return Object.defineProperty(s.prototype,"mf",{get:function(){return this.Tf||(this.Tf=new $o(this.__,this.wf.ignoreUndefinedProperties)),this.Tf},enumerable:!1,configurable:!0}),s.prototype.settings=function(t){$("Firestore.settings",arguments,1),Nt("Firestore.settings","object",1,t),t.merge&&delete(t=Object.assign(Object.assign({},this.wf),t)).merge;var r=new Fi(t);if(this.lf&&!this.wf.isEqual(r))throw new G(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this.wf=r,void 0!==r.credentials&&(this.df=function(a){if(!a)return new Tu;switch(a.type){case"gapi":var l=a.client;return nt(!("object"!=typeof l||null===l||!l.auth||!l.auth.getAuthHeaderValueForFirstParty)),new Au(l,a.sessionIndex||"0");case"provider":return a.client;default:throw new G(j.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(r.credentials))},s.prototype.enableNetwork=function(){return this.hf(),this.lf.enableNetwork()},s.prototype.disableNetwork=function(){return this.hf(),this.lf.disableNetwork()},s.prototype.enablePersistence=function(t){var r,a;if(this.lf)throw new G(j.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var l=!1,d=!1;if(t&&(void 0!==t.experimentalTabSynchronization&&Gt("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),l=null!==(a=null!==(r=t.synchronizeTabs)&&void 0!==r?r:t.experimentalTabSynchronization)&&void 0!==a&&a,d=!!t.experimentalForceOwningTab&&t.experimentalForceOwningTab,l&&d))throw new G(j.INVALID_ARGUMENT,"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.");return this.Ef(this.rf,this.af,{jl:!0,cacheSizeBytes:this.wf.cacheSizeBytes,synchronizeTabs:l,ka:d})},s.prototype.clearPersistence=function(){return D.__awaiter(this,void 0,void 0,function(){var t,r=this;return D.__generator(this,function(a){if(void 0!==this.lf&&!this.lf.z_)throw new G(j.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");return t=new Ue,[2,(this.uf.bs(function(){return D.__awaiter(r,void 0,void 0,function(){var l;return D.__generator(this,function(d){switch(d.label){case 0:return d.trys.push([0,2,,3]),[4,this.rf.clearPersistence(this.__,this.ff)];case 1:return d.sent(),t.resolve(),[3,3];case 2:return l=d.sent(),t.reject(l),[3,3];case 3:return[2]}})})}),t.promise)]})})},s.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(s.prototype,"If",{get:function(){return this.hf(),this.lf.z_},enumerable:!1,configurable:!0}),s.prototype.waitForPendingWrites=function(){return this.hf(),this.lf.waitForPendingWrites()},s.prototype.onSnapshotsInSync=function(t){return this.hf(),mo(t)?this.lf.G_(t):(Nt("Firestore.onSnapshotsInSync","function",1,t),this.lf.G_({next:t}))},s.prototype.hf=function(){return this.lf||this.Ef(new qo,new Ls,{jl:!1}),this.lf},s.prototype.Af=function(){return new cu(this.__,this.ff,this.wf.host,this.wf.ssl,this.wf.experimentalForceLongPolling,this.wf.experimentalAutoDetectLongPolling)},s.prototype.Ef=function(t,r,a){var l=this.Af();return this.lf=new ml(this.df,this.uf),this.lf.start(l,t,r,a)},s._f=function(t){if(!Object.prototype.hasOwnProperty.call(t.options,"projectId"))throw new G(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var a=t.options.projectId;if(!a||"string"!=typeof a)throw new G(j.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new Ws(a)},Object.defineProperty(s.prototype,"app",{get:function(){if(!this.cf)throw new G(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.cf},enumerable:!1,configurable:!0}),s.prototype.collection=function(t){return $("Firestore.collection",arguments,1),Nt("Firestore.collection","non-empty string",1,t),this.hf(),new js(W.g(t),this,null)},s.prototype.doc=function(t){return $("Firestore.doc",arguments,1),Nt("Firestore.doc","non-empty string",1,t),this.hf(),yn.Rf(W.g(t),this,null)},s.prototype.collectionGroup=function(t){if($("Firestore.collectionGroup",arguments,1),Nt("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new G(j.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.hf(),new na((r=t,new Bn(W.P(),r)),this,null);var r},s.prototype.runTransaction=function(t){var r=this;return $("Firestore.runTransaction",arguments,1),Nt("Firestore.runTransaction","function",1,t),this.hf().transaction(function(a){return t(new Ju(r,a))})},s.prototype.batch=function(){return this.hf(),new tc(this)},Object.defineProperty(s,"logLevel",{get:function(){switch(Dn()){case Lt.LogLevel.DEBUG:return"debug";case Lt.LogLevel.ERROR:return"error";case Lt.LogLevel.SILENT:return"silent";case Lt.LogLevel.WARN:return"warn";case Lt.LogLevel.INFO:return"info";case Lt.LogLevel.VERBOSE:return"verbose";default:return"error"}},enumerable:!1,configurable:!0}),s.setLogLevel=function(t){$("Firestore.setLogLevel",arguments,1),On("setLogLevel",["debug","error","silent","warn","info","verbose"],1,t),Ie.setLogLevel(t)},s.prototype.gf=function(){return this.wf.timestampsInSnapshots},s.prototype.Pf=function(){return this.wf},s}(),Ju=function(){function s(t,r){this.yf=t,this.Vf=r}return s.prototype.get=function(t){var r=this;$("Transaction.get",arguments,1);var a=ji("Transaction.get",t,this.yf);return this.Vf.v_([a.f_]).then(function(l){if(!l||1!==l.length)return at();var d=l[0];if(d instanceof le)return new us(r.yf,a.f_,null,!1,!1,a.d_);if(d instanceof Ft)return new us(r.yf,a.f_,d,!1,!1,a.d_);throw at()})},s.prototype.set=function(t,r,a){mt("Transaction.set",arguments,2,3);var l=ji("Transaction.set",t,this.yf);a=Qa("Transaction.set",a);var d=Vs(l.d_,r,a),m=ss(this.yf.mf,"Transaction.set",l.f_,d,null!==l.d_,a);return this.Vf.set(l.f_,m),this},s.prototype.update=function(t,r,a){for(var l,d,m=[],v=3;v<arguments.length;v++)m[v-3]=arguments[v];return"string"==typeof r||r instanceof is?(pt("Transaction.update",arguments,3),l=ji("Transaction.update",t,this.yf),d=Ko(this.yf.mf,"Transaction.update",l.f_,r,a,m)):($("Transaction.update",arguments,2),l=ji("Transaction.update",t,this.yf),d=Wa(this.yf.mf,"Transaction.update",l.f_,r)),this.Vf.update(l.f_,d),this},s.prototype.delete=function(t){$("Transaction.delete",arguments,1);var r=ji("Transaction.delete",t,this.yf);return this.Vf.delete(r.f_),this},s}(),tc=function(){function s(t){this.yf=t,this.pf=[],this.bf=!1}return s.prototype.set=function(t,r,a){mt("WriteBatch.set",arguments,2,3),this.vf();var l=ji("WriteBatch.set",t,this.yf);a=Qa("WriteBatch.set",a);var d=Vs(l.d_,r,a),m=ss(this.yf.mf,"WriteBatch.set",l.f_,d,null!==l.d_,a);return this.pf=this.pf.concat(m.w_(l.f_,we.ze())),this},s.prototype.update=function(t,r,a){for(var l,d,m=[],v=3;v<arguments.length;v++)m[v-3]=arguments[v];return this.vf(),"string"==typeof r||r instanceof is?(pt("WriteBatch.update",arguments,3),l=ji("WriteBatch.update",t,this.yf),d=Ko(this.yf.mf,"WriteBatch.update",l.f_,r,a,m)):($("WriteBatch.update",arguments,2),l=ji("WriteBatch.update",t,this.yf),d=Wa(this.yf.mf,"WriteBatch.update",l.f_,r)),this.pf=this.pf.concat(d.w_(l.f_,we.exists(!0))),this},s.prototype.delete=function(t){$("WriteBatch.delete",arguments,1),this.vf();var r=ji("WriteBatch.delete",t,this.yf);return this.pf=this.pf.concat(new sr(r.f_,we.ze())),this},s.prototype.commit=function(){return this.vf(),this.bf=!0,this.pf.length>0?this.yf.hf().write(this.pf):Promise.resolve()},s.prototype.vf=function(){if(this.bf)throw new G(j.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},s}(),yn=function(s){function t(r,a,l){var d=this;return(d=s.call(this,a.__,r,l)||this).f_=r,d.firestore=a,d.d_=l,d.lf=d.firestore.hf(),d}return D.__extends(t,s),t.Rf=function(r,a,l){if(r.length%2!=0)throw new G(j.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+r.R()+" has "+r.length);return new t(new Y(r),a,l)},Object.defineProperty(t.prototype,"id",{get:function(){return this.f_.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new js(this.f_.path.h(),this.firestore,this.d_)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.f_.path.R()},enumerable:!1,configurable:!0}),t.prototype.collection=function(r){if($("DocumentReference.collection",arguments,1),Nt("DocumentReference.collection","non-empty string",1,r),!r)throw new G(j.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var a=W.g(r);return new js(this.f_.path.child(a),this.firestore,null)},t.prototype.isEqual=function(r){if(!(r instanceof t))throw xn("isEqual","DocumentReference",1,r);return this.firestore===r.firestore&&this.f_.isEqual(r.f_)&&this.d_===r.d_},t.prototype.set=function(r,a){mt("DocumentReference.set",arguments,1,2),a=Qa("DocumentReference.set",a);var l=Vs(this.d_,r,a),d=ss(this.firestore.mf,"DocumentReference.set",this.f_,l,null!==this.d_,a);return this.lf.write(d.w_(this.f_,we.ze()))},t.prototype.update=function(r,a){for(var l,d=[],m=2;m<arguments.length;m++)d[m-2]=arguments[m];return"string"==typeof r||r instanceof is?(pt("DocumentReference.update",arguments,2),l=Ko(this.firestore.mf,"DocumentReference.update",this.f_,r,a,d)):($("DocumentReference.update",arguments,1),l=Wa(this.firestore.mf,"DocumentReference.update",this.f_,r)),this.lf.write(l.w_(this.f_,we.exists(!0)))},t.prototype.delete=function(){return $("DocumentReference.delete",arguments,0),this.lf.write([new sr(this.f_,we.ze())])},t.prototype.onSnapshot=function(){for(var r,a,l,d=this,m=[],v=0;v<arguments.length;v++)m[v]=arguments[v];mt("DocumentReference.onSnapshot",arguments,1,4);var w={includeMetadataChanges:!1},E=0;"object"!=typeof m[E]||mo(m[E])||(an("DocumentReference.onSnapshot",w=m[E],["includeMetadataChanges"]),ae("DocumentReference.onSnapshot","boolean","includeMetadataChanges",w.includeMetadataChanges),E++);var C={includeMetadataChanges:w.includeMetadataChanges};if(mo(m[E])){var P=m[E];m[E]=null===(r=P.next)||void 0===r?void 0:r.bind(P),m[E+1]=null===(a=P.error)||void 0===a?void 0:a.bind(P),m[E+2]=null===(l=P.complete)||void 0===l?void 0:l.bind(P)}else Nt("DocumentReference.onSnapshot","function",E,m[E]),vt("DocumentReference.onSnapshot","function",E+1,m[E+1]),vt("DocumentReference.onSnapshot","function",E+2,m[E+2]);var O={next:function(R){m[E]&&m[E](d.Sf(R))},error:m[E+1],complete:m[E+2]};return this.lf.listen(Ti(this.f_.path),C,O)},t.prototype.get=function(r){var a=this;mt("DocumentReference.get",arguments,0,1),rc("DocumentReference.get",r);var l=this.firestore.hf();return r&&"cache"===r.source?l.Q_(this.f_).then(function(d){return new us(a.firestore,a.f_,d,!0,d instanceof Ft&&d.Je,a.d_)}):l.W_(this.f_,r).then(function(d){return a.Sf(d)})},t.prototype.withConverter=function(r){return new t(this.f_,this.firestore,r)},t.prototype.Sf=function(r){var a=r.docs.get(this.f_);return new us(this.firestore,this.f_,a,r.fromCache,r.hasPendingWrites,this.d_)},t}(Rs),ta=function(){function s(t,r){this.hasPendingWrites=t,this.fromCache=r}return s.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},s}(),us=function(){function s(t,r,a,l,d,m){this.yf=t,this.f_=r,this.Df=a,this.Cf=l,this.Nf=d,this.d_=m}return s.prototype.data=function(t){var r=this;if(mt("DocumentSnapshot.data",arguments,0,1),t=ic("DocumentSnapshot.data",t),this.Df){if(this.d_){var a=new $a(this.yf,this.f_,this.Df,this.Cf,this.Nf,null);return this.d_.fromFirestore(a,t)}return new as(this.yf.__,this.yf.gf(),t.serverTimestamps||"none",function(l){return new yn(l,r.yf,null)},function(l){return new Tr(l)}).X_(this.Df.rn())}},s.prototype.get=function(t,r){var a=this;if(mt("DocumentSnapshot.get",arguments,1,2),r=ic("DocumentSnapshot.get",r),this.Df){var l=this.Df.data().field(Fs("DocumentSnapshot.get",t,this.f_));if(null!==l)return new as(this.yf.__,this.yf.gf(),r.serverTimestamps||"none",function(d){return new yn(d,a.yf,a.d_)},function(d){return new Tr(d)}).X_(l)}},Object.defineProperty(s.prototype,"id",{get:function(){return this.f_.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"ref",{get:function(){return new yn(this.f_,this.yf,this.d_)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"exists",{get:function(){return null!==this.Df},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"metadata",{get:function(){return new ta(this.Nf,this.Cf)},enumerable:!1,configurable:!0}),s.prototype.isEqual=function(t){if(!(t instanceof s))throw xn("isEqual","DocumentSnapshot",1,t);return this.yf===t.yf&&this.Cf===t.Cf&&this.f_.isEqual(t.f_)&&(null===this.Df?null===t.Df:this.Df.isEqual(t.Df))&&this.d_===t.d_},s}(),$a=function(s){function t(){return null!==s&&s.apply(this,arguments)||this}return D.__extends(t,s),t.prototype.data=function(r){return s.prototype.data.call(this,r)},t}(us);function yl(s,t,r,a,l,d,m){var v;if(l.p()){if("array-contains"===d||"array-contains-any"===d)throw new G(j.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+d+"' queries on FieldPath.documentId().");if("in"===d||"not-in"===d){ec(m,d);for(var w=[],E=0,C=m;E<C.length;E++)w.push(Ka(a,s,C[E]));v={arrayValue:{values:w}}}else v=Ka(a,s,m)}else"in"!==d&&"not-in"!==d&&"array-contains-any"!==d||ec(m,d),v=Ku(r,t,m,"in"===d||"not-in"===d);var O=Se.create(l,d,v);return function(R,B){if(B.hn()){var q=dn(R);if(null!==q&&!q.isEqual(B.field))throw new G(j.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+q.toString()+"' and '"+B.field.toString()+"'");var ct=Ci(R);null!==ct&&nc(0,B.field,ct)}var ut=function(gt,bt){for(var Dt=0,qt=gt.filters;Dt<qt.length;Dt++){var Jt=qt[Dt];if(bt.indexOf(Jt.op)>=0)return Jt.op}return null}(R,function(gt){switch(gt){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(B.op));if(null!==ut)throw new G(j.INVALID_ARGUMENT,ut===B.op?"Invalid query. You cannot use more than one '"+B.op.toString()+"' filter.":"Invalid query. You cannot use '"+B.op.toString()+"' filters with '"+ut.toString()+"' filters.")}(s,O),O}function ea(s,t,r){if(null!==s.startAt)throw new G(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new G(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var a=new mn(t,r);return function(l,d){if(null===Ci(l)){var m=dn(l);null!==m&&nc(0,m,d.field)}}(s,a),a}function Ka(s,t,r){if("string"==typeof r){if(""===r)throw new G(j.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!_s(t)&&-1!==r.indexOf("/"))throw new G(j.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+r+"' contains a '/' character.");var a=t.path.child(W.g(r));if(!Y.F(a))throw new G(j.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+a+"' is not because it has an odd number of segments ("+a.length+").");return $t(s,new Y(a))}if(r instanceof Rs)return $t(s,r.f_);throw new G(j.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+wn(r)+".")}function ec(s,t){if(!Array.isArray(s)||0===s.length)throw new G(j.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(s.length>10)throw new G(j.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.");if("in"===t||"array-contains-any"===t){if(s.indexOf(null)>=0)throw new G(j.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'null' in the value array.");if(s.filter(function(r){return Number.isNaN(r)}).length>0)throw new G(j.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'NaN' in the value array.")}}function nc(s,t,r){if(!r.isEqual(t))throw new G(j.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first orderBy(), but your first orderBy() is on field '"+r.toString()+"' instead.")}function Xa(s){if(Ai(s)&&0===s.on.length)throw new G(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var na=function(){function s(t,r,a){this.Ff=t,this.firestore=r,this.d_=a}return s.prototype.where=function(t,r,a){$("Query.where",arguments,3),on("Query.where",3,a);var v,E,l=On("Query.where",["<","<=","==","!=",">=",">","array-contains","in","array-contains-any","not-in"],2,r),d=Fs("Query.where",t),m=yl(this.Ff,"Query.where",this.firestore.mf,this.firestore.__,d,l,a);return new s((E=(v=this.Ff).filters.concat([m]),new Bn(v.path,v.collectionGroup,v.on.slice(),E,v.limit,v.an,v.startAt,v.endAt)),this.firestore,this.d_)},s.prototype.orderBy=function(t,r){var a;if(mt("Query.orderBy",arguments,1,2),vt("Query.orderBy","non-empty string",2,r),void 0===r||"asc"===r)a="asc";else{if("desc"!==r)throw new G(j.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+r+"', expected 'asc' or 'desc'.");a="desc"}var m,w,l=Fs("Query.orderBy",t),d=ea(this.Ff,l,a);return new s((w=(m=this.Ff).on.concat([d]),new Bn(m.path,m.collectionGroup,w,m.filters.slice(),m.limit,m.an,m.startAt,m.endAt)),this.firestore,this.d_)},s.prototype.limit=function(t){return $("Query.limit",arguments,1),Nt("Query.limit","number",1,t),zs("Query.limit",1,t),new s(Hn(this.Ff,t,"F"),this.firestore,this.d_)},s.prototype.limitToLast=function(t){return $("Query.limitToLast",arguments,1),Nt("Query.limitToLast","number",1,t),zs("Query.limitToLast",1,t),new s(Hn(this.Ff,t,"L"),this.firestore,this.d_)},s.prototype.startAt=function(t){for(var r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];pt("Query.startAt",arguments,1);var l=this.xf("Query.startAt",t,r,!0);return new s(ur(this.Ff,l),this.firestore,this.d_)},s.prototype.startAfter=function(t){for(var r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];pt("Query.startAfter",arguments,1);var l=this.xf("Query.startAfter",t,r,!1);return new s(ur(this.Ff,l),this.firestore,this.d_)},s.prototype.endBefore=function(t){for(var r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];pt("Query.endBefore",arguments,1);var l=this.xf("Query.endBefore",t,r,!0);return new s(Wn(this.Ff,l),this.firestore,this.d_)},s.prototype.endAt=function(t){for(var r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];pt("Query.endAt",arguments,1);var l=this.xf("Query.endAt",t,r,!1);return new s(Wn(this.Ff,l),this.firestore,this.d_)},s.prototype.isEqual=function(t){if(!(t instanceof s))throw xn("isEqual","Query",1,t);return this.firestore===t.firestore&&qn(this.Ff,t.Ff)&&this.d_===t.d_},s.prototype.withConverter=function(t){return new s(this.Ff,this.firestore,t)},s.prototype.xf=function(t,r,a,l){if(on(t,1,r),r instanceof us)return $(t,D.__spreadArrays([r],a),1),function(m,v,w,E,C){if(!E)throw new G(j.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+w+"().");for(var P=[],O=0,R=zn(m);O<R.length;O++){var B=R[O];if(B.field.p())P.push($t(v,E.key));else{var q=E.field(B.field);if(gs(q))throw new G(j.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+B.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===q){var ct=B.field.R();throw new G(j.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+ct+"' (used as the orderBy) does not exist.")}P.push(q)}}return new pn(P,C)}(this.Ff,this.firestore.__,t,r.Df,l);var d=[r].concat(a);return function(m,v,w,E,C,P){var O=m.on;if(C.length>O.length)throw new G(j.INVALID_ARGUMENT,"Too many arguments provided to "+E+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var R=[],B=0;B<C.length;B++){var q=C[B];if(O[B].field.p()){if("string"!=typeof q)throw new G(j.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+E+"(), but got a "+typeof q);if(!_s(m)&&-1!==q.indexOf("/"))throw new G(j.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+E+"() must be a plain document ID, but '"+q+"' contains a slash.");var ct=m.path.child(W.g(q));if(!Y.F(ct))throw new G(j.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+E+"() must result in a valid document path, but '"+ct+"' is not because it contains an odd number of segments.");var ut=new Y(ct);R.push($t(v,ut))}else{var gt=Ku(w,E,q);R.push(gt)}}return new pn(R,P)}(this.Ff,this.firestore.__,this.firestore.mf,t,d,l)},s.prototype.onSnapshot=function(){for(var t,r,a,l=this,d=[],m=0;m<arguments.length;m++)d[m]=arguments[m];mt("Query.onSnapshot",arguments,1,4);var v={},w=0;if("object"!=typeof d[w]||mo(d[w])||(an("Query.onSnapshot",v=d[w],["includeMetadataChanges"]),ae("Query.onSnapshot","boolean","includeMetadataChanges",v.includeMetadataChanges),w++),mo(d[w])){var E=d[w];d[w]=null===(t=E.next)||void 0===t?void 0:t.bind(E),d[w+1]=null===(r=E.error)||void 0===r?void 0:r.bind(E),d[w+2]=null===(a=E.complete)||void 0===a?void 0:a.bind(E)}else Nt("Query.onSnapshot","function",w,d[w]),vt("Query.onSnapshot","function",w+1,d[w+1]),vt("Query.onSnapshot","function",w+2,d[w+2]);var C={next:function(P){d[w]&&d[w](new Za(l.firestore,l.Ff,P,l.d_))},error:d[w+1],complete:d[w+2]};return Xa(this.Ff),this.firestore.hf().listen(this.Ff,v,C)},s.prototype.get=function(t){var r=this;mt("Query.get",arguments,0,1),rc("Query.get",t),Xa(this.Ff);var a=this.firestore.hf();return(t&&"cache"===t.source?a.j_(this.Ff):a.K_(this.Ff,t)).then(function(l){return new Za(r.firestore,r.Ff,l,r.d_)})},s}(),Za=function(){function s(t,r,a,l){this.yf=t,this.$f=r,this.kf=a,this.d_=l,this.Mf=null,this.Of=null,this.metadata=new ta(a.hasPendingWrites,a.fromCache)}return Object.defineProperty(s.prototype,"docs",{get:function(){var t=[];return this.forEach(function(r){return t.push(r)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"empty",{get:function(){return this.kf.docs.m()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"size",{get:function(){return this.kf.docs.size},enumerable:!1,configurable:!0}),s.prototype.forEach=function(t,r){var a=this;mt("QuerySnapshot.forEach",arguments,1,2),Nt("QuerySnapshot.forEach","function",1,t),this.kf.docs.forEach(function(l){t.call(r,a.Lf(l,a.metadata.fromCache,a.kf.Wt.has(l.key)))})},Object.defineProperty(s.prototype,"query",{get:function(){return new na(this.$f,this.yf,this.d_)},enumerable:!1,configurable:!0}),s.prototype.docChanges=function(t){t&&(an("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),ae("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var r=!(!t||!t.includeMetadataChanges);if(r&&this.kf.Kt)throw new G(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.Mf&&this.Of===r||(this.Mf=function(a,l,d){if(a.Qt.m()){var m=0;return a.docChanges.map(function(w){return{type:"added",doc:d(w.doc,a.fromCache,a.Wt.has(w.doc.key)),oldIndex:-1,newIndex:m++}})}var v=a.Qt;return a.docChanges.filter(function(w){return l||3!==w.type}).map(function(w){var E=d(w.doc,a.fromCache,a.Wt.has(w.doc.key)),C=-1,P=-1;return 0!==w.type&&(C=v.indexOf(w.doc.key),v=v.delete(w.doc.key)),1!==w.type&&(P=(v=v.add(w.doc)).indexOf(w.doc.key)),{type:vl(w.type),doc:E,oldIndex:C,newIndex:P}})}(this.kf,r,this.Lf.bind(this)),this.Of=r),this.Mf},s.prototype.isEqual=function(t){if(!(t instanceof s))throw xn("isEqual","QuerySnapshot",1,t);return this.yf===t.yf&&qn(this.$f,t.$f)&&this.kf.isEqual(t.kf)&&this.d_===t.d_},s.prototype.Lf=function(t,r,a){return new $a(this.yf,t.key,t,r,a,this.d_)},s}(),js=function(s){function t(r,a,l){var d=this;if((d=s.call(this,Ti(r),a,l)||this).Bf=r,r.length%2!=1)throw new G(j.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+r.R()+" has "+r.length);return d}return D.__extends(t,s),Object.defineProperty(t.prototype,"id",{get:function(){return this.Ff.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var r=this.Ff.path.h();return r.m()?null:new yn(new Y(r),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.Ff.path.R()},enumerable:!1,configurable:!0}),t.prototype.doc=function(r){mt("CollectionReference.doc",arguments,0,1),0===arguments.length&&(r=Sr.k()),Nt("CollectionReference.doc","non-empty string",1,r);var a=W.g(r);return yn.Rf(this.Ff.path.child(a),this.firestore,this.d_)},t.prototype.add=function(r){$("CollectionReference.add",arguments,1);var a=this.d_?this.d_.toFirestore(r):r;Nt("CollectionReference.add","object",1,a);var l=this.doc();return new yn(l.f_,this.firestore,null).set(a).then(function(){return l})},t.prototype.withConverter=function(r){return new t(this.Bf,this.firestore,r)},t}(na);function Qa(s,t){if(void 0===t)return{merge:!1};if(an(s,t,["merge","mergeFields"]),ae(s,"boolean","merge",t.merge),void 0!==(d=t.mergeFields)&&function(v,w,E,C,P){if(!(C instanceof Array))throw new G(j.INVALID_ARGUMENT,"Function "+v+"() requires its "+w+" option to be an array, but it was: "+wn(C));for(var O=0;O<C.length;++O)if(!P(C[O]))throw new G(j.INVALID_ARGUMENT,"Function "+v+"() requires all "+w+" elements to be a string or a FieldPath, but the value at index "+O+" was: "+wn(C[O]))}(s,"mergeFields",0,d,function(r){return"string"==typeof r||r instanceof is}),void 0!==t.mergeFields&&void 0!==t.merge)throw new G(j.INVALID_ARGUMENT,"Invalid options passed to function "+s+'(): You cannot specify both "merge" and "mergeFields".');var d;return t}function ic(s,t){return void 0===t?{}:(an(s,t,["serverTimestamps"]),ue(s,0,"serverTimestamps",t.serverTimestamps,["estimate","previous","none"]),t)}function rc(s,t){vt(s,"object",1,t),t&&(an(s,t,["source"]),ue(s,0,"source",t.source,["default","server","cache"]))}function ji(s,t,r){if(t instanceof Rs){if(t.firestore!==r)throw new G(j.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}throw xn(s,"DocumentReference",1,t)}function vl(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return at()}}function Vs(s,t,r){return s?r&&(r.merge||r.mergeFields)?s.toFirestore(t,r):s.toFirestore(t):t}var sc=function(s){function t(){return null!==s&&s.apply(this,arguments)||this}return D.__extends(t,s),t.serverTimestamp=function(){ht("FieldValue.serverTimestamp",arguments);var r=new fl("serverTimestamp");return r.e_="FieldValue.serverTimestamp",new t(r)},t.delete=function(){ht("FieldValue.delete",arguments);var r=new go("deleteField");return r.e_="FieldValue.delete",new t(r)},t.arrayUnion=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];pt("FieldValue.arrayUnion",arguments,1);var l=function(){for(var d=[],m=0;m<arguments.length;m++)d[m]=arguments[m];return pt("arrayUnion()",arguments,1),new Ba("arrayUnion",d)}.apply(void 0,r);return l.e_="FieldValue.arrayUnion",new t(l)},t.arrayRemove=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];pt("FieldValue.arrayRemove",arguments,1);var l=function(){for(var d=[],m=0;m<arguments.length;m++)d[m]=arguments[m];return pt("arrayRemove()",arguments,1),new dl("arrayRemove",d)}.apply(void 0,r);return l.e_="FieldValue.arrayRemove",new t(l)},t.increment=function(r){Nt("FieldValue.increment","number",1,r),$("FieldValue.increment",arguments,1);var a=new pl("increment",r);return a.e_="FieldValue.increment",new t(a)},t.prototype.isEqual=function(r){return this.l_.isEqual(r.l_)},t}(Ns),bl={Firestore:Jo,GeoPoint:Yo,Timestamp:Qt,Blob:Tr,Transaction:Ju,WriteBatch:tc,DocumentReference:yn,DocumentSnapshot:us,Query:na,QueryDocumentSnapshot:$a,QuerySnapshot:Za,CollectionReference:js,FieldPath:is,FieldValue:sc,setLogLevel:Jo.setLogLevel,CACHE_SIZE_UNLIMITED:Ya};!function(s){s.INTERNAL.registerComponent(new yt.Component("firestore",function(a){return l=a.getProvider("app").getImmediate(),d=a.getProvider("auth-internal"),m=new Ls,v=new ll(m),new Jo(l,d,v,m);var l,d,m,v},"PUBLIC").setServiceProps(Object.assign({},bl))),s.registerVersion("@firebase/firestore","1.18.0")}(rn.default)},2870:(kn,me,lt)=>{lt.r(me),lt.d(me,{default:()=>Be,ErrorCode:()=>ci,EventType:()=>se,WebChannel:()=>Xt,XhrIo:()=>ki,createWebChannelTransport:()=>ui});var re=function(f,b){return(re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,T){x.__proto__=T}||function(x,T){for(var L in T)Object.prototype.hasOwnProperty.call(T,L)&&(x[L]=T[L])})(f,b)};function Bi(f){var b="function"==typeof Symbol&&Symbol.iterator,x=b&&f[b],T=0;if(x)return x.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&T>=f.length&&(f=void 0),{value:f&&f[T++],done:!f}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")}var tt,Lt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},S=S||{},yt=Lt||self;function gi(){}function rn(f){var b=typeof f;return"object"!=b?b:f?Array.isArray(f)?"array":b:"null"}function j(f){var b=rn(f);return"array"==b||"object"==b&&"number"==typeof f.length}function G(f){var b=typeof f;return"object"==b&&null!=f||"function"==b}var Dn="closure_uid_"+(1e9*Math.random()>>>0),rt=0;function Gt(f,b,x){return f.call.apply(f.bind,arguments)}function Pn(f,b,x){if(!f)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,T),f.apply(b,L)}}return function(){return f.apply(b,arguments)}}function Zt(f,b,x){return(Zt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Gt:Pn).apply(null,arguments)}function at(f,b){var x=Array.prototype.slice.call(arguments,1);return function(){var T=x.slice();return T.push.apply(T,arguments),f.apply(this,T)}}var nt=Date.now;function J(f,b){function x(){}x.prototype=b.prototype,f.S=b.prototype,f.prototype=new x,f.prototype.constructor=f}function sn(){this.j=this.j,this.i=this.i}sn.prototype.j=!1,sn.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(f){Object.prototype.hasOwnProperty.call(f,Dn)&&f[Dn]||(f[Dn]=++rt)}(this)},sn.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var wr=Array.prototype.indexOf?function(f,b){return Array.prototype.indexOf.call(f,b,void 0)}:function(f,b){if("string"==typeof f)return"string"!=typeof b||1!=b.length?-1:f.indexOf(b,0);for(var x=0;x<f.length;x++)if(x in f&&f[x]===b)return x;return-1},xr=Array.prototype.forEach?function(f,b,x){Array.prototype.forEach.call(f,b,x)}:function(f,b,x){for(var T=f.length,L="string"==typeof f?f.split(""):f,U=0;U<T;U++)U in L&&b.call(x,L[U],U,f)};function st(f){return Array.prototype.concat.apply([],arguments)}function Q(f){var b=f.length;if(0<b){for(var x=Array(b),T=0;T<b;T++)x[T]=f[T];return x}return[]}function Y(f){return/^[\s\xa0]*$/.test(f)}var mt,ht=String.prototype.trim?function(f){return f.trim()}:function(f){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(f)[1]};function $(f,b){return-1!=f.indexOf(b)}function pt(f,b){return f<b?-1:f>b?1:0}t:{var Nt=yt.navigator;if(Nt){var vt=Nt.userAgent;if(vt){mt=vt;break t}}mt=""}function fe(f,b,x){for(var T in f)b.call(x,f[T],T,f)}function ae(f){var b={};for(var x in f)b[x]=f[x];return b}var ue="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function On(f,b){for(var x,T,L=1;L<arguments.length;L++){for(x in T=arguments[L])f[x]=T[x];for(var U=0;U<ue.length;U++)x=ue[U],Object.prototype.hasOwnProperty.call(T,x)&&(f[x]=T[x])}}function Zn(f){return Zn[" "](f),f}Zn[" "]=gi;var Er,f,wn=$(mt,"Opera"),on=$(mt,"Trident")||$(mt,"MSIE"),an=$(mt,"Edge"),xn=an||on,zs=$(mt,"Gecko")&&!($(mt.toLowerCase(),"webkit")&&!$(mt,"Edge"))&&!($(mt,"Trident")||$(mt,"MSIE"))&&!$(mt,"Edge"),yi=$(mt.toLowerCase(),"webkit")&&!$(mt,"Edge");function Qn(){var f=yt.document;return f?f.documentMode:void 0}t:{var Sr="",wt=(f=mt,zs?/rv:([^\);]+)(\)|;)/.exec(f):an?/Edge\/([\d\.]+)/.exec(f):on?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(f):yi?/WebKit\/(\S+)/.exec(f):wn?/(?:Version)[ \/]?(\S+)/.exec(f):void 0);if(wt&&(Sr=wt?wt[1]:""),on){var Jn=Qn();if(null!=Jn&&Jn>parseFloat(Sr)){Er=String(Jn);break t}}Er=Sr}var Hs={};function ye(f){return function(f,b){var x=Hs;return Object.prototype.hasOwnProperty.call(x,f)?x[f]:x[f]=b()}(f,function(){for(var b=0,x=ht(String(Er)).split("."),T=ht(String(f)).split("."),L=Math.max(x.length,T.length),U=0;0==b&&U<L;U++){var it=x[U]||"",kt=T[U]||"";do{if(it=/(\d*)(\D*)(.*)/.exec(it)||["","","",""],kt=/(\d*)(\D*)(.*)/.exec(kt)||["","","",""],0==it[0].length&&0==kt[0].length)break;b=pt(0==it[1].length?0:parseInt(it[1],10),0==kt[1].length?0:parseInt(kt[1],10))||pt(0==it[2].length,0==kt[2].length)||pt(it[2],kt[2]),it=it[3],kt=kt[3]}while(0==b)}return 0<=b})}var hs=yt.document&&on&&(Qn()||parseInt(Er,10))||void 0,Tr=!on||9<=Number(hs),cu=on&&!ye("9"),Ws=function(){if(!yt.addEventListener||!Object.defineProperty)return!1;var f=!1,b=Object.defineProperty({},"passive",{get:function(){f=!0}});try{yt.addEventListener("test",gi,b),yt.removeEventListener("test",gi,b)}catch(x){}return f}();function te(f,b){this.type=f,this.a=this.target=b,this.defaultPrevented=!1}function Qt(f,b){if(te.call(this,f?f.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,f){var x=this.type=f.type,T=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.a=b,b=f.relatedTarget){if(zs){t:{try{Zn(b.nodeName);var L=!0;break t}catch(U){}L=!1}L||(b=null)}}else"mouseover"==x?b=f.fromElement:"mouseout"==x&&(b=f.toElement);this.relatedTarget=b,T?(this.clientX=void 0!==T.clientX?T.clientX:T.pageX,this.clientY=void 0!==T.clientY?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=void 0!==f.clientX?f.clientX:f.pageX,this.clientY=void 0!==f.clientY?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType="string"==typeof f.pointerType?f.pointerType:Mt[f.pointerType]||"",this.c=f,f.defaultPrevented&&this.b()}}te.prototype.b=function(){this.defaultPrevented=!0},J(Qt,te);var Mt={2:"touch",3:"pen",4:"mouse"};Qt.prototype.b=function(){Qt.S.b.call(this);var f=this.c;if(f.preventDefault)f.preventDefault();else if(f.returnValue=!1,cu)try{(f.ctrlKey||112<=f.keyCode&&123>=f.keyCode)&&(f.keyCode=-1)}catch(b){}};var un="closure_listenable_"+(1e6*Math.random()|0),Hi=0;function _o(f,b,x,T,L){this.listener=f,this.proxy=null,this.src=b,this.type=x,this.capture=!!T,this.ca=L,this.key=++Hi,this.Y=this.Z=!1}function Wi(f){f.Y=!0,f.listener=null,f.proxy=null,f.src=null,f.ca=null}function Ar(f){this.src=f,this.a={},this.b=0}function vi(f,b){var x=b.type;if(x in f.a){var U,T=f.a[x],L=wr(T,b);(U=0<=L)&&Array.prototype.splice.call(T,L,1),U&&(Wi(b),0==f.a[x].length&&(delete f.a[x],f.b--))}}function qi(f,b,x,T){for(var L=0;L<f.length;++L){var U=f[L];if(!U.Y&&U.listener==b&&U.capture==!!x&&U.ca==T)return L}return-1}Ar.prototype.add=function(f,b,x,T,L){var U=f.toString();(f=this.a[U])||(f=this.a[U]=[],this.b++);var it=qi(f,b,T,L);return-1<it?(b=f[it],x||(b.Z=!1)):((b=new _o(b,this.src,U,!!T,L)).Z=x,f.push(b)),b};var Gi="closure_lm_"+(1e6*Math.random()|0),ne={};function At(f,b,x,T,L){if(T&&T.once)return qs(f,b,x,T,L);if(Array.isArray(b)){for(var U=0;U<b.length;U++)At(f,b[U],x,T,L);return null}return x=xt(x),f&&f[un]?f.va(b,x,G(T)?!!T.capture:!!T,L):Cr(f,b,x,!1,T,L)}function Cr(f,b,x,T,L,U){if(!b)throw Error("Invalid event type");var it=G(L)?!!L.capture:!!L;if(it&&!Tr)return null;var kt=Ze(f);if(kt||(f[Gi]=kt=new Ar(f)),(x=kt.add(b,x,T,it,U)).proxy)return x;if(T=function(){var f=de,b=Tr?function(x){return f.call(b.src,b.listener,x)}:function(x){if(!(x=f.call(b.src,b.listener,x)))return x};return b}(),x.proxy=T,T.src=f,T.listener=x,f.addEventListener)Ws||(L=it),void 0===L&&(L=!1),f.addEventListener(b.toString(),T,L);else if(f.attachEvent)f.attachEvent(Mr(b.toString()),T);else{if(!f.addListener||!f.removeListener)throw Error("addEventListener and attachEvent are unavailable.");f.addListener(T)}return x}function qs(f,b,x,T,L){if(Array.isArray(b)){for(var U=0;U<b.length;U++)qs(f,b[U],x,T,L);return null}return x=xt(x),f&&f[un]?f.wa(b,x,G(T)?!!T.capture:!!T,L):Cr(f,b,x,!0,T,L)}function Gs(f,b,x,T,L){if(Array.isArray(b))for(var U=0;U<b.length;U++)Gs(f,b[U],x,T,L);else T=G(T)?!!T.capture:!!T,x=xt(x),f&&f[un]?(f=f.c,(b=String(b).toString())in f.a&&-1<(x=qi(U=f.a[b],x,T,L))&&(Wi(U[x]),Array.prototype.splice.call(U,x,1),0==U.length&&(delete f.a[b],f.b--))):f&&(f=Ze(f))&&(b=f.a[b.toString()],f=-1,b&&(f=qi(b,x,T,L)),(x=-1<f?b[f]:null)&&ve(x))}function ve(f){if("number"!=typeof f&&f&&!f.Y){var b=f.src;if(b&&b[un])vi(b.c,f);else{var x=f.type,T=f.proxy;b.removeEventListener?b.removeEventListener(x,T,f.capture):b.detachEvent?b.detachEvent(Mr(x),T):b.addListener&&b.removeListener&&b.removeListener(T),(x=Ze(b))?(vi(x,f),0==x.b&&(x.src=null,b[Gi]=null)):Wi(f)}}}function Mr(f){return f in ne?ne[f]:ne[f]="on"+f}function Ln(f,b){var x=f.listener,T=f.ca||f.src;return f.Z&&ve(f),x.call(T,b)}function de(f,b){if(f.Y)return!0;if(!Tr){if(!b)t:{b=["window","event"];for(var x=yt,T=0;T<b.length;T++)if(null==(x=x[b[T]])){b=null;break t}b=x}return Ln(f,b=new Qt(b,this))}return Ln(f,new Qt(b,this))}function Ze(f){return(f=f[Gi])instanceof Ar?f:null}var Ys="__closure_events_fn_"+(1e9*Math.random()>>>0);function xt(f){return"function"==rn(f)?f:(f[Ys]||(f[Ys]=function(b){return f.handleEvent(b)}),f[Ys])}function It(){sn.call(this),this.c=new Ar(this),this.J=this,this.C=null}function St(f,b,x,T){if(!(b=f.c.a[String(b)]))return!0;b=b.concat();for(var L=!0,U=0;U<b.length;++U){var it=b[U];if(it&&!it.Y&&it.capture==x){var kt=it.listener,Ct=it.ca||it.src;it.Z&&vi(f.c,it),L=!1!==kt.call(Ct,T)&&L}}return L&&!T.defaultPrevented}J(It,sn),It.prototype[un]=!0,(tt=It.prototype).addEventListener=function(f,b,x,T){At(this,f,b,x,T)},tt.removeEventListener=function(f,b,x,T){Gs(this,f,b,x,T)},tt.dispatchEvent=function(f){var b,x=this.C;if(x)for(b=[];x;x=x.C)b.push(x);x=this.J;var T=f.type||f;if("string"==typeof f)f=new te(f,x);else if(f instanceof te)f.target=f.target||x;else{var L=f;On(f=new te(T,x),L)}if(L=!0,b)for(var U=b.length-1;0<=U;U--){var it=f.a=b[U];L=St(it,T,!0,f)&&L}if(L=St(it=f.a=x,T,!0,f)&&L,L=St(it,T,!1,f)&&L,b)for(U=0;U<b.length;U++)L=St(it=f.a=b[U],T,!1,f)&&L;return L},tt.G=function(){if(It.S.G.call(this),this.c){var b,f=this.c;for(b in f.a){for(var x=f.a[b],T=0;T<x.length;T++)Wi(x[T]);delete f.a[b],f.b--}}this.C=null},tt.va=function(f,b,x,T){return this.c.add(String(f),b,!1,x,T)},tt.wa=function(f,b,x,T){return this.c.add(String(f),b,!0,x,T)};var Yt=yt.JSON.stringify;function We(){this.b=this.a=null}var bi,_t=new(function(){function f(b,x,T){this.f=T,this.c=b,this.g=x,this.b=0,this.a=null}return f.prototype.get=function(){var b;return 0<this.b?(this.b--,this.a=(b=this.a).next,b.next=null):b=this.c(),b},f}())(function(){return new fs},function(f){f.reset()},100);function Kt(){var f=ds,b=null;return f.a&&(b=f.a,f.a=f.a.next,f.a||(f.b=null),b.next=null),b}function fs(){this.next=this.b=this.a=null}function Bt(f){yt.setTimeout(function(){throw f},0)}function Rt(f,b){bi||function(){var f=yt.Promise.resolve(void 0);bi=function(){f.then(ti)}}(),Yi||(bi(),Yi=!0),ds.add(f,b)}We.prototype.add=function(f,b){var x=_t.get();x.set(f,b),this.b?this.b.next=x:this.a=x,this.b=x},fs.prototype.set=function(f,b){this.a=f,this.b=b,this.next=null},fs.prototype.reset=function(){this.next=this.b=this.a=null};var Yi=!1,ds=new We;function ti(){for(var f;f=Kt();){try{f.a.call(f.b)}catch(x){Bt(x)}var b=_t;b.g(f),b.b<b.f&&(b.b++,f.next=b.a,b.a=f)}Yi=!1}function Nn(f,b){It.call(this),this.b=f||1,this.a=b||yt,this.f=Zt(this.Ya,this),this.g=nt()}function ps(f){f.aa=!1,f.M&&(f.a.clearTimeout(f.M),f.M=null)}function $s(f,b,x){if("function"==rn(f))x&&(f=Zt(f,x));else{if(!f||"function"!=typeof f.handleEvent)throw Error("Invalid listener argument");f=Zt(f.handleEvent,f)}return 2147483647<Number(b)?-1:yt.setTimeout(f,b||0)}function Ks(f){f.a=$s(function(){f.a=null,f.c&&(f.c=!1,Ks(f))},f.h);var b=f.b;f.b=null,f.g.apply(null,b)}J(Nn,It),(tt=Nn.prototype).aa=!1,tt.M=null,tt.Ya=function(){if(this.aa){var f=nt()-this.g;0<f&&f<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-f):(this.M&&(this.a.clearTimeout(this.M),this.M=null),this.dispatchEvent("tick"),this.aa&&(ps(this),this.start()))}},tt.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=nt())},tt.G=function(){Nn.S.G.call(this),ps(this),delete this.a};var Rn=function(f){function b(x,T,L){var U=f.call(this)||this;return U.g=null!=L?x.bind(L):x,U.h=T,U.b=null,U.c=!1,U.a=null,U}return function(f,b){function x(){this.constructor=f}re(f,b),f.prototype=null===b?Object.create(b):(x.prototype=b.prototype,new x)}(b,f),b.prototype.f=function(x){this.b=arguments,this.a?this.c=!0:Ks(this)},b.prototype.G=function(){f.prototype.G.call(this),this.a&&(yt.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},b}(sn);function $i(f){sn.call(this),this.b=f,this.a={}}J($i,sn);var gs=[];function kr(f,b,x,T){Array.isArray(x)||(x&&(gs[0]=x.toString()),x=gs);for(var L=0;L<x.length;L++){var U=At(b,x[L],T||f.handleEvent,!1,f.b||f);if(!U)break;f.a[U.key]=U}}function Ee(f){fe(f.a,function(b,x){this.a.hasOwnProperty(x)&&ve(b)},f),f.a={}}function In(){this.a=!0}function Pt(f,b,x,T){f.info(function(){return"XMLHTTP TEXT ("+b+"): "+function(f,b){if(!f.a)return b;if(!b)return null;try{var x=JSON.parse(b);if(x)for(f=0;f<x.length;f++)if(Array.isArray(x[f])){var T=x[f];if(!(2>T.length)){var L=T[1];if(Array.isArray(L)&&!(1>L.length)){var U=L[0];if("noop"!=U&&"stop"!=U&&"close"!=U)for(var it=1;it<L.length;it++)L[it]=""}}}return Yt(x)}catch(kt){return b}}(f,x)+(T?" "+T:"")})}$i.prototype.G=function(){$i.S.G.call(this),Ee(this)},$i.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},In.prototype.info=function(){};var wi=null;function Dr(){return wi=wi||new It}function Vt(f){te.call(this,"serverreachability",f)}function Wt(f){var b=Dr();b.dispatchEvent(new Vt(b,f))}function ei(f){te.call(this,"statevent",f)}function $t(f){var b=Dr();b.dispatchEvent(new ei(b,f))}function qe(f){te.call(this,"timingevent",f)}function ni(f,b){if("function"!=rn(f))throw Error("Fn must not be null and must be a function");return yt.setTimeout(function(){f()},b)}J(Vt,te),J(ei,te),J(qe,te);var Ki={NO_ERROR:0,Za:1,gb:2,fb:3,bb:4,eb:5,hb:6,Da:7,TIMEOUT:8,kb:9},jn={ab:"complete",ob:"success",Ea:"error",Da:"abort",mb:"ready",nb:"readystatechange",TIMEOUT:"timeout",ib:"incrementaldata",lb:"progress",cb:"downloadprogress",pb:"uploadprogress"};function ii(){}function Xs(){}ii.prototype.a=null;var ms,Pe={OPEN:"a",$a:"b",Ea:"c",jb:"d"};function Xi(){te.call(this,"d")}function Pr(){te.call(this,"c")}function xi(){}function Zi(f,b,x,T){this.g=f,this.c=b,this.f=x,this.T=T||1,this.J=new $i(this),this.P=Ge,this.R=new Nn(f=xn?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.U=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.W=this.C=this.V=this.I=!1}J(Xi,te),J(Pr,te),J(xi,ii),ms=new xi;var Ge=45e3,Ce={},ie={};function ys(f,b,x){f.H=1,f.i=Fe(Le(b)),f.j=x,f.I=!0,Oe(f,null)}function Oe(f,b){f.u=nt(),Qi(f),f.l=Le(f.i);var x=f.l,T=f.T;Array.isArray(T)||(T=[String(T)]),we(x.b,"t",T),f.D=0,f.a=so(f.g,f.g.C?b:null),0<f.O&&(f.F=new Rn(Zt(f.Ca,f,f.a),f.O)),kr(f.J,f.a,"readystatechange",f.Wa),b=f.B?ae(f.B):{},f.j?(f.m||(f.m="POST"),b["Content-Type"]="application/x-www-form-urlencoded",f.a.ba(f.l,f.m,f.j,b)):(f.m="GET",f.a.ba(f.l,f.m,null,b)),Wt(1),function(f,b,x,T,L,U){f.info(function(){if(f.a)if(U)for(var it="",kt=U.split("&"),Ct=0;Ct<kt.length;Ct++){var pe=kt[Ct].split("=");if(1<pe.length){var Ke=pe[0];pe=pe[1];var tn=Ke.split("_");it=2<=tn.length&&"type"==tn[1]?it+(Ke+"=")+pe+"&":it+(Ke+"=redacted&")}}else it=null;else it=U;return"XMLHTTP REQ ("+T+") [attempt "+L+"]: "+b+"\n"+x+"\n"+it})}(f.c,f.m,f.l,f.f,f.T,f.j)}function Ye(f,b,x){for(var T=!0;!f.A&&f.D<x.length;){var L=cn(f,x);if(L==ie){4==b&&(f.h=4,$t(14),T=!1),Pt(f.c,f.f,null,"[Incomplete Response]");break}if(L==Ce){f.h=4,$t(15),Pt(f.c,f.f,x,"[Invalid Chunk]"),T=!1;break}Pt(f.c,f.f,L,null),Lr(f,L)}4==b&&0==x.length&&(f.h=1,$t(16),T=!1),f.b=f.b&&T,T?0<x.length&&!f.W&&(f.W=!0,(b=f.g).a==f&&b.V&&!b.F&&(b.c.info("Great, no buffering proxy detected. Bytes received: "+x.length),qr(b),b.F=!0)):(Pt(f.c,f.f,x,"[Invalid Chunked Response]"),Sn(f),Or(f))}function cn(f,b){var x=f.D,T=b.indexOf("\n",x);return-1==T?ie:(x=Number(b.substring(x,T)),isNaN(x)?Ce:(T+=1)+x>b.length?ie:(b=b.substr(T,x),f.D=T+x,b))}function Qi(f){f.U=nt()+f.P,Ji(f,f.P)}function Ji(f,b){if(null!=f.o)throw Error("WatchDog timer not null");f.o=ni(Zt(f.Ua,f),b)}function tr(f){f.o&&(yt.clearTimeout(f.o),f.o=null)}function Or(f){0==f.g.v||f.A||Gr(f.g,f)}function Sn(f){tr(f);var b=f.F;b&&"function"==typeof b.ja&&b.ja(),f.F=null,ps(f.R),Ee(f.J),f.a&&(b=f.a,f.a=null,b.abort(),b.ja())}function Lr(f,b){try{var x=f.g;if(0!=x.v&&(x.a==f||Si(x.b,f)))if(x.I=f.N,!f.C&&Si(x.b,f)&&3==x.v){try{var T=x.ka.a.parse(b)}catch(Ne){T=null}if(Array.isArray(T)&&3==T.length){var L=T;if(0==L[0])t:if(x.j)x.oa=L[1],0<x.oa-x.P&&37500>L[2]&&x.H&&0==x.o&&!x.m&&(x.m=ni(Zt(x.Ra,x),6e3));else{if(x.a){if(!(x.a.u+3e3<f.u))break t;Mi(x),Wn(x)}Wr(x),$t(18)}if(1>=Qs(x.b)&&x.ea){try{x.ea()}catch(Ne){}x.ea=void 0}}else pn(x,11)}else if((f.C||x.a==f)&&Mi(x),!Y(b))for(b=T=x.ka.a.parse(b),T=0;T<b.length;T++)if(x.P=(L=b[T])[0],L=L[1],2==x.v)if("c"==L[0]){x.J=L[1],x.ga=L[2];var U=L[3];null!=U&&(x.ha=U,x.c.info("VER="+x.ha));var it=L[4];null!=it&&(x.pa=it,x.c.info("SVER="+x.pa));var kt=L[5];if(null!=kt&&"number"==typeof kt&&0<kt){var Ct=1.5*kt;x.D=Ct,x.c.info("backChannelRequestTimeoutMs_="+Ct)}Ct=x;var pe=f.a;if(pe){var Ke=pe.a?pe.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ke){var tn=Ct.b;!tn.a&&($(Ke,"spdy")||$(Ke,"quic")||$(Ke,"h2"))&&(tn.f=tn.g,tn.a=new Set,tn.b&&(fn(tn,tn.b),tn.b=null))}if(Ct.A){var Yr=pe.a?pe.a.getResponseHeader("X-HTTP-Session-Id"):null;Yr&&(Ct.na=Yr,zt(Ct.B,Ct.A,Yr))}}x.v=3,x.f&&x.f.ta(),x.V&&(x.N=nt()-f.u,x.c.info("Handshake RTT: "+x.N+"ms"));var Di=f;if((Ct=x).la=ro(Ct,Ct.C?Ct.ga:null,Ct.fa),Di.C){Js(Ct.b,Di);var hr=Di,Xe=Ct.D;Xe&&hr.setTimeout(Xe),hr.o&&(tr(hr),Qi(hr)),Ct.a=Di}else io(Ct);0<x.g.length&&Et(x)}else"stop"!=L[0]&&"close"!=L[0]||pn(x,7);else 3==x.v&&("stop"==L[0]||"close"==L[0]?"stop"==L[0]?pn(x,7):ur(x):"noop"!=L[0]&&x.f&&x.f.sa(L),x.o=0);Wt(4)}catch(Ne){}}function Nr(f,b){if(f.forEach&&"function"==typeof f.forEach)f.forEach(b,void 0);else if(j(f)||"string"==typeof f)xr(f,b,void 0);else{if(f.L&&"function"==typeof f.L)var x=f.L();else if(f.K&&"function"==typeof f.K)x=void 0;else if(j(f)||"string"==typeof f){x=[];for(var T=f.length,L=0;L<T;L++)x.push(L)}else for(L in x=[],T=0,f)x[T++]=L;T=function(f){if(f.K&&"function"==typeof f.K)return f.K();if("string"==typeof f)return f.split("");if(j(f)){for(var b=[],x=f.length,T=0;T<x;T++)b.push(f[T]);return b}for(T in b=[],x=0,f)b[x++]=f[T];return b}(f),L=T.length;for(var U=0;U<L;U++)b.call(void 0,T[U],x&&x[U],f)}}function Ii(f,b){this.b={},this.a=[],this.c=0;var x=arguments.length;if(1<x){if(x%2)throw Error("Uneven number of arguments");for(var T=0;T<x;T+=2)this.set(arguments[T],arguments[T+1])}else if(f)if(f instanceof Ii)for(x=f.L(),T=0;T<x.length;T++)this.set(x[T],f.get(x[T]));else for(T in f)this.set(T,f[T])}function vs(f){if(f.c!=f.a.length){for(var b=0,x=0;b<f.a.length;){var T=f.a[b];Tn(f.b,T)&&(f.a[x++]=T),b++}f.a.length=x}if(f.c!=f.a.length){var L={};for(x=b=0;b<f.a.length;)Tn(L,T=f.a[b])||(f.a[x++]=T,L[T]=1),b++;f.a.length=x}}function Tn(f,b){return Object.prototype.hasOwnProperty.call(f,b)}(tt=Zi.prototype).setTimeout=function(f){this.P=f},tt.Wa=function(f){f=f.target;var b=this.F;b&&3==dn(f)?b.f():this.Ca(f)},tt.Ca=function(f){try{if(f==this.a)t:{var b=dn(this.a),x=this.a.ua(),T=this.a.X();if(!(3>b||3==b&&!xn&&!this.a.$())){this.A||4!=b||7==x||Wt(8==x||0>=T?3:2),tr(this);var L=this.a.X();this.N=L;var U=this.a.$();if(this.b=200==L,function(f,b,x,T,L,U,it){f.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+L+"]: "+b+"\n"+x+"\n"+U+" "+it})}(this.c,this.m,this.l,this.f,this.T,b,L),this.b){if(this.V&&!this.C){e:{if(this.a){var it,kt=this.a;if((it=kt.a?kt.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(it)){var Ct=it;break e}}Ct=null}if(!Ct){this.b=!1,this.h=3,$t(12),Sn(this),Or(this);break t}Pt(this.c,this.f,Ct,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Lr(this,Ct)}this.I?(Ye(this,b,U),xn&&this.b&&3==b&&(kr(this.J,this.R,"tick",this.Va),this.R.start())):(Pt(this.c,this.f,U,null),Lr(this,U)),4==b&&Sn(this),this.b&&!this.A&&(4==b?Gr(this.g,this):(this.b=!1,Qi(this)))}else 400==L&&0<U.indexOf("Unknown SID")?(this.h=3,$t(12)):(this.h=0,$t(13)),Sn(this),Or(this)}}}catch(pe){}},tt.Va=function(){if(this.a){var f=dn(this.a),b=this.a.$();this.D<b.length&&(tr(this),Ye(this,f,b),this.b&&4!=f&&Qi(this))}},tt.cancel=function(){this.A=!0,Sn(this)},tt.Ua=function(){this.o=null;var f=nt();0<=f-this.U?(function(f,b){f.info(function(){return"TIMEOUT: "+b})}(this.c,this.l),2!=this.H&&(Wt(3),$t(17)),Sn(this),this.h=2,Or(this)):Ji(this,this.U-f)},(tt=Ii.prototype).K=function(){vs(this);for(var f=[],b=0;b<this.a.length;b++)f.push(this.b[this.a[b]]);return f},tt.L=function(){return vs(this),this.a.concat()},tt.get=function(f,b){return Tn(this.b,f)?this.b[f]:b},tt.set=function(f,b){Tn(this.b,f)||(this.c++,this.a.push(f)),this.b[f]=b},tt.forEach=function(f,b){for(var x=this.L(),T=0;T<x.length;T++){var L=x[T],U=this.get(L);f.call(b,U,L,this)}};var be=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ri(f,b){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,f instanceof ri){this.a=void 0!==b?b:f.a,Qe(this,f.f),this.j=f.j,Rr(this,f.c),Fr(this,f.h),this.g=f.g,b=f.b;var x=new nr;x.c=b.c,b.a&&(x.a=new Ii(b.a),x.b=b.b),er(this,x),this.i=f.i}else f&&(x=String(f).match(be))?(this.a=!!b,Qe(this,x[1]||"",!0),this.j=je(x[2]||""),Rr(this,x[3]||"",!0),Fr(this,x[4]),this.g=je(x[5]||"",!0),er(this,x[6]||"",!0),this.i=je(x[7]||"")):(this.a=!!b,this.b=new nr(null,this.a))}function Le(f){return new ri(f)}function Qe(f,b,x){f.f=x?je(b,!0):b,f.f&&(f.f=f.f.replace(/:$/,""))}function Rr(f,b,x){f.c=x?je(b,!0):b}function Fr(f,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);f.h=b}else f.h=null}function er(f,b,x){b instanceof nr?(f.b=b,function(f,b){b&&!f.f&&($e(f),f.c=null,f.a.forEach(function(x,T){var L=T.toLowerCase();T!=L&&(ir(this,T),we(this,L,x))},f)),f.f=b}(f.b,f.a)):(x||(b=ln(b,Vn)),f.b=new nr(b,f.a))}function zt(f,b,x){f.b.set(b,x)}function Fe(f){return zt(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^nt()).toString(36)),f}function je(f,b){return f?b?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function ln(f,b,x){return"string"==typeof f?(f=encodeURI(f).replace(b,_e),x&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function _e(f){return"%"+((f=f.charCodeAt(0))>>4&15).toString(16)+(15&f).toString(16)}ri.prototype.toString=function(){var f=[],b=this.f;b&&f.push(ln(b,Vr,!0),":");var x=this.c;return(x||"file"==b)&&(f.push("//"),(b=this.j)&&f.push(ln(b,Vr,!0),"@"),f.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(x=this.h)&&f.push(":",String(x))),(x=this.g)&&(this.c&&"/"!=x.charAt(0)&&f.push("/"),f.push(ln(x,"/"==x.charAt(0)?Io:Ei,!0))),(x=this.b.toString())&&f.push("?",x),(x=this.i)&&f.push("#",ln(x,Eo)),f.join("")};var Vr=/[#\/\?@]/g,Ei=/[#\?:]/g,Io=/[#\?]/g,Vn=/[#\?@]/g,Eo=/#/g;function nr(f,b){this.b=this.a=null,this.c=f||null,this.f=!!b}function $e(f){f.a||(f.a=new Ii,f.b=0,f.c&&function(f,b){if(f){f=f.split("&");for(var x=0;x<f.length;x++){var T=f[x].indexOf("="),L=null;if(0<=T){var U=f[x].substring(0,T);L=f[x].substring(T+1)}else U=f[x];b(U,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}(f.c,function(b,x){f.add(decodeURIComponent(b.replace(/\+/g," ")),x)}))}function ir(f,b){$e(f),b=hn(f,b),Tn(f.a.b,b)&&(f.c=null,f.b-=f.a.get(b).length,Tn((f=f.a).b,b)&&(delete f.b[b],f.c--,f.a.length>2*f.c&&vs(f)))}function So(f,b){return $e(f),b=hn(f,b),Tn(f.a.b,b)}function we(f,b,x){ir(f,b),0<x.length&&(f.c=null,f.a.set(hn(f,b),Q(x)),f.b+=x.length)}function hn(f,b){return b=String(b),f.f&&(b=b.toLowerCase()),b}function pa(f,b){this.b=f,this.a=b}function rr(f){this.g=f||Zs,f=yt.PerformanceNavigationTiming?0<(f=yt.performance.getEntriesByType("navigation")).length&&("hq"==f[0].nextHopProtocol||"h2"==f[0].nextHopProtocol):!!(yt.ia&&yt.ia.ya&&yt.ia.ya()&&yt.ia.ya().qb),this.f=f?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(tt=nr.prototype).add=function(f,b){$e(this),this.c=null,f=hn(this,f);var x=this.a.get(f);return x||this.a.set(f,x=[]),x.push(b),this.b+=1,this},tt.forEach=function(f,b){$e(this),this.a.forEach(function(x,T){xr(x,function(L){f.call(b,L,T,this)},this)},this)},tt.L=function(){$e(this);for(var f=this.a.K(),b=this.a.L(),x=[],T=0;T<b.length;T++)for(var L=f[T],U=0;U<L.length;U++)x.push(b[T]);return x},tt.K=function(f){$e(this);var b=[];if("string"==typeof f)So(this,f)&&(b=st(b,this.a.get(hn(this,f))));else{f=this.a.K();for(var x=0;x<f.length;x++)b=st(b,f[x])}return b},tt.set=function(f,b){return $e(this),this.c=null,So(this,f=hn(this,f))&&(this.b-=this.a.get(f).length),this.a.set(f,[b]),this.b+=1,this},tt.get=function(f,b){return f&&0<(f=this.K(f)).length?String(f[0]):b},tt.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var f=[],b=this.a.L(),x=0;x<b.length;x++){var T=b[x],L=encodeURIComponent(String(T));T=this.K(T);for(var U=0;U<T.length;U++){var it=L;""!==T[U]&&(it+="="+encodeURIComponent(String(T[U]))),f.push(it)}}return this.c=f.join("&")};var Zs=10;function Br(f){return!!f.b||!!f.a&&f.a.size>=f.f}function Qs(f){return f.b?1:f.a?f.a.size:0}function Si(f,b){return f.b?f.b==b:!!f.a&&f.a.has(b)}function fn(f,b){f.a?f.a.add(b):f.b=b}function Js(f,b){f.b&&f.b==b?f.b=null:f.a&&f.a.has(b)&&f.a.delete(b)}function oi(f){var b,x;if(null!=f.b)return f.c.concat(f.b.s);if(null!=f.a&&0!==f.a.size){var T=f.c;try{for(var L=Bi(f.a.values()),U=L.next();!U.done;U=L.next())T=T.concat(U.value.s)}catch(kt){b={error:kt}}finally{try{U&&!U.done&&(x=L.return)&&x.call(L)}finally{if(b)throw b.error}}return T}return Q(f.c)}function bs(){}function to(){this.a=new bs}function sr(f,b,x){var T=x||"";try{Nr(f,function(L,U){var it=L;G(L)&&(it=Yt(L)),b.push(T+U+"="+encodeURIComponent(it))})}catch(L){throw b.push(T+"type="+encodeURIComponent("_badmap")),L}}function Ve(f,b,x,T,L){try{b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null,L(T)}catch(U){}}rr.prototype.cancel=function(){var f,b;if(this.c=oi(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var x=Bi(this.a.values()),T=x.next();!T.done;T=x.next())T.value.cancel()}catch(U){f={error:U}}finally{try{T&&!T.done&&(b=x.return)&&b.call(x)}finally{if(f)throw f.error}}this.a.clear()}},bs.prototype.stringify=function(f){return yt.JSON.stringify(f,void 0)},bs.prototype.parse=function(f){return yt.JSON.parse(f,void 0)};var zr=yt.JSON.parse;function ce(f){It.call(this),this.headers=new Ii,this.H=f||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=no,this.D=this.F=!1}J(ce,It);var no="",Ft=/^https?$/i,le=["POST","PUT"];function Bn(f){return"content-type"==f.toLowerCase()}function or(f,b){f.b=!1,f.a&&(f.g=!0,f.a.abort(),f.g=!1),f.f=b,f.h=5,Ti(f),Ai(f)}function Ti(f){f.u||(f.u=!0,f.dispatchEvent("complete"),f.dispatchEvent("error"))}function ar(f){if(f.b&&void 0!==S&&(!f.s[1]||4!=dn(f)||2!=f.X()))if(f.l&&4==dn(f))$s(f.za,0,f);else if(f.dispatchEvent("readystatechange"),4==dn(f)){f.b=!1;try{var T,b=f.X();t:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break t;default:x=!1}if(!(T=x)){var L;if(L=0===b){var U=String(f.B).match(be)[1]||null;if(!U&&yt.self&&yt.self.location){var it=yt.self.location.protocol;U=it.substr(0,it.length-1)}L=!Ft.test(U?U.toLowerCase():"")}T=L}if(T)f.dispatchEvent("complete"),f.dispatchEvent("success");else{f.h=6;try{var kt=2<dn(f)?f.a.statusText:""}catch(Ct){kt=""}f.f=kt+" ["+f.X()+"]",Ti(f)}}finally{Ai(f)}}}function Ai(f,b){if(f.a){Ci(f);var x=f.a,T=f.s[0]?gi:null;f.a=null,f.s=null,b||f.dispatchEvent("ready");try{x.onreadystatechange=T}catch(L){}}}function Ci(f){f.a&&f.D&&(f.a.ontimeout=null),f.m&&(yt.clearTimeout(f.m),f.m=null)}function dn(f){return f.a?f.a.readyState:0}function zn(f,b,x){t:{for(T in x){var T=!1;break t}T=!0}T||(x=function(f){var b="";return fe(f,function(x,T){b+=T,b+=":",b+=x,b+="\r\n"}),b}(x),"string"==typeof f?null!=x&&encodeURIComponent(String(x)):zt(f,b,x))}function Me(f,b,x){return x&&x.internalChannelParams&&x.internalChannelParams[f]||b}function Hn(f){this.pa=0,this.g=[],this.c=new In,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.W=this.i=this.O=this.l=null,this.La=this.R=0,this.Ia=Me("failFast",!1,f),this.H=this.m=this.j=this.h=this.f=null,this.T=!0,this.I=this.oa=this.P=-1,this.U=this.o=this.u=0,this.Fa=Me("baseRetryDelayMs",5e3,f),this.Ma=Me("retryDelaySeedMs",1e4,f),this.Ja=Me("forwardChannelMaxRetries",2,f),this.ma=Me("forwardChannelRequestTimeoutMs",2e4,f),this.Ka=f&&f.g||void 0,this.D=void 0,this.C=f&&f.supportsCrossDomainXhr||!1,this.J="",this.b=new rr(f&&f.concurrentRequestLimit),this.ka=new to,this.da=f&&f.fastHandshake||!1,this.Ga=f&&f.b||!1,f&&f.f&&(this.c.a=!1),f&&f.forceLongPolling&&(this.T=!1),this.V=!this.da&&this.T&&f&&f.c||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null}function ur(f){if(qn(f),3==f.v){var b=f.R++,x=Le(f.B);zt(x,"SID",f.J),zt(x,"RID",b),zt(x,"TYPE","terminate"),Se(f,x),(b=new Zi(f,f.c,b,void 0)).H=2,b.i=Fe(Le(x)),x=!1,yt.navigator&&yt.navigator.sendBeacon&&(x=yt.navigator.sendBeacon(b.i.toString(),"")),!x&&yt.Image&&((new Image).src=b.i,x=!0),x||(b.a=so(b.g,null),b.a.ba(b.i)),b.u=nt(),Qi(b)}gn(f)}function Wn(f){f.a&&(qr(f),f.a.cancel(),f.a=null)}function qn(f){Wn(f),f.j&&(yt.clearTimeout(f.j),f.j=null),Mi(f),f.b.cancel(),f.h&&("number"==typeof f.h&&yt.clearTimeout(f.h),f.h=null)}function ws(f,b){f.g.push(new pa(f.La++,b)),3==f.v&&Et(f)}function Et(f){Br(f.b)||f.h||(f.h=!0,Rt(f.Ba,f),f.u=0)}function cr(f,b){var x;x=b?b.f:f.R++;var T=Le(f.B);zt(T,"SID",f.J),zt(T,"RID",x),zt(T,"AID",f.P),Se(f,T),f.i&&f.l&&zn(T,f.i,f.l),x=new Zi(f,f.c,x,f.u+1),null===f.i&&(x.B=f.l),b&&(f.g=b.s.concat(f.g)),b=ai(f,x,1e3),x.setTimeout(Math.round(.5*f.ma)+Math.round(.5*f.ma*Math.random())),fn(f.b,x),ys(x,T,b)}function Se(f,b){f.f&&Nr({},function(x,T){zt(b,T,x)})}function ai(f,b,x){x=Math.min(f.g.length,x);var T=f.f?Zt(f.f.Ha,f.f,f):null;t:for(var L=f.g,U=-1;;){var it=["count="+x];-1==U?0<x?it.push("ofs="+(U=L[0].b)):U=0:it.push("ofs="+U);for(var kt=!0,Ct=0;Ct<x;Ct++){var pe=L[Ct].b,Ke=L[Ct].a;if(0>(pe-=U))U=Math.max(0,L[Ct].b-100),kt=!1;else try{sr(Ke,it,"req"+pe+"_")}catch(tn){T&&T(Ke)}}if(kt){T=it.join("&");break t}}return f=f.g.splice(0,x),b.s=f,T}function io(f){f.a||f.j||(f.U=1,Rt(f.Aa,f),f.o=0)}function Wr(f){return!(f.a||f.j||3<=f.o||(f.U++,f.j=ni(Zt(f.Aa,f),To(f,f.o)),f.o++,0))}function qr(f){null!=f.s&&(yt.clearTimeout(f.s),f.s=null)}function lr(f){f.a=new Zi(f,f.c,"rpc",f.U),null===f.i&&(f.a.B=f.l),f.a.O=0;var b=Le(f.la);zt(b,"RID","rpc"),zt(b,"SID",f.J),zt(b,"CI",f.H?"0":"1"),zt(b,"AID",f.P),Se(f,b),zt(b,"TYPE","xmlhttp"),f.i&&f.l&&zn(b,f.i,f.l),f.D&&f.a.setTimeout(f.D);var x=f.a;f=f.ga,x.H=1,x.i=Fe(Le(b)),x.j=null,x.I=!0,Oe(x,f)}function Mi(f){null!=f.m&&(yt.clearTimeout(f.m),f.m=null)}function Gr(f,b){var x=null;if(f.a==b){Mi(f),qr(f),f.a=null;var T=2}else{if(!Si(f.b,b))return;x=b.s,Js(f.b,b),T=1}if(f.I=b.N,0!=f.v)if(b.b)if(1==T){x=b.j?b.j.length:0,b=nt()-b.u;var L=f.u;(T=Dr()).dispatchEvent(new qe(T,x,b,L)),Et(f)}else io(f);else if(3==(L=b.h)||0==L&&0<f.I||!(1==T&&function(f,b){return!(Qs(f.b)>=f.b.f-(f.h?1:0)||(f.h?(f.g=b.s.concat(f.g),0):1==f.v||2==f.v||f.u>=(f.Ia?0:f.Ja)||(f.h=ni(Zt(f.Ba,f,b),To(f,f.u)),f.u++,0)))}(f,b)||2==T&&Wr(f)))switch(x&&0<x.length&&(b=f.b,b.c=b.c.concat(x)),L){case 1:pn(f,5);break;case 4:pn(f,10);break;case 3:pn(f,6);break;default:pn(f,2)}}function To(f,b){var x=f.Fa+Math.floor(Math.random()*f.Ma);return f.f||(x*=2),x*b}function pn(f,b){if(f.c.info("Error code "+b),2==b){var x=null;f.f&&(x=null);var T=Zt(f.Xa,f);x||(x=new ri("//www.google.com/images/cleardot.gif"),yt.location&&"http"==yt.location.protocol||Qe(x,"https"),Fe(x)),function(f,b){var x=new In;if(yt.Image){var T=new Image;T.onload=at(Ve,x,T,"TestLoadImage: loaded",!0,b),T.onerror=at(Ve,x,T,"TestLoadImage: error",!1,b),T.onabort=at(Ve,x,T,"TestLoadImage: abort",!1,b),T.ontimeout=at(Ve,x,T,"TestLoadImage: timeout",!1,b),yt.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=f}else b(!1)}(x.toString(),T)}else $t(2);f.v=0,f.f&&f.f.ra(b),gn(f),qn(f)}function gn(f){f.v=0,f.I=-1,f.f&&((0!=oi(f.b).length||0!=f.g.length)&&(f.b.c.length=0,Q(f.g),f.g.length=0),f.f.qa())}function ro(f,b,x){var T=function(f){return f instanceof ri?Le(f):new ri(f,void 0)}(x);if(""!=T.c)b&&Rr(T,b+"."+T.c),Fr(T,T.h);else{var L=yt.location;T=function(f,b,x,T){var L=new ri(null,void 0);return f&&Qe(L,f),b&&Rr(L,b),x&&Fr(L,x),T&&(L.g=T),L}(L.protocol,b?b+"."+L.hostname:L.hostname,+L.port,x)}return f.W&&fe(f.W,function(U,it){zt(T,it,U)}),x=f.na,(b=f.A)&&x&&zt(T,b,x),zt(T,"VER",f.ha),Se(f,T),T}function so(f,b){if(b&&!f.C)throw Error("Can't create secondary domain capable XhrIo object.");return(b=new ce(f.Ka)).F=f.C,b}function mn(){}function xs(){if(on&&!(10<=Number(hs)))throw Error("Environmental error: no available transport.")}function Je(f,b){It.call(this),this.a=new Hn(b),this.l=f,this.b=b&&b.messageUrlParams||null,f=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.a.l=f,f=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(f?f["X-WebChannel-Content-Type"]=b.messageContentType:f={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.a&&(f?f["X-WebChannel-Client-Profile"]=b.a:f={"X-WebChannel-Client-Profile":b.a}),this.a.O=f,(f=b&&b.httpHeadersOverwriteParam)&&!Y(f)&&(this.a.i=f),this.h=b&&b.supportsCrossDomainXhr||!1,this.g=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!Y(b)&&(this.a.A=b,null!==(f=this.b)&&b in f&&b in(f=this.b)&&delete f[b]),this.f=new Z(this)}function Ue(f){Xi.call(this);var b=f.__sm__;if(b){t:{for(var x in b){f=x;break t}f=void 0}(this.c=f)?(f=this.c,this.data=null!==b&&f in b?b[f]:void 0):this.data=b}else this.data=f}function Is(){Pr.call(this),this.status=1}function Z(f){this.a=f}(tt=ce.prototype).ba=function(f,b,x,T){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+f);b=b?b.toUpperCase():"GET",this.B=f,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(f){var b;return(b=f.a)||(b=f.a={}),b}(this.H?this.H:ms),this.a.onreadystatechange=Zt(this.za,this);try{this.A=!0,this.a.open(b,String(f),!0),this.A=!1}catch(U){return void or(this,U)}f=x||"";var L=new Ii(this.headers);T&&Nr(T,function(U,it){L.set(it,U)}),T=function(f){t:{for(var b=Bn,x=f.length,T="string"==typeof f?f.split(""):f,L=0;L<x;L++)if(L in T&&b.call(void 0,T[L],L,f)){b=L;break t}b=-1}return 0>b?null:"string"==typeof f?f.charAt(b):f[b]}(L.L()),x=yt.FormData&&f instanceof yt.FormData,!(0<=wr(le,b))||T||x||L.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),L.forEach(function(U,it){this.a.setRequestHeader(it,U)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Ci(this),0<this.o&&((this.D=function(f){return on&&ye(9)&&"number"==typeof f.timeout&&void 0!==f.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Zt(this.xa,this)):this.m=$s(this.xa,this.o,this)),this.l=!0,this.a.send(f),this.l=!1}catch(U){or(this,U)}},tt.xa=function(){void 0!==S&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},tt.abort=function(f){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=f||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ai(this))},tt.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Ai(this,!0)),ce.S.G.call(this)},tt.za=function(){this.j||(this.A||this.l||this.g?ar(this):this.Ta())},tt.Ta=function(){ar(this)},tt.X=function(){try{return 2<dn(this)?this.a.status:-1}catch(f){return-1}},tt.$=function(){try{return this.a?this.a.responseText:""}catch(f){return""}},tt.Na=function(f){if(this.a){var b=this.a.responseText;return f&&0==b.indexOf(f)&&(b=b.substring(f.length)),zr(b)}},tt.ua=function(){return this.h},tt.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(tt=Hn.prototype).ha=8,tt.v=1,tt.Ba=function(f){if(this.h)if(this.h=null,1==this.v){if(!f){this.R=Math.floor(1e5*Math.random()),f=this.R++;var T,b=new Zi(this,this.c,f,void 0),x=this.l;if(this.O&&(x?On(x=ae(x),this.O):x=this.O),null===this.i&&(b.B=x),this.da)t:{for(var L=T=0;L<this.g.length;L++){var U=this.g[L];if(void 0===(U="__data__"in U.a&&"string"==typeof(U=U.a.__data__)?U.length:void 0))break;if(4096<(T+=U)){T=L;break t}if(4096===T||L===this.g.length-1){T=L+1;break t}}T=1e3}else T=1e3;T=ai(this,b,T),zt(L=Le(this.B),"RID",f),zt(L,"CVER",22),this.A&&zt(L,"X-HTTP-Session-Id",this.A),Se(this,L),this.i&&x&&zn(L,this.i,x),fn(this.b,b),this.Ga&&zt(L,"TYPE","init"),this.da?(zt(L,"$req",T),zt(L,"SID","null"),b.V=!0,ys(b,L,null)):ys(b,L,T),this.v=2}}else 3==this.v&&(f?cr(this,f):0==this.g.length||Br(this.b)||cr(this))},tt.Aa=function(){if(this.j=null,lr(this),this.V&&!(this.F||null==this.a||0>=this.N)){var f=2*this.N;this.c.info("BP detection timer enabled: "+f),this.s=ni(Zt(this.Sa,this),f)}},tt.Sa=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Wn(this),lr(this))},tt.Ra=function(){null!=this.m&&(this.m=null,Wn(this),Wr(this),$t(19))},tt.Xa=function(f){f?(this.c.info("Successfully pinged google.com"),$t(2)):(this.c.info("Failed to ping google.com"),$t(1))},(tt=mn.prototype).ta=function(){},tt.sa=function(){},tt.ra=function(){},tt.qa=function(){},tt.Ha=function(){},xs.prototype.a=function(f,b){return new Je(f,b)},J(Je,It),(tt=Je.prototype).addEventListener=function(f,b,x,T){Je.S.addEventListener.call(this,f,b,x,T)},tt.removeEventListener=function(f,b,x,T){Je.S.removeEventListener.call(this,f,b,x,T)},tt.Oa=function(){this.a.f=this.f,this.h&&(this.a.C=!0);var f=this.a,b=this.l,x=this.b||void 0;$t(0),f.fa=b,f.W=x||{},f.H=f.T,f.B=ro(f,null,f.fa),Et(f)},tt.close=function(){ur(this.a)},tt.Pa=function(f){if("string"==typeof f){var b={};b.__data__=f,ws(this.a,b)}else this.g?((b={}).__data__=Yt(f),ws(this.a,b)):ws(this.a,f)},tt.G=function(){this.a.f=null,delete this.f,ur(this.a),delete this.a,Je.S.G.call(this)},J(Ue,Xi),J(Is,Pr),J(Z,mn),Z.prototype.ta=function(){this.a.dispatchEvent("a")},Z.prototype.sa=function(f){this.a.dispatchEvent(new Ue(f))},Z.prototype.ra=function(f){this.a.dispatchEvent(new Is(f))},Z.prototype.qa=function(){this.a.dispatchEvent("b")},xs.prototype.createWebChannel=xs.prototype.a,Je.prototype.send=Je.prototype.Pa,Je.prototype.open=Je.prototype.Oa,Je.prototype.close=Je.prototype.close,Ki.NO_ERROR=0,Ki.TIMEOUT=8,Ki.HTTP_ERROR=6,jn.COMPLETE="complete",Xs.EventType=Pe,Pe.OPEN="a",Pe.CLOSE="b",Pe.ERROR="c",Pe.MESSAGE="d",It.prototype.listen=It.prototype.va,ce.prototype.listenOnce=ce.prototype.wa,ce.prototype.getLastError=ce.prototype.Qa,ce.prototype.getLastErrorCode=ce.prototype.ua,ce.prototype.getStatus=ce.prototype.X,ce.prototype.getResponseJson=ce.prototype.Na,ce.prototype.getResponseText=ce.prototype.$,ce.prototype.send=ce.prototype.ba;var ui=function(){return new xs},ci=Ki,se=jn,Xt=Xs,ki=ce;const Be={createWebChannelTransport:ui,ErrorCode:Ki,EventType:jn,WebChannel:Xs,XhrIo:ce}},2019:(kn,me,lt)=>{lt.r(me),lt.d(me,{MainModule:()=>fy});var re=lt(8583),D=lt(3318),Bi=lt(9112),Lt=lt(8002),tt=lt(9761),S=lt(7716),yt=lt(3637),gi=lt(7574),rn=lt(4402),j=lt(5917),G=lt(7393);function Ie(){return i=>i.lift(new Dn)}class Dn{call(n,e){return e.subscribe(new rt(n))}}class rt extends G.L{constructor(n){super(n),this.hasPrev=!1}_next(n){let e;this.hasPrev?e=[this.prev,n]:this.hasPrev=!0,this.prev=n,e&&this.destination.next(e)}}var Gt=lt(2145),Pn=lt(7519),Zt=lt(5435),at=lt(9746),nt=lt(57),J=lt(4395),sn=lt.n(J),W=(lt(5910),lt(9765),lt(6682),lt(3190));lt(2066),lt(8049),lt(2639);const pt=new S.OlP("angularfire2.auth.use-emulator");function Ir(i,n){return function(i,n=yt.z){return new gi.y(e=>{let o;return null!=n?n.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},e)}):o=i.onSnapshot({includeMetadataChanges:!0},e),()=>{null!=o&&o()}})}(i,n)}function on(i,n){return Ir(i,n).pipe((0,Lt.U)(e=>({payload:e,type:"query"})))}function an(i,n){return on(i,n).pipe((0,tt.O)(void 0),Ie(),(0,Lt.U)(([e,o])=>{const u=o.payload.docChanges(),c=u.map(h=>({type:h.type,payload:h}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((h,p)=>{const g=u.find(_=>_.doc.ref.isEqual(h.ref)),y=null==e?void 0:e.payload.docs.find(_=>_.ref.isEqual(h.ref));g&&JSON.stringify(g.doc.metadata)===JSON.stringify(h.metadata)||!g&&y&&JSON.stringify(y.metadata)===JSON.stringify(h.metadata)||c.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:h}})}),c}))}function xn(i,n,e){return an(i,e).pipe((0,Gt.R)((o,u)=>function(i,n,e){return n.forEach(o=>{e.indexOf(o.type)>-1&&(i=function(i,n){switch(n.type){case"added":if(!i[n.newIndex]||!i[n.newIndex].doc.ref.isEqual(n.doc.ref))return yi(i,n.newIndex,0,n);break;case"modified":if(null==i[n.oldIndex]||i[n.oldIndex].doc.ref.isEqual(n.doc.ref)){if(n.oldIndex!==n.newIndex){const e=i.slice();return e.splice(n.oldIndex,1),e.splice(n.newIndex,0,n),e}return yi(i,n.newIndex,1,n)}break;case"removed":if(i[n.oldIndex]&&i[n.oldIndex].doc.ref.isEqual(n.doc.ref))return yi(i,n.oldIndex,1)}return i}(i,o))}),i}(o,u.map(c=>c.payload),n),[]),(0,Pn.x)(),(0,Lt.U)(o=>o.map(u=>({type:u.type,payload:u}))))}function yi(i,n,e,...o){const u=i.slice();return u.splice(n,e,...o),u}function Er(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class Sr{constructor(n,e,o){this.ref=n,this.query=e,this.afs=o}stateChanges(n){let e=an(this.query,this.afs.schedulers.outsideAngular);return n&&n.length>0&&(e=e.pipe((0,Lt.U)(o=>o.filter(u=>n.indexOf(u.type)>-1)))),e.pipe((0,tt.O)(void 0),Ie(),(0,Zt.h)(([o,u])=>u.length>0||!o),(0,Lt.U)(([o,u])=>u),this.afs.keepUnstableUntilFirst)}auditTrail(n){return this.stateChanges(n).pipe((0,Gt.R)((e,o)=>[...e,...o],[]))}snapshotChanges(n){const e=Er(n);return xn(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(n={}){return on(this.query,this.afs.schedulers.outsideAngular).pipe((0,Lt.U)(e=>e.payload.docs.map(o=>n.idField?Object.assign(Object.assign({},o.data()),{[n.idField]:o.id}):o.data())),this.afs.keepUnstableUntilFirst)}get(n){return(0,rn.D)(this.query.get(n)).pipe((0,at.QV)(this.afs.schedulers.insideAngular))}add(n){return this.ref.add(n)}doc(n){return new wt(this.ref.doc(n),this.afs)}}class wt{constructor(n,e){this.ref=n,this.afs=e}set(n,e){return this.ref.set(n,e)}update(n){return this.ref.update(n)}delete(){return this.ref.delete()}collection(n,e){const o=this.ref.collection(n),{ref:u,query:c}=hs(o,e);return new Sr(u,c,this.afs)}snapshotChanges(){return(i=this.ref,n=this.afs.schedulers.outsideAngular,Ir(i,n).pipe((0,tt.O)(void 0),Ie(),(0,Lt.U)(([e,o])=>o.exists?(null==e?void 0:e.exists)?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))).pipe(this.afs.keepUnstableUntilFirst);var i,n}valueChanges(n={}){return this.snapshotChanges().pipe((0,Lt.U)(({payload:e})=>n.idField?Object.assign(Object.assign({},e.data()),{[n.idField]:e.id}):e.data()))}get(n){return(0,rn.D)(this.ref.get(n)).pipe((0,at.QV)(this.afs.schedulers.insideAngular))}}class Jn{constructor(n,e){this.query=n,this.afs=e}stateChanges(n){return n&&0!==n.length?an(this.query,this.afs.schedulers.outsideAngular).pipe((0,Lt.U)(e=>e.filter(o=>n.indexOf(o.type)>-1)),(0,Zt.h)(e=>e.length>0),this.afs.keepUnstableUntilFirst):an(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(n){return this.stateChanges(n).pipe((0,Gt.R)((e,o)=>[...e,...o],[]))}snapshotChanges(n){const e=Er(n);return xn(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(n={}){return on(this.query,this.afs.schedulers.outsideAngular).pipe((0,Lt.U)(o=>o.payload.docs.map(u=>n.idField?Object.assign({[n.idField]:u.id},u.data()):u.data())),this.afs.keepUnstableUntilFirst)}get(n){return(0,rn.D)(this.query.get(n)).pipe((0,at.QV)(this.afs.schedulers.insideAngular))}}const Hs=new S.OlP("angularfire2.enableFirestorePersistence"),ye=new S.OlP("angularfire2.firestore.persistenceSettings"),zi=new S.OlP("angularfire2.firestore.settings"),ls=new S.OlP("angularfire2.firestore.use-emulator");function hs(i,n=(e=>e)){return{query:n(i),ref:i}}let Tr=(()=>{class i{constructor(e,o,u,c,h,p,g,y,_){this.schedulers=new nt.HU(p),this.keepUnstableUntilFirst=(0,nt.ss)(this.schedulers);const I=(0,nt.on)(e,p,o);!sn().auth&&_&&(0,nt.yq)();const A=y;[this.firestore,this.persistenceEnabled$]=(0,nt.sI)(`${I.name}.firestore`,"AngularFirestore",I,()=>{const M=p.runOutsideAngular(()=>I.firestore());if(c&&M.settings(c),A&&M.useEmulator(...A),u&&!(0,re.PM)(h)){const k=()=>{try{return(0,rn.D)(M.enablePersistence(g||void 0).then(()=>!0,()=>!1))}catch(N){return"undefined"!=typeof console&&console.warn(N),(0,j.of)(!1)}};return[M,p.runOutsideAngular(k)]}return[M,(0,j.of)(!1)]},[c,A,u])}collection(e,o){let u;u="string"==typeof e?this.firestore.collection(e):e;const{ref:c,query:h}=hs(u,o),p=this.schedulers.ngZone.run(()=>c);return new Sr(p,h,this)}collectionGroup(e,o){const u=o||(h=>h),c=this.firestore.collectionGroup(e);return new Jn(u(c),this)}doc(e){let o;o="string"==typeof e?this.firestore.doc(e):e;const u=this.schedulers.ngZone.run(()=>o);return new wt(u,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(e){return new(e||i)(S.LFG(nt.Dh),S.LFG(nt.xv,8),S.LFG(Hs,8),S.LFG(zi,8),S.LFG(S.Lbi),S.LFG(S.R0b),S.LFG(ye,8),S.LFG(ls,8),S.LFG(pt,8))},i.\u0275prov=S.Yz7({factory:function(){return new i(S.LFG(nt.Dh),S.LFG(nt.xv,8),S.LFG(Hs,8),S.LFG(zi,8),S.LFG(S.Lbi),S.LFG(S.R0b),S.LFG(ye,8),S.LFG(ls,8),S.LFG(pt,8))},token:i,providedIn:"any"}),i})(),Ws=(()=>{class i{constructor(e){this.firestore=e}get(){return this.firestore.collection("Settings").get().pipe((0,Lt.U)(e=>e.docs[0].data()))}}return i.\u0275fac=function(e){return new(e||i)(S.LFG(Tr))},i.\u0275prov=S.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var te=lt(3197),Qt=lt(5469);function Mt(i,n){1&i&&(S.TgZ(0,"div",1),S._UZ(1,"i",2),S._uU(2,"\xa0 "),S.TgZ(3,"span",3),S._uU(4,"API seems to be unhealthy or cannot be reached. Please try again later"),S.qZA(),S.qZA())}let un=(()=>{class i{constructor(e){this.exchangeRatesService=e,this.isHealthy$=this.exchangeRatesService.isHealthy()}}return i.\u0275fac=function(e){return new(e||i)(S.Y36(te.s))},i.\u0275cmp=S.Xpm({type:i,selectors:[["app-exchange-rates-service-health-alert"]],decls:2,vars:3,consts:[["class","alert alert-danger","style","width: fit-content;",4,"ngIf"],[1,"alert","alert-danger",2,"width","fit-content"],[1,"fa","fa-warning"],["translate",""]],template:function(e,o){1&e&&(S.YNc(0,Mt,5,0,"div",0),S.ALo(1,"async")),2&e&&S.Q6J("ngIf",!1===S.lcZ(1,1,o.isHealthy$))},directives:[re.O5,Qt.Pi],pipes:[re.Ov],encapsulation:2}),i})();var Hi=lt(6215),_o=lt(5304),Wi=lt(1978),Ar=lt(250),vi=lt(3034);function qi(i,n){1&i&&S._UZ(0,"div",15)}function Gi(i,n){if(1&i&&(S.TgZ(0,"h2"),S._uU(1),S.ALo(2,"async"),S.ALo(3,"toLocaleDecimal"),S.qZA()),2&i){const e=n.ngIf;S.xp6(1),S.hij("$",S.lcZ(2,1,S.xi3(3,3,e,"1.0-2")),"")}}function ne(i,n){if(1&i&&(S.TgZ(0,"div",16),S.TgZ(1,"h6",7),S._uU(2,"Mid"),S.qZA(),S.TgZ(3,"h2"),S._uU(4),S.ALo(5,"async"),S.ALo(6,"toLocaleDecimal"),S.qZA(),S.qZA()),2&i){const e=n.ngIf;S.xp6(4),S.hij("$",S.lcZ(5,1,S.xi3(6,3,e,"1.0-2")),"")}}function At(i,n){1&i&&S._UZ(0,"div",15)}function Cr(i,n){if(1&i&&(S.TgZ(0,"h2"),S._uU(1),S.ALo(2,"async"),S.ALo(3,"toLocaleDecimal"),S.qZA()),2&i){const e=n.ngIf;S.xp6(1),S.hij("$",S.lcZ(2,1,S.xi3(3,3,e,"1.0-2")),"")}}function ha(i,n){1&i&&(S.TgZ(0,"span",19),S.ALo(1,"translate"),S._UZ(2,"i",20),S.TgZ(3,"span",21),S._uU(4,"Error detected"),S.qZA(),S.qZA()),2&i&&S.Q6J("ngbTooltip",S.lcZ(1,1,"There is an error in the currency source provider. Please retry again later"))}function qs(i,n){if(1&i&&(S.TgZ(0,"div",17),S.YNc(1,ha,5,3,"span",18),S.qZA()),2&i){const e=S.oxw().ngIf;S.xp6(1),S.Q6J("ngIf",e.error)}}function Gs(i,n){if(1&i&&(S.TgZ(0,"div",22),S.TgZ(1,"span",23),S._UZ(2,"i",24),S.qZA(),S.Hsn(3),S.qZA()),2&i){S.oxw();const e=S.MAs(19);S.xp6(1),S.Q6J("ngbTooltip",e)}}function ve(i,n){if(1&i&&(S.TgZ(0,"span",25),S._uU(1,"Updated"),S.qZA(),S._uU(2),S.ALo(3,"amTimeAgo")),2&i){const e=S.oxw().ngIf;S.xp6(2),S.hij(" ",S.xi3(3,1,null==e.exchangeRate?null:e.exchangeRate.updatedAt,!1)," ")}}function Mr(i,n){if(1&i&&(S.TgZ(0,"div",1),S.TgZ(1,"div",2),S.TgZ(2,"div",3),S._UZ(3,"i",4),S.qZA(),S.TgZ(4,"div",5),S.TgZ(5,"div",6),S.TgZ(6,"h6",7),S._uU(7,"Buy"),S.qZA(),S.YNc(8,qi,1,0,"div",8),S.YNc(9,Gi,4,6,"h2",9),S.qZA(),S.YNc(10,ne,7,6,"div",10),S.TgZ(11,"div",11),S.TgZ(12,"h6",7),S._uU(13,"Sell"),S.qZA(),S.YNc(14,At,1,0,"div",8),S.YNc(15,Cr,4,6,"h2",9),S.qZA(),S.qZA(),S.YNc(16,qs,2,1,"div",12),S.YNc(17,Gs,4,1,"div",13),S.qZA(),S.YNc(18,ve,4,4,"ng-template",null,14,S.W1O),S.qZA()),2&i){const e=n.ngIf,o=S.oxw();S.ekj("card-lift--hover",o.liftOnHover),S.xp6(8),S.Q6J("ngIf",e.loading),S.xp6(1),S.Q6J("ngIf",null==e.exchangeRate?null:e.exchangeRate.buyPrice),S.xp6(1),S.Q6J("ngIf",o.showMidPrice&&e.midPrice),S.xp6(4),S.Q6J("ngIf",e.loading),S.xp6(1),S.Q6J("ngIf",null==e.exchangeRate?null:e.exchangeRate.sellPrice),S.xp6(1),S.Q6J("ngIf",e.error),S.xp6(1),S.Q6J("ngIf",!e.loading)}}const Ln=["*"];let de=(()=>{class i{constructor(e){this.exchangeRatesService=e,this.currencyIdSubject=new Hi.X(null);const o=u=>u.buyPrice+(u.sellPrice-u.buyPrice)/2;this.model$=this.currencyIdSubject.pipe((0,Zt.h)(u=>!!u),(0,W.w)(u=>this.exchangeRatesService.get(u).pipe((0,Lt.U)(c=>({currencyId:u,exchangeRate:c,midPrice:o(c),loading:!1})),(0,_o.K)(c=>{const{status:h,title:p}=c.error||{};return(0,j.of)({currencyId:u,error:{status:h,message:p},loading:!0})}))),(0,tt.O)({loading:!0}))}set currencyId(e){this.currencyIdSubject.next(e)}}return i.\u0275fac=function(e){return new(e||i)(S.Y36(te.s))},i.\u0275cmp=S.Xpm({type:i,selectors:[["app-exchange-rate-card"]],inputs:{currencyId:"currencyId",showMidPrice:"showMidPrice",liftOnHover:"liftOnHover"},ngContentSelectors:Ln,decls:2,vars:3,consts:[["class","card shadow border-0",3,"card-lift--hover",4,"ngIf"],[1,"card","shadow","border-0"],[1,"card-body","py-5","text-center"],[1,"icon","icon-shape","icon-shape-success","rounded-circle","mb-4"],[1,"fa","fa-money"],[1,"d-flex","justify-content-between"],[1,"mr-4"],["translate","",1,"text-success","text-uppercase"],["class","animated-background",4,"ngIf"],[4,"ngIf"],["class","mr-4 ml-4",4,"ngIf"],[1,"ml-4"],["class","d-flex flex-wrap align-items-center justify-content-between mt-4",4,"ngIf"],["class","d-flex flex-wrap align-items-center justify-content-between",4,"ngIf"],["lastUpdateAt",""],[1,"animated-background"],[1,"mr-4","ml-4"],[1,"d-flex","flex-wrap","align-items-center","justify-content-between","mt-4"],["class","flex-grow-1",3,"ngbTooltip",4,"ngIf"],[1,"flex-grow-1",3,"ngbTooltip"],[1,"fa","fa-exclamation-circle","text-danger","mx-1"],["translate","",1,"text-muted","small"],[1,"d-flex","flex-wrap","align-items-center","justify-content-between"],[1,"btn","btn-link",3,"ngbTooltip"],[1,"fa","fa-info-circle"],["translate",""]],template:function(e,o){1&e&&(S.F$t(),S.YNc(0,Mr,20,9,"div",0),S.ALo(1,"async")),2&e&&S.Q6J("ngIf",S.lcZ(1,1,o.model$))},directives:[re.O5,Qt.Pi,Wi._L],pipes:[re.Ov,Ar.e,Qt.X$,vi.eG],styles:[".animated-background[_ngcontent-%COMP%]{width:5em;height:1.5em}"],changeDetection:0}),i})();function Ze(){}const Ys=function(){let i=0;return function(){return i++}}();function xt(i){return null==i}function It(i){if(Array.isArray&&Array.isArray(i))return!0;const n=Object.prototype.toString.call(i);return"[object"===n.slice(0,7)&&"Array]"===n.slice(-6)}function St(i){return null!==i&&"[object Object]"===Object.prototype.toString.call(i)}const Yt=i=>("number"==typeof i||i instanceof Number)&&isFinite(+i);function We(i,n){return Yt(i)?i:n}function _t(i,n){return void 0===i?n:i}const fs=(i,n)=>"string"==typeof i&&i.endsWith("%")?parseFloat(i)/100*n:+i;function Bt(i,n,e){if(i&&"function"==typeof i.call)return i.apply(e,n)}function Rt(i,n,e,o){let u,c,h;if(It(i))if(c=i.length,o)for(u=c-1;u>=0;u--)n.call(e,i[u],u);else for(u=0;u<c;u++)n.call(e,i[u],u);else if(St(i))for(h=Object.keys(i),c=h.length,u=0;u<c;u++)n.call(e,i[h[u]],h[u])}function bi(i,n){let e,o,u,c;if(!i||!n||i.length!==n.length)return!1;for(e=0,o=i.length;e<o;++e)if(u=i[e],c=n[e],u.datasetIndex!==c.datasetIndex||u.index!==c.index)return!1;return!0}function _i(i){if(It(i))return i.map(_i);if(St(i)){const n=Object.create(null),e=Object.keys(i),o=e.length;let u=0;for(;u<o;++u)n[e[u]]=_i(i[e[u]]);return n}return i}function Yi(i){return-1===["__proto__","prototype","constructor"].indexOf(i)}function ds(i,n,e,o){if(!Yi(i))return;const u=n[i],c=e[i];St(u)&&St(c)?ti(u,c,o):n[i]=_i(c)}function ti(i,n,e){const o=It(n)?n:[n],u=o.length;if(!St(i))return i;const c=(e=e||{}).merger||ds;for(let h=0;h<u;++h){if(!St(n=o[h]))continue;const p=Object.keys(n);for(let g=0,y=p.length;g<y;++g)c(p[g],i,n,e)}return i}function Nn(i,n){return ti(i,n,{merger:ps})}function ps(i,n,e){if(!Yi(i))return;const o=n[i],u=e[i];St(o)&&St(u)?Nn(o,u):Object.prototype.hasOwnProperty.call(n,i)||(n[i]=_i(u))}const Ks={"":i=>i,x:i=>i.x,y:i=>i.y};function Rn(i,n){return(Ks[n]||(Ks[n]=function(i){const n=function(i){const n=i.split("."),e=[];let o="";for(const u of n)o+=u,o.endsWith("\\")?o=o.slice(0,-1)+".":(e.push(o),o="");return e}(i);return e=>{for(const o of n){if(""===o)break;e=e&&e[o]}return e}}(n)))(i)}function kr(i){return i.charAt(0).toUpperCase()+i.slice(1)}const Ee=i=>void 0!==i,In=i=>"function"==typeof i,Fn=(i,n)=>{if(i.size!==n.size)return!1;for(const e of i)if(!n.has(e))return!1;return!0},Pt=Math.PI,Ot=2*Pt,wo=Ot+Pt,wi=Number.POSITIVE_INFINITY,Dr=Pt/180,Vt=Pt/2,Wt=Pt/4,ei=2*Pt/3,$t=Math.log10,qe=Math.sign;function ni(i){const n=Math.round(i);i=ii(i,n,i/1e3)?n:i;const e=Math.pow(10,Math.floor($t(i))),o=i/e;return(o<=1?1:o<=2?2:o<=5?5:10)*e}function jn(i){return!isNaN(parseFloat(i))&&isFinite(i)}function ii(i,n,e){return Math.abs(i-n)<e}function Xs(i,n,e){let o,u,c;for(o=0,u=i.length;o<u;o++)c=i[o][e],isNaN(c)||(n.min=Math.min(n.min,c),n.max=Math.max(n.max,c))}function Pe(i){return i*(Pt/180)}function Xi(i){return i*(180/Pt)}function Pr(i){if(!Yt(i))return;let n=1,e=0;for(;Math.round(i*n)/n!==i;)n*=10,e++;return e}function ms(i,n){const e=n.x-i.x,o=n.y-i.y,u=Math.sqrt(e*e+o*o);let c=Math.atan2(o,e);return c<-.5*Pt&&(c+=Ot),{angle:c,distance:u}}function xi(i,n){return Math.sqrt(Math.pow(n.x-i.x,2)+Math.pow(n.y-i.y,2))}function Zi(i,n){return(i-n+wo)%Ot-Pt}function Ge(i){return(i%Ot+Ot)%Ot}function Ce(i,n,e,o){const u=Ge(i),c=Ge(n),h=Ge(e),p=Ge(c-u),g=Ge(h-u),y=Ge(u-c),_=Ge(u-h);return u===c||u===h||o&&c===h||p>g&&y<_}function ie(i,n,e){return Math.max(n,Math.min(e,i))}function Oe(i,n,e,o=1e-6){return i>=Math.min(n,e)-o&&i<=Math.max(n,e)+o}function Ye(i,n,e){e=e||(h=>i[h]<n);let c,o=i.length-1,u=0;for(;o-u>1;)c=u+o>>1,e(c)?u=c:o=c;return{lo:u,hi:o}}const cn=(i,n,e,o)=>Ye(i,e,o?u=>i[u][n]<=e:u=>i[u][n]<e),Qi=(i,n,e)=>Ye(i,e,o=>i[o][n]>=e),tr=["push","pop","shift","splice","unshift"];function Sn(i,n){const e=i._chartjs;if(!e)return;const o=e.listeners,u=o.indexOf(n);-1!==u&&o.splice(u,1),!(o.length>0)&&(tr.forEach(c=>{delete i[c]}),delete i._chartjs)}function Lr(i){const n=new Set;let e,o;for(e=0,o=i.length;e<o;++e)n.add(i[e]);return n.size===o?i:Array.from(n)}const Nr="undefined"==typeof window?function(i){return i()}:window.requestAnimationFrame;function Ii(i,n,e){const o=e||(h=>Array.prototype.slice.call(h));let u=!1,c=[];return function(...h){c=o(h),u||(u=!0,Nr.call(window,()=>{u=!1,i.apply(n,c)}))}}const Tn=i=>"start"===i?"left":"end"===i?"right":"center",be=(i,n,e)=>"start"===i?n:"end"===i?e:(n+e)/2;function ri(i,n,e){const o=n.length;let u=0,c=o;if(i._sorted){const{iScale:h,_parsed:p}=i,g=h.axis,{min:y,max:_,minDefined:I,maxDefined:A}=h.getUserBounds();I&&(u=ie(Math.min(cn(p,h.axis,y).lo,e?o:cn(n,g,h.getPixelForValue(y)).lo),0,o-1)),c=A?ie(Math.max(cn(p,h.axis,_,!0).hi+1,e?0:cn(n,g,h.getPixelForValue(_),!0).hi+1),u,o)-u:o-u}return{start:u,count:c}}function Le(i){const{xScale:n,yScale:e,_scaleRanges:o}=i,u={xmin:n.min,xmax:n.max,ymin:e.min,ymax:e.max};if(!o)return i._scaleRanges=u,!0;const c=o.xmin!==n.min||o.xmax!==n.max||o.ymin!==e.min||o.ymax!==e.max;return Object.assign(o,u),c}const Qe=i=>0===i||1===i,Rr=(i,n,e)=>-Math.pow(2,10*(i-=1))*Math.sin((i-n)*Ot/e),Fr=(i,n,e)=>Math.pow(2,-10*i)*Math.sin((i-n)*Ot/e)+1,er={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>1-Math.cos(i*Vt),easeOutSine:i=>Math.sin(i*Vt),easeInOutSine:i=>-.5*(Math.cos(Pt*i)-1),easeInExpo:i=>0===i?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>1===i?1:1-Math.pow(2,-10*i),easeInOutExpo:i=>Qe(i)?i:i<.5?.5*Math.pow(2,10*(2*i-1)):.5*(2-Math.pow(2,-10*(2*i-1))),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>Qe(i)?i:Rr(i,.075,.3),easeOutElastic:i=>Qe(i)?i:Fr(i,.075,.3),easeInOutElastic(i){const n=.1125;return Qe(i)?i:i<.5?.5*Rr(2*i,n,.45):.5+.5*Fr(2*i-1,n,.45)},easeInBack(i){const n=1.70158;return i*i*((n+1)*i-n)},easeOutBack(i){const n=1.70158;return(i-=1)*i*((n+1)*i+n)+1},easeInOutBack(i){let n=1.70158;return(i/=.5)<1?i*i*((1+(n*=1.525))*i-n)*.5:.5*((i-=2)*i*((1+(n*=1.525))*i+n)+2)},easeInBounce:i=>1-er.easeOutBounce(1-i),easeOutBounce(i){const n=7.5625,e=2.75;return i<1/e?n*i*i:i<2/e?n*(i-=1.5/e)*i+.75:i<2.5/e?n*(i-=2.25/e)*i+.9375:n*(i-=2.625/e)*i+.984375},easeInOutBounce:i=>i<.5?.5*er.easeInBounce(2*i):.5*er.easeOutBounce(2*i-1)+.5};function zt(i){return i+.5|0}const Fe=(i,n,e)=>Math.max(Math.min(i,e),n);function jr(i){return Fe(zt(2.55*i),0,255)}function si(i){return Fe(zt(255*i),0,255)}function je(i){return Fe(zt(i/2.55)/100,0,1)}function ln(i){return Fe(zt(100*i),0,100)}const _e={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Vr=[..."0123456789ABCDEF"],Ei=i=>Vr[15&i],Io=i=>Vr[(240&i)>>4]+Vr[15&i],Vn=i=>(240&i)>>4==(15&i);const So=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function we(i,n,e){const o=n*Math.min(e,1-e),u=(c,h=(c+i/30)%12)=>e-o*Math.max(Math.min(h-3,9-h,1),-1);return[u(0),u(8),u(4)]}function hn(i,n,e){const o=(u,c=(u+i/60)%6)=>e-e*n*Math.max(Math.min(c,4-c,1),0);return[o(5),o(3),o(1)]}function Ur(i,n,e){const o=we(i,1,.5);let u;for(n+e>1&&(u=1/(n+e),n*=u,e*=u),u=0;u<3;u++)o[u]*=1-n-e,o[u]+=n;return o}function rr(i){const e=i.r/255,o=i.g/255,u=i.b/255,c=Math.max(e,o,u),h=Math.min(e,o,u),p=(c+h)/2;let g,y,_;return c!==h&&(_=c-h,y=p>.5?_/(2-c-h):_/(c+h),g=function(i,n,e,o,u){return i===u?(n-e)/o+(n<e?6:0):n===u?(e-i)/o+2:(i-n)/o+4}(e,o,u,_,c),g=60*g+.5),[0|g,y||0,p]}function Zs(i,n,e,o){return(Array.isArray(n)?i(n[0],n[1],n[2]):i(n,e,o)).map(si)}function Br(i,n,e){return Zs(we,i,n,e)}function fn(i){return(i%360+360)%360}const to={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},sr={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Ve;const ce=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,le=i=>i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055,Un=i=>i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4);function or(i,n,e){if(i){let o=rr(i);o[n]=Math.max(0,Math.min(o[n]+o[n]*e,0===n?360:1)),o=Br(o),i.r=o[0],i.g=o[1],i.b=o[2]}}function Ti(i,n){return i&&Object.assign(n||{},i)}function ar(i){var n={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(n={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(n.a=si(i[3]))):(n=Ti(i,{r:0,g:0,b:0,a:1})).a=si(n.a),n}function Ai(i){return"r"===i.charAt(0)?function(i){const n=ce.exec(i);let o,u,c,e=255;if(n){if(n[7]!==o){const h=+n[7];e=n[8]?jr(h):Fe(255*h,0,255)}return o=+n[1],u=+n[3],c=+n[5],o=255&(n[2]?jr(o):Fe(o,0,255)),u=255&(n[4]?jr(u):Fe(u,0,255)),c=255&(n[6]?jr(c):Fe(c,0,255)),{r:o,g:u,b:c,a:e}}}(i):function(i){const n=So.exec(i);let o,e=255;if(!n)return;n[5]!==o&&(e=n[6]?jr(+n[5]):si(+n[5]));const u=fn(+n[2]),c=+n[3]/100,h=+n[4]/100;return o="hwb"===n[1]?function(i,n,e){return Zs(Ur,i,n,e)}(u,c,h):"hsv"===n[1]?function(i,n,e){return Zs(hn,i,n,e)}(u,c,h):Br(u,c,h),{r:o[0],g:o[1],b:o[2],a:e}}(i)}class Ci{constructor(n){if(n instanceof Ci)return n;const e=typeof n;let o;"object"===e?o=ar(n):"string"===e&&(o=function(i){var e,n=i.length;return"#"===i[0]&&(4===n||5===n?e={r:255&17*_e[i[1]],g:255&17*_e[i[2]],b:255&17*_e[i[3]],a:5===n?17*_e[i[4]]:255}:(7===n||9===n)&&(e={r:_e[i[1]]<<4|_e[i[2]],g:_e[i[3]]<<4|_e[i[4]],b:_e[i[5]]<<4|_e[i[6]],a:9===n?_e[i[7]]<<4|_e[i[8]]:255})),e}(n)||function(i){Ve||(Ve=function(){const i={},n=Object.keys(sr),e=Object.keys(to);let o,u,c,h,p;for(o=0;o<n.length;o++){for(h=p=n[o],u=0;u<e.length;u++)c=e[u],p=p.replace(c,to[c]);c=parseInt(sr[h],16),i[p]=[c>>16&255,c>>8&255,255&c]}return i}(),Ve.transparent=[0,0,0,0]);const n=Ve[i.toLowerCase()];return n&&{r:n[0],g:n[1],b:n[2],a:4===n.length?n[3]:255}}(n)||Ai(n)),this._rgb=o,this._valid=!!o}get valid(){return this._valid}get rgb(){var n=Ti(this._rgb);return n&&(n.a=je(n.a)),n}set rgb(n){this._rgb=ar(n)}rgbString(){return this._valid?(i=this._rgb)&&(i.a<255?`rgba(${i.r}, ${i.g}, ${i.b}, ${je(i.a)})`:`rgb(${i.r}, ${i.g}, ${i.b})`):void 0;var i}hexString(){return this._valid?function(i){var n=(i=>Vn(i.r)&&Vn(i.g)&&Vn(i.b)&&Vn(i.a))(i)?Ei:Io;return i?"#"+n(i.r)+n(i.g)+n(i.b)+((i,n)=>i<255?n(i):"")(i.a,n):void 0}(this._rgb):void 0}hslString(){return this._valid?function(i){if(!i)return;const n=rr(i),e=n[0],o=ln(n[1]),u=ln(n[2]);return i.a<255?`hsla(${e}, ${o}%, ${u}%, ${je(i.a)})`:`hsl(${e}, ${o}%, ${u}%)`}(this._rgb):void 0}mix(n,e){if(n){const o=this.rgb,u=n.rgb;let c;const h=e===c?.5:e,p=2*h-1,g=o.a-u.a,y=((p*g==-1?p:(p+g)/(1+p*g))+1)/2;c=1-y,o.r=255&y*o.r+c*u.r+.5,o.g=255&y*o.g+c*u.g+.5,o.b=255&y*o.b+c*u.b+.5,o.a=h*o.a+(1-h)*u.a,this.rgb=o}return this}interpolate(n,e){return n&&(this._rgb=function(i,n,e){const o=Un(je(i.r)),u=Un(je(i.g)),c=Un(je(i.b));return{r:si(le(o+e*(Un(je(n.r))-o))),g:si(le(u+e*(Un(je(n.g))-u))),b:si(le(c+e*(Un(je(n.b))-c))),a:i.a+e*(n.a-i.a)}}(this._rgb,n._rgb,e)),this}clone(){return new Ci(this.rgb)}alpha(n){return this._rgb.a=si(n),this}clearer(n){return this._rgb.a*=1-n,this}greyscale(){const n=this._rgb,e=zt(.3*n.r+.59*n.g+.11*n.b);return n.r=n.g=n.b=e,this}opaquer(n){return this._rgb.a*=1+n,this}negate(){const n=this._rgb;return n.r=255-n.r,n.g=255-n.g,n.b=255-n.b,this}lighten(n){return or(this._rgb,2,n),this}darken(n){return or(this._rgb,2,-n),this}saturate(n){return or(this._rgb,1,n),this}desaturate(n){return or(this._rgb,1,-n),this}rotate(n){return function(i,n){var e=rr(i);e[0]=fn(e[0]+n),e=Br(e),i.r=e[0],i.g=e[1],i.b=e[2]}(this._rgb,n),this}}function dn(i){return new Ci(i)}function _s(i){if(i&&"object"==typeof i){const n=i.toString();return"[object CanvasPattern]"===n||"[object CanvasGradient]"===n}return!1}function zn(i){return _s(i)?i:dn(i)}function Me(i){return _s(i)?i:dn(i).saturate(.5).darken(.1).hexString()}const Hn=Object.create(null),ur=Object.create(null);function Wn(i,n){if(!n)return i;const e=n.split(".");for(let o=0,u=e.length;o<u;++o){const c=e[o];i=i[c]||(i[c]=Object.create(null))}return i}function qn(i,n,e){return"string"==typeof n?ti(Wn(i,n),e):ti(Wn(i,""),n)}var Et=new class{constructor(n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,o)=>Me(o.backgroundColor),this.hoverBorderColor=(e,o)=>Me(o.borderColor),this.hoverColor=(e,o)=>Me(o.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(n)}set(n,e){return qn(this,n,e)}get(n){return Wn(this,n)}describe(n,e){return qn(ur,n,e)}override(n,e){return qn(Hn,n,e)}route(n,e,o,u){const c=Wn(this,n),h=Wn(this,o),p="_"+e;Object.defineProperties(c,{[p]:{value:c[e],writable:!0},[e]:{enumerable:!0,get(){const g=this[p],y=h[u];return St(g)?Object.assign({},y,g):_t(g,y)},set(g){this[p]=g}}})}}({_scriptable:i=>!i.startsWith("on"),_indexable:i=>"events"!==i,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function cr(i,n,e,o,u){let c=n[u];return c||(c=n[u]=i.measureText(u).width,e.push(u)),c>o&&(o=c),o}function Se(i,n,e,o){let u=(o=o||{}).data=o.data||{},c=o.garbageCollect=o.garbageCollect||[];o.font!==n&&(u=o.data={},c=o.garbageCollect=[],o.font=n),i.save(),i.font=n;let h=0;const p=e.length;let g,y,_,I,A;for(g=0;g<p;g++)if(I=e[g],null!=I&&!0!==It(I))h=cr(i,u,c,h,I);else if(It(I))for(y=0,_=I.length;y<_;y++)A=I[y],null!=A&&!It(A)&&(h=cr(i,u,c,h,A));i.restore();const M=c.length/2;if(M>e.length){for(g=0;g<M;g++)delete u[c[g]];c.splice(0,M)}return h}function ai(i,n,e){const o=i.currentDevicePixelRatio,u=0!==e?Math.max(e/2,.5):0;return Math.round((n-u)*o)/o+u}function io(i,n){(n=n||i.getContext("2d")).save(),n.resetTransform(),n.clearRect(0,0,i.width,i.height),n.restore()}function Wr(i,n,e,o){qr(i,n,e,o,null)}function qr(i,n,e,o,u){let c,h,p,g,y,_;const I=n.pointStyle,A=n.rotation,M=n.radius;let k=(A||0)*Dr;if(I&&"object"==typeof I&&(c=I.toString(),"[object HTMLImageElement]"===c||"[object HTMLCanvasElement]"===c))return i.save(),i.translate(e,o),i.rotate(k),i.drawImage(I,-I.width/2,-I.height/2,I.width,I.height),void i.restore();if(!(isNaN(M)||M<=0)){switch(i.beginPath(),I){default:u?i.ellipse(e,o,u/2,M,0,0,Ot):i.arc(e,o,M,0,Ot),i.closePath();break;case"triangle":i.moveTo(e+Math.sin(k)*M,o-Math.cos(k)*M),k+=ei,i.lineTo(e+Math.sin(k)*M,o-Math.cos(k)*M),k+=ei,i.lineTo(e+Math.sin(k)*M,o-Math.cos(k)*M),i.closePath();break;case"rectRounded":y=.516*M,g=M-y,h=Math.cos(k+Wt)*g,p=Math.sin(k+Wt)*g,i.arc(e-h,o-p,y,k-Pt,k-Vt),i.arc(e+p,o-h,y,k-Vt,k),i.arc(e+h,o+p,y,k,k+Vt),i.arc(e-p,o+h,y,k+Vt,k+Pt),i.closePath();break;case"rect":if(!A){g=Math.SQRT1_2*M,_=u?u/2:g,i.rect(e-_,o-g,2*_,2*g);break}k+=Wt;case"rectRot":h=Math.cos(k)*M,p=Math.sin(k)*M,i.moveTo(e-h,o-p),i.lineTo(e+p,o-h),i.lineTo(e+h,o+p),i.lineTo(e-p,o+h),i.closePath();break;case"crossRot":k+=Wt;case"cross":h=Math.cos(k)*M,p=Math.sin(k)*M,i.moveTo(e-h,o-p),i.lineTo(e+h,o+p),i.moveTo(e+p,o-h),i.lineTo(e-p,o+h);break;case"star":h=Math.cos(k)*M,p=Math.sin(k)*M,i.moveTo(e-h,o-p),i.lineTo(e+h,o+p),i.moveTo(e+p,o-h),i.lineTo(e-p,o+h),k+=Wt,h=Math.cos(k)*M,p=Math.sin(k)*M,i.moveTo(e-h,o-p),i.lineTo(e+h,o+p),i.moveTo(e+p,o-h),i.lineTo(e-p,o+h);break;case"line":h=u?u/2:Math.cos(k)*M,p=Math.sin(k)*M,i.moveTo(e-h,o-p),i.lineTo(e+h,o+p);break;case"dash":i.moveTo(e,o),i.lineTo(e+Math.cos(k)*M,o+Math.sin(k)*M)}i.fill(),n.borderWidth>0&&i.stroke()}}function lr(i,n,e){return e=e||.5,!n||i&&i.x>n.left-e&&i.x<n.right+e&&i.y>n.top-e&&i.y<n.bottom+e}function Mi(i,n){i.save(),i.beginPath(),i.rect(n.left,n.top,n.right-n.left,n.bottom-n.top),i.clip()}function Gr(i){i.restore()}function To(i,n,e,o,u){if(!n)return i.lineTo(e.x,e.y);if("middle"===u){const c=(n.x+e.x)/2;i.lineTo(c,n.y),i.lineTo(c,e.y)}else"after"===u!=!!o?i.lineTo(n.x,e.y):i.lineTo(e.x,n.y);i.lineTo(e.x,e.y)}function pn(i,n,e,o){if(!n)return i.lineTo(e.x,e.y);i.bezierCurveTo(o?n.cp1x:n.cp2x,o?n.cp1y:n.cp2y,o?e.cp2x:e.cp1x,o?e.cp2y:e.cp1y,e.x,e.y)}function gn(i,n,e,o,u,c={}){const h=It(n)?n:[n],p=c.strokeWidth>0&&""!==c.strokeColor;let g,y;for(i.save(),i.font=u.string,function(i,n){n.translation&&i.translate(n.translation[0],n.translation[1]),xt(n.rotation)||i.rotate(n.rotation),n.color&&(i.fillStyle=n.color),n.textAlign&&(i.textAlign=n.textAlign),n.textBaseline&&(i.textBaseline=n.textBaseline)}(i,c),g=0;g<h.length;++g)y=h[g],p&&(c.strokeColor&&(i.strokeStyle=c.strokeColor),xt(c.strokeWidth)||(i.lineWidth=c.strokeWidth),i.strokeText(y,e,o,c.maxWidth)),i.fillText(y,e,o,c.maxWidth),so(i,e,o,y,c),o+=u.lineHeight;i.restore()}function so(i,n,e,o,u){if(u.strikethrough||u.underline){const c=i.measureText(o),h=n-c.actualBoundingBoxLeft,p=n+c.actualBoundingBoxRight,g=e-c.actualBoundingBoxAscent,y=e+c.actualBoundingBoxDescent,_=u.strikethrough?(g+y)/2:y;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=u.decorationWidth||2,i.moveTo(h,_),i.lineTo(p,_),i.stroke()}}function mn(i,n){const{x:e,y:o,w:u,h:c,radius:h}=n;i.arc(e+h.topLeft,o+h.topLeft,h.topLeft,-Vt,Pt,!0),i.lineTo(e,o+c-h.bottomLeft),i.arc(e+h.bottomLeft,o+c-h.bottomLeft,h.bottomLeft,Pt,Vt,!0),i.lineTo(e+u-h.bottomRight,o+c),i.arc(e+u-h.bottomRight,o+c-h.bottomRight,h.bottomRight,Vt,0,!0),i.lineTo(e+u,o+h.topRight),i.arc(e+u-h.topRight,o+h.topRight,h.topRight,0,-Vt,!0),i.lineTo(e+h.topLeft,o)}const xs=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),Je=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function Ue(i,n){const e=(""+i).match(xs);if(!e||"normal"===e[1])return 1.2*n;switch(i=+e[2],e[3]){case"px":return i;case"%":i/=100}return n*i}const Is=i=>+i||0;function Z(i,n){const e={},o=St(n),u=o?Object.keys(n):n,c=St(i)?o?h=>_t(i[h],i[n[h]]):h=>i[h]:()=>i;for(const h of u)e[h]=Is(c(h));return e}function ui(i){return Z(i,{top:"y",right:"x",bottom:"y",left:"x"})}function ci(i){return Z(i,["topLeft","topRight","bottomLeft","bottomRight"])}function se(i){const n=ui(i);return n.width=n.left+n.right,n.height=n.top+n.bottom,n}function Xt(i,n){let e=_t((i=i||{}).size,(n=n||Et.font).size);"string"==typeof e&&(e=parseInt(e,10));let o=_t(i.style,n.style);o&&!(""+o).match(Je)&&(console.warn('Invalid font style specified: "'+o+'"'),o="");const u={family:_t(i.family,n.family),lineHeight:Ue(_t(i.lineHeight,n.lineHeight),e),size:e,style:o,weight:_t(i.weight,n.weight),string:""};return u.string=function(i){return!i||xt(i.size)||xt(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}(u),u}function ki(i,n,e,o){let c,h,p,u=!0;for(c=0,h=i.length;c<h;++c)if(p=i[c],void 0!==p&&(void 0!==n&&"function"==typeof p&&(p=p(n),u=!1),void 0!==e&&It(p)&&(p=p[e%p.length],u=!1),void 0!==p))return o&&!u&&(o.cacheable=!1),p}function Be(i,n){return Object.assign(Object.create(i),n)}function f(i,n=[""],e=i,o,u=(()=>i[0])){Ee(o)||(o=Ne("_fallback",i));const c={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:e,_fallback:o,_getTarget:u,override:h=>f([h,...i],n,e,o)};return new Proxy(c,{deleteProperty:(h,p)=>(delete h[p],delete h._keys,delete i[0][p],!0),get:(h,p)=>U(h,p,()=>function(i,n,e,o){let u;for(const c of n)if(u=Ne(T(c,i),e),Ee(u))return L(i,u)?Yr(e,o,i,u):u}(p,n,i,h)),getOwnPropertyDescriptor:(h,p)=>Reflect.getOwnPropertyDescriptor(h._scopes[0],p),getPrototypeOf:()=>Reflect.getPrototypeOf(i[0]),has:(h,p)=>ma(h).includes(p),ownKeys:h=>ma(h),set(h,p,g){const y=h._storage||(h._storage=u());return h[p]=y[p]=g,delete h._keys,!0}})}function b(i,n,e,o){const u={_cacheable:!1,_proxy:i,_context:n,_subProxy:e,_stack:new Set,_descriptors:x(i,o),setContext:c=>b(i,c,e,o),override:c=>b(i.override(c),n,e,o)};return new Proxy(u,{deleteProperty:(c,h)=>(delete c[h],delete i[h],!0),get:(c,h,p)=>U(c,h,()=>function(i,n,e){const{_proxy:o,_context:u,_subProxy:c,_descriptors:h}=i;let p=o[n];return In(p)&&h.isScriptable(n)&&(p=function(i,n,e,o){const{_proxy:u,_context:c,_subProxy:h,_stack:p}=e;if(p.has(i))throw new Error("Recursion detected: "+Array.from(p).join("->")+"->"+i);return p.add(i),n=n(c,h||o),p.delete(i),L(i,n)&&(n=Yr(u._scopes,u,i,n)),n}(n,p,i,e)),It(p)&&p.length&&(p=function(i,n,e,o){const{_proxy:u,_context:c,_subProxy:h,_descriptors:p}=e;if(Ee(c.index)&&o(i))n=n[c.index%n.length];else if(St(n[0])){const g=n,y=u._scopes.filter(_=>_!==g);n=[];for(const _ of g){const I=Yr(y,u,i,_);n.push(b(I,c,h&&h[i],p))}}return n}(n,p,i,h.isIndexable)),L(n,p)&&(p=b(p,u,c&&c[n],h)),p}(c,h,p)),getOwnPropertyDescriptor:(c,h)=>c._descriptors.allKeys?Reflect.has(i,h)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,h),getPrototypeOf:()=>Reflect.getPrototypeOf(i),has:(c,h)=>Reflect.has(i,h),ownKeys:()=>Reflect.ownKeys(i),set:(c,h,p)=>(i[h]=p,delete c[h],!0)})}function x(i,n={scriptable:!0,indexable:!0}){const{_scriptable:e=n.scriptable,_indexable:o=n.indexable,_allKeys:u=n.allKeys}=i;return{allKeys:u,scriptable:e,indexable:o,isScriptable:In(e)?e:()=>e,isIndexable:In(o)?o:()=>o}}const T=(i,n)=>i?i+kr(n):n,L=(i,n)=>St(n)&&"adapters"!==i&&(null===Object.getPrototypeOf(n)||n.constructor===Object);function U(i,n,e){if(Object.prototype.hasOwnProperty.call(i,n))return i[n];const o=e();return i[n]=o,o}function pe(i,n,e){return In(i)?i(n,e):i}const Ke=(i,n)=>!0===i?n:"string"==typeof i?Rn(n,i):void 0;function tn(i,n,e,o,u){for(const c of n){const h=Ke(e,c);if(h){i.add(h);const p=pe(h._fallback,e,u);if(Ee(p)&&p!==e&&p!==o)return p}else if(!1===h&&Ee(o)&&e!==o)return null}return!1}function Yr(i,n,e,o){const u=n._rootScopes,c=pe(n._fallback,e,o),h=[...i,...u],p=new Set;p.add(o);let g=Di(p,h,e,c||e,o);return!(null===g||Ee(c)&&c!==e&&(g=Di(p,h,c,g,o),null===g))&&f(Array.from(p),[""],u,c,()=>function(i,n,e){const o=i._getTarget();n in o||(o[n]={});const u=o[n];return It(u)&&St(e)?e:u}(n,e,o))}function Di(i,n,e,o,u){for(;e;)e=tn(i,n,e,o,u);return e}function Ne(i,n){for(const e of n){if(!e)continue;const o=e[i];if(Ee(o))return o}}function ma(i){let n=i._keys;return n||(n=i._keys=function(i){const n=new Set;for(const e of i)for(const o of Object.keys(e).filter(u=>!u.startsWith("_")))n.add(o);return Array.from(n)}(i._scopes)),n}function Ao(i,n,e,o){const{iScale:u}=i,{key:c="r"}=this._parsing,h=new Array(o);let p,g,y,_;for(p=0,g=o;p<g;++p)y=p+e,_=n[y],h[p]={r:u.parse(Rn(_,c),y)};return h}const hu=Number.EPSILON||1e-14,fr=(i,n)=>n<i.length&&!i[n].skip&&i[n],ya=i=>"x"===i?"y":"x";function _c(i,n,e,o){const u=i.skip?n:i,c=n,h=e.skip?n:e,p=xi(c,u),g=xi(h,c);let y=p/(p+g),_=g/(p+g);y=isNaN(y)?0:y,_=isNaN(_)?0:_;const I=o*y,A=o*_;return{previous:{x:c.x-I*(h.x-u.x),y:c.y-I*(h.y-u.y)},next:{x:c.x+A*(h.x-u.x),y:c.y+A*(h.y-u.y)}}}function Es(i,n,e){return Math.max(Math.min(i,e),n)}function fu(i,n,e,o,u){let c,h,p,g;if(n.spanGaps&&(i=i.filter(y=>!y.skip)),"monotone"===n.cubicInterpolationMode)!function(i,n="x"){const e=ya(n),o=i.length,u=Array(o).fill(0),c=Array(o);let h,p,g,y=fr(i,0);for(h=0;h<o;++h)if(p=g,g=y,y=fr(i,h+1),g){if(y){const _=y[n]-g[n];u[h]=0!==_?(y[e]-g[e])/_:0}c[h]=p?y?qe(u[h-1])!==qe(u[h])?0:(u[h-1]+u[h])/2:u[h-1]:u[h]}(function(i,n,e){const o=i.length;let u,c,h,p,g,y=fr(i,0);for(let _=0;_<o-1;++_)if(g=y,y=fr(i,_+1),g&&y){if(ii(n[_],0,hu)){e[_]=e[_+1]=0;continue}u=e[_]/n[_],c=e[_+1]/n[_],p=Math.pow(u,2)+Math.pow(c,2),!(p<=9)&&(h=3/Math.sqrt(p),e[_]=u*h*n[_],e[_+1]=c*h*n[_])}})(i,u,c),function(i,n,e="x"){const o=ya(e),u=i.length;let c,h,p,g=fr(i,0);for(let y=0;y<u;++y){if(h=p,p=g,g=fr(i,y+1),!p)continue;const _=p[e],I=p[o];h&&(c=(_-h[e])/3,p[`cp1${e}`]=_-c,p[`cp1${o}`]=I-c*n[y]),g&&(c=(g[e]-_)/3,p[`cp2${e}`]=_+c,p[`cp2${o}`]=I+c*n[y])}}(i,c,n)}(i,u);else{let y=o?i[i.length-1]:i[0];for(c=0,h=i.length;c<h;++c)p=i[c],g=_c(y,p,i[Math.min(c+1,h-(o?0:1))%h],n.tension),p.cp1x=g.previous.x,p.cp1y=g.previous.y,p.cp2x=g.next.x,p.cp2y=g.next.y,y=p}n.capBezierPoints&&function(i,n){let e,o,u,c,h,p=lr(i[0],n);for(e=0,o=i.length;e<o;++e)h=c,c=p,p=e<o-1&&lr(i[e+1],n),c&&(u=i[e],h&&(u.cp1x=Es(u.cp1x,n.left,n.right),u.cp1y=Es(u.cp1y,n.top,n.bottom)),p&&(u.cp2x=Es(u.cp2x,n.left,n.right),u.cp2y=Es(u.cp2y,n.top,n.bottom)))}(i,e)}function wa(){return"undefined"!=typeof window&&"undefined"!=typeof document}function Co(i){let n=i.parentNode;return n&&"[object ShadowRoot]"===n.toString()&&(n=n.host),n}function oo(i,n,e){let o;return"string"==typeof i?(o=parseInt(i,10),-1!==i.indexOf("%")&&(o=o/100*n.parentNode[e])):o=i,o}const Mo=i=>window.getComputedStyle(i,null),xc=["top","right","bottom","left"];function dr(i,n,e){const o={};e=e?"-"+e:"";for(let u=0;u<4;u++){const c=xc[u];o[c]=parseFloat(i[n+"-"+c+e])||0}return o.width=o.left+o.right,o.height=o.top+o.bottom,o}function $r(i,n){if("native"in i)return i;const{canvas:e,currentDevicePixelRatio:o}=n,u=Mo(e),c="border-box"===u.boxSizing,h=dr(u,"padding"),p=dr(u,"border","width"),{x:g,y,box:_}=function(i,n){const e=i.touches,o=e&&e.length?e[0]:i,{offsetX:u,offsetY:c}=o;let p,g,h=!1;if(((i,n,e)=>(i>0||n>0)&&(!e||!e.shadowRoot))(u,c,i.target))p=u,g=c;else{const y=n.getBoundingClientRect();p=o.clientX-y.left,g=o.clientY-y.top,h=!0}return{x:p,y:g,box:h}}(i,e),I=h.left+(_&&p.left),A=h.top+(_&&p.top);let{width:M,height:k}=n;return c&&(M-=h.width+p.width,k-=h.height+p.height),{x:Math.round((g-I)/M*e.width/o),y:Math.round((y-A)/k*e.height/o)}}const xa=i=>Math.round(10*i)/10;function li(i,n,e){const o=n||1,u=Math.floor(i.height*o),c=Math.floor(i.width*o);i.height=u/o,i.width=c/o;const h=i.canvas;return h.style&&(e||!h.style.height&&!h.style.width)&&(h.style.height=`${i.height}px`,h.style.width=`${i.width}px`),(i.currentDevicePixelRatio!==o||h.height!==u||h.width!==c)&&(i.currentDevicePixelRatio=o,h.height=u,h.width=c,i.ctx.setTransform(o,0,0,o,0,0),!0)}const Ec=function(){let i=!1;try{const n={get passive(){return i=!0,!1}};window.addEventListener("test",null,n),window.removeEventListener("test",null,n)}catch(n){}return i}();function ko(i,n){const e=function(i,n){return Mo(i).getPropertyValue(n)}(i,n),o=e&&e.match(/^(\d+)(\.\d+)?px$/);return o?+o[1]:void 0}function pr(i,n,e,o){return{x:i.x+e*(n.x-i.x),y:i.y+e*(n.y-i.y)}}function Ia(i,n,e,o){return{x:i.x+e*(n.x-i.x),y:"middle"===o?e<.5?i.y:n.y:"after"===o?e<1?i.y:n.y:e>0?n.y:i.y}}function gu(i,n,e,o){const u={x:i.cp2x,y:i.cp2y},c={x:n.cp1x,y:n.cp1y},h=pr(i,u,e),p=pr(u,c,e),g=pr(c,n,e),y=pr(h,p,e),_=pr(p,g,e);return pr(y,_,e)}const ao=new Map;function hi(i,n,e){return function(i,n){n=n||{};const e=i+JSON.stringify(n);let o=ao.get(e);return o||(o=new Intl.NumberFormat(i,n),ao.set(e,o)),o}(n,e).format(i)}function Ss(i,n,e){return i?function(i,n){return{x:e=>i+i+n-e,setWidth(e){n=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,o)=>e-o,leftForLtr:(e,o)=>e-o}}(n,e):{x:i=>i,setWidth(i){},textAlign:i=>i,xPlus:(i,n)=>i+n,leftForLtr:(i,n)=>i}}function Ea(i,n){let e,o;("ltr"===n||"rtl"===n)&&(e=i.canvas.style,o=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",n,"important"),i.prevTextDirection=o)}function Sa(i,n){void 0!==n&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",n[0],n[1]))}function Pi(i){return"angle"===i?{between:Ce,compare:Zi,normalize:Ge}:{between:Oe,compare:(n,e)=>n-e,normalize:n=>n}}function Kr({start:i,end:n,count:e,loop:o,style:u}){return{start:i%e,end:n%e,loop:o&&(n-i+1)%e==0,style:u}}function vu(i,n,e){if(!e)return[i];const{property:o,start:u,end:c}=e,h=n.length,{compare:p,between:g,normalize:y}=Pi(o),{start:_,end:I,loop:A,style:M}=function(i,n,e){const{property:o,start:u,end:c}=e,{between:h,normalize:p}=Pi(o),g=n.length;let A,M,{start:y,end:_,loop:I}=i;if(I){for(y+=g,_+=g,A=0,M=g;A<M&&h(p(n[y%g][o]),u,c);++A)y--,_--;y%=g,_%=g}return _<y&&(_+=g),{start:y,end:_,loop:I,style:i.style}}(i,n,e),k=[];let V,H,X,N=!1,F=null;for(let ft=_,dt=_;ft<=I;++ft)H=n[ft%h],!H.skip&&(V=y(H[o]),V!==X&&(N=g(V,u,c),null===F&&(N||g(u,X,V)&&0!==p(u,X))&&(F=0===p(V,u)?ft:dt),null!==F&&(!N||0===p(c,V)||g(c,X,V))&&(k.push(Kr({start:F,end:ft,loop:A,count:h,style:M})),F=null),dt=ft,X=V));return null!==F&&k.push(Kr({start:F,end:I,loop:A,count:h,style:M})),k}function bu(i,n){const e=[],o=i.segments;for(let u=0;u<o.length;u++){const c=vu(o[u],i.points,n);c.length&&e.push(...c)}return e}function Oo(i){return{backgroundColor:i.backgroundColor,borderCapStyle:i.borderCapStyle,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderJoinStyle:i.borderJoinStyle,borderWidth:i.borderWidth,borderColor:i.borderColor}}function Tc(i,n){return n&&JSON.stringify(i)!==JSON.stringify(n)}var ge=new class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(n,e,o,u){const h=e.duration;e.listeners[u].forEach(p=>p({chart:n,initial:e.initial,numSteps:h,currentStep:Math.min(o-e.start,h)}))}_refresh(){this._request||(this._running=!0,this._request=Nr.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(n=Date.now()){let e=0;this._charts.forEach((o,u)=>{if(!o.running||!o.items.length)return;const c=o.items;let g,h=c.length-1,p=!1;for(;h>=0;--h)g=c[h],g._active?(g._total>o.duration&&(o.duration=g._total),g.tick(n),p=!0):(c[h]=c[c.length-1],c.pop());p&&(u.draw(),this._notify(u,o,n,"progress")),c.length||(o.running=!1,this._notify(u,o,n,"complete"),o.initial=!1),e+=c.length}),this._lastDate=n,0===e&&(this._running=!1)}_getAnims(n){const e=this._charts;let o=e.get(n);return o||(o={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(n,o)),o}listen(n,e,o){this._getAnims(n).listeners[e].push(o)}add(n,e){!e||!e.length||this._getAnims(n).items.push(...e)}has(n){return this._getAnims(n).items.length>0}start(n){const e=this._charts.get(n);!e||(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((o,u)=>Math.max(o,u._duration),0),this._refresh())}running(n){if(!this._running)return!1;const e=this._charts.get(n);return!(!e||!e.running||!e.items.length)}stop(n){const e=this._charts.get(n);if(!e||!e.items.length)return;const o=e.items;let u=o.length-1;for(;u>=0;--u)o[u].cancel();e.items=[],this._notify(n,e,Date.now(),"complete")}remove(n){return this._charts.delete(n)}};const Oi="transparent",ee={boolean:(i,n,e)=>e>.5?n:i,color(i,n,e){const o=zn(i||Oi),u=o.valid&&zn(n||Oi);return u&&u.valid?u.mix(o,e).hexString():n},number:(i,n,e)=>i+(n-i)*e};class ze{constructor(n,e,o,u){const c=e[o];u=ki([n.to,u,c,n.from]);const h=ki([n.from,c,u]);this._active=!0,this._fn=n.fn||ee[n.type||typeof h],this._easing=er[n.easing]||er.linear,this._start=Math.floor(Date.now()+(n.delay||0)),this._duration=this._total=Math.floor(n.duration),this._loop=!!n.loop,this._target=e,this._prop=o,this._from=h,this._to=u,this._promises=void 0}active(){return this._active}update(n,e,o){if(this._active){this._notify(!1);const u=this._target[this._prop],c=o-this._start,h=this._duration-c;this._start=o,this._duration=Math.floor(Math.max(h,n.duration)),this._total+=c,this._loop=!!n.loop,this._to=ki([n.to,e,u,n.from]),this._from=ki([n.from,u,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(n){const e=n-this._start,o=this._duration,u=this._prop,c=this._from,h=this._loop,p=this._to;let g;if(this._active=c!==p&&(h||e<o),!this._active)return this._target[u]=p,void this._notify(!0);e<0?this._target[u]=c:(g=e/o%2,g=h&&g>1?2-g:g,g=this._easing(Math.min(1,Math.max(0,g))),this._target[u]=this._fn(c,p,g))}wait(){const n=this._promises||(this._promises=[]);return new Promise((e,o)=>{n.push({res:e,rej:o})})}_notify(n){const e=n?"res":"rej",o=this._promises||[];for(let u=0;u<o.length;u++)o[u][e]()}}Et.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const he=Object.keys(Et.animation);Et.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:i=>"onProgress"!==i&&"onComplete"!==i&&"fn"!==i}),Et.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),Et.describe("animations",{_fallback:"animation"}),Et.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:i=>0|i}}}});class Yn{constructor(n,e){this._chart=n,this._properties=new Map,this.configure(e)}configure(n){if(!St(n))return;const e=this._properties;Object.getOwnPropertyNames(n).forEach(o=>{const u=n[o];if(!St(u))return;const c={};for(const h of he)c[h]=u[h];(It(u.properties)&&u.properties||[o]).forEach(h=>{(h===o||!e.has(h))&&e.set(h,c)})})}_animateOptions(n,e){const o=e.options,u=function(i,n){if(!n)return;let e=i.options;if(e)return e.$shared&&(i.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e;i.options=n}(n,o);if(!u)return[];const c=this._createAnimations(u,o);return o.$shared&&function(i,n){const e=[],o=Object.keys(n);for(let u=0;u<o.length;u++){const c=i[o[u]];c&&c.active()&&e.push(c.wait())}return Promise.all(e)}(n.options.$animations,o).then(()=>{n.options=o},()=>{}),c}_createAnimations(n,e){const o=this._properties,u=[],c=n.$animations||(n.$animations={}),h=Object.keys(e),p=Date.now();let g;for(g=h.length-1;g>=0;--g){const y=h[g];if("$"===y.charAt(0))continue;if("options"===y){u.push(...this._animateOptions(n,e));continue}const _=e[y];let I=c[y];const A=o.get(y);if(I){if(A&&I.active()){I.update(A,_,p);continue}I.cancel()}A&&A.duration?(c[y]=I=new ze(A,n,y,_),u.push(I)):n[y]=_}return u}update(n,e){if(0===this._properties.size)return void Object.assign(n,e);const o=this._createAnimations(n,e);return o.length?(ge.add(this._chart,o),!0):void 0}}function nn(i,n){const e=i&&i.options||{},o=e.reverse,u=void 0===e.min?n:0,c=void 0===e.max?n:0;return{start:o?c:u,end:o?u:c}}function fi(i,n){const e=[],o=i._getSortedDatasetMetas(n);let u,c;for(u=0,c=o.length;u<c;++u)e.push(o[u].index);return e}function xu(i,n,e,o={}){const u=i.keys,c="single"===o.mode;let h,p,g,y;if(null!==n){for(h=0,p=u.length;h<p;++h){if(g=+u[h],g===e){if(o.all)continue;break}y=i.values[g],Yt(y)&&(c||0===n||qe(n)===qe(y))&&(n+=y)}return n}}function Ta(i,n){const e=i&&i.options.stacked;return e||void 0===e&&void 0!==n.stack}function Ts(i,n,e){const o=i[n]||(i[n]={});return o[e]||(o[e]={})}function Aa(i,n,e,o){for(const u of n.getMatchingVisibleMetas(o).reverse()){const c=i[u.index];if(e&&c>0||!e&&c<0)return u.index}return null}function Li(i,n){const{chart:e,_cachedMeta:o}=i,u=e._stacks||(e._stacks={}),{iScale:c,vScale:h,index:p}=o,g=c.axis,y=h.axis,_=function(i,n,e){return`${i.id}.${n.id}.${e.stack||e.type}`}(c,h,o),I=n.length;let A;for(let M=0;M<I;++M){const k=n[M],{[g]:N,[y]:F}=k;A=(k._stacks||(k._stacks={}))[y]=Ts(u,_,N),A[p]=F,A._top=Aa(A,h,!0,o.type),A._bottom=Aa(A,h,!1,o.type)}}function lo(i,n){const e=i.scales;return Object.keys(e).filter(o=>e[o].axis===n).shift()}function Ni(i,n){const e=i.controller.index,o=i.vScale&&i.vScale.axis;if(o){n=n||i._parsed;for(const u of n){const c=u._stacks;if(!c||void 0===c[o]||void 0===c[o][e])return;delete c[o][e]}}}const As=i=>"reset"===i||"none"===i,Iu=(i,n)=>n?i:Object.assign({},i);let Cn=(()=>{class i{constructor(e,o){this.chart=e,this._ctx=e.ctx,this.index=o,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Ta(e.vScale,e),this.addElements()}updateIndex(e){this.index!==e&&Ni(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,o=this._cachedMeta,u=this.getDataset(),c=(A,M,k,N)=>"x"===A?M:"r"===A?N:k,h=o.xAxisID=_t(u.xAxisID,lo(e,"x")),p=o.yAxisID=_t(u.yAxisID,lo(e,"y")),g=o.rAxisID=_t(u.rAxisID,lo(e,"r")),y=o.indexAxis,_=o.iAxisID=c(y,h,p,g),I=o.vAxisID=c(y,p,h,g);o.xScale=this.getScaleForId(h),o.yScale=this.getScaleForId(p),o.rScale=this.getScaleForId(g),o.iScale=this.getScaleForId(_),o.vScale=this.getScaleForId(I)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const o=this._cachedMeta;return e===o.iScale?o.vScale:o.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Sn(this._data,this),e._stacked&&Ni(e)}_dataCheck(){const e=this.getDataset(),o=e.data||(e.data=[]),u=this._data;if(St(o))this._data=function(i){const n=Object.keys(i),e=new Array(n.length);let o,u,c;for(o=0,u=n.length;o<u;++o)c=n[o],e[o]={x:c,y:i[c]};return e}(o);else if(u!==o){if(u){Sn(u,this);const c=this._cachedMeta;Ni(c),c._parsed=[]}o&&Object.isExtensible(o)&&function(i,n){i._chartjs?i._chartjs.listeners.push(n):(Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[n]}}),tr.forEach(e=>{const o="_onData"+kr(e),u=i[e];Object.defineProperty(i,e,{configurable:!0,enumerable:!1,value(...c){const h=u.apply(this,c);return i._chartjs.listeners.forEach(p=>{"function"==typeof p[o]&&p[o](...c)}),h}})}))}(o,this),this._syncList=[],this._data=o}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const o=this._cachedMeta,u=this.getDataset();let c=!1;this._dataCheck();const h=o._stacked;o._stacked=Ta(o.vScale,o),o.stack!==u.stack&&(c=!0,Ni(o),o.stack=u.stack),this._resyncElements(e),(c||h!==o._stacked)&&Li(this,o._parsed)}configure(){const e=this.chart.config,o=e.datasetScopeKeys(this._type),u=e.getOptionScopes(this.getDataset(),o,!0);this.options=e.createResolver(u,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,o){const{_cachedMeta:u,_data:c}=this,{iScale:h,_stacked:p}=u,g=h.axis;let I,A,M,y=0===e&&o===c.length||u._sorted,_=e>0&&u._parsed[e-1];if(!1===this._parsing)u._parsed=c,u._sorted=!0,M=c;else{M=It(c[e])?this.parseArrayData(u,c,e,o):St(c[e])?this.parseObjectData(u,c,e,o):this.parsePrimitiveData(u,c,e,o);const k=()=>null===A[g]||_&&A[g]<_[g];for(I=0;I<o;++I)u._parsed[I+e]=A=M[I],y&&(k()&&(y=!1),_=A);u._sorted=y}p&&Li(this,M)}parsePrimitiveData(e,o,u,c){const{iScale:h,vScale:p}=e,g=h.axis,y=p.axis,_=h.getLabels(),I=h===p,A=new Array(c);let M,k,N;for(M=0,k=c;M<k;++M)N=M+u,A[M]={[g]:I||h.parse(_[N],N),[y]:p.parse(o[N],N)};return A}parseArrayData(e,o,u,c){const{xScale:h,yScale:p}=e,g=new Array(c);let y,_,I,A;for(y=0,_=c;y<_;++y)I=y+u,A=o[I],g[y]={x:h.parse(A[0],I),y:p.parse(A[1],I)};return g}parseObjectData(e,o,u,c){const{xScale:h,yScale:p}=e,{xAxisKey:g="x",yAxisKey:y="y"}=this._parsing,_=new Array(c);let I,A,M,k;for(I=0,A=c;I<A;++I)M=I+u,k=o[M],_[I]={x:h.parse(Rn(k,g),M),y:p.parse(Rn(k,y),M)};return _}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,o,u){const h=this._cachedMeta,p=o[e.axis];return xu({keys:fi(this.chart,!0),values:o._stacks[e.axis]},p,h.index,{mode:u})}updateRangeFromParsed(e,o,u,c){const h=u[o.axis];let p=null===h?NaN:h;const g=c&&u._stacks[o.axis];c&&g&&(c.values=g,p=xu(c,h,this._cachedMeta.index)),e.min=Math.min(e.min,p),e.max=Math.max(e.max,p)}getMinMax(e,o){const u=this._cachedMeta,c=u._parsed,h=u._sorted&&e===u.iScale,p=c.length,g=this._getOtherScale(e),y=((i,n,e)=>i&&!n.hidden&&n._stacked&&{keys:fi(this.chart,!0),values:null})(o,u),_={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:I,max:A}=function(i){const{min:n,max:e,minDefined:o,maxDefined:u}=i.getUserBounds();return{min:o?n:Number.NEGATIVE_INFINITY,max:u?e:Number.POSITIVE_INFINITY}}(g);let M,k;function N(){k=c[M];const F=k[g.axis];return!Yt(k[e.axis])||I>F||A<F}for(M=0;M<p&&(N()||(this.updateRangeFromParsed(_,e,k,y),!h));++M);if(h)for(M=p-1;M>=0;--M)if(!N()){this.updateRangeFromParsed(_,e,k,y);break}return _}getAllParsedValues(e){const o=this._cachedMeta._parsed,u=[];let c,h,p;for(c=0,h=o.length;c<h;++c)p=o[c][e.axis],Yt(p)&&u.push(p);return u}getMaxOverflow(){return!1}getLabelAndValue(e){const o=this._cachedMeta,u=o.iScale,c=o.vScale,h=this.getParsed(e);return{label:u?""+u.getLabelForValue(h[u.axis]):"",value:c?""+c.getLabelForValue(h[c.axis]):""}}_update(e){const o=this._cachedMeta;this.update(e||"default"),o._clip=function(i){let n,e,o,u;return St(i)?(n=i.top,e=i.right,o=i.bottom,u=i.left):n=e=o=u=i,{top:n,right:e,bottom:o,left:u,disabled:!1===i}}(_t(this.options.clip,function(i,n,e){if(!1===e)return!1;const o=nn(i,e),u=nn(n,e);return{top:u.end,right:o.end,bottom:u.start,left:o.start}}(o.xScale,o.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,u=this._cachedMeta,c=u.data||[],h=this.chart.chartArea,p=[],g=this._drawStart||0,y=this._drawCount||c.length-g,_=this.options.drawActiveElementsOnTop;let I;for(u.dataset&&u.dataset.draw(e,h,g,y),I=g;I<g+y;++I){const A=c[I];A.hidden||(A.active&&_?p.push(A):A.draw(e,h))}for(I=0;I<p.length;++I)p[I].draw(e,h)}getStyle(e,o){const u=o?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(u):this.resolveDataElementOptions(e||0,u)}getContext(e,o,u){const c=this.getDataset();let h;if(e>=0&&e<this._cachedMeta.data.length){const p=this._cachedMeta.data[e];h=p.$context||(p.$context=function(i,n,e){return Be(i,{active:!1,dataIndex:n,parsed:void 0,raw:void 0,element:e,index:n,mode:"default",type:"data"})}(this.getContext(),e,p)),h.parsed=this.getParsed(e),h.raw=c.data[e],h.index=h.dataIndex=e}else h=this.$context||(this.$context=function(i,n){return Be(i,{active:!1,dataset:void 0,datasetIndex:n,index:n,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),h.dataset=c,h.index=h.datasetIndex=this.index;return h.active=!!o,h.mode=u,h}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,o){return this._resolveElementOptions(this.dataElementType.id,o,e)}_resolveElementOptions(e,o="default",u){const c="active"===o,h=this._cachedDataOpts,p=e+"-"+o,g=h[p],y=this.enableOptionSharing&&Ee(u);if(g)return Iu(g,y);const _=this.chart.config,I=_.datasetElementScopeKeys(this._type,e),A=c?[`${e}Hover`,"hover",e,""]:[e,""],M=_.getOptionScopes(this.getDataset(),I),k=Object.keys(Et.elements[e]),F=_.resolveNamedOptions(M,k,()=>this.getContext(u,c),A);return F.$shared&&(F.$shared=y,h[p]=Object.freeze(Iu(F,y))),F}_resolveAnimations(e,o,u){const c=this.chart,h=this._cachedDataOpts,p=`animation-${o}`,g=h[p];if(g)return g;let y;if(!1!==c.options.animation){const I=this.chart.config,A=I.datasetAnimationScopeKeys(this._type,o),M=I.getOptionScopes(this.getDataset(),A);y=I.createResolver(M,this.getContext(e,u,o))}const _=new Yn(c,y&&y.animations);return y&&y._cacheable&&(h[p]=Object.freeze(_)),_}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,o){return!o||As(e)||this.chart._animationsDisabled}_getSharedOptions(e,o){const u=this.resolveDataElementOptions(e,o),c=this._sharedOptions,h=this.getSharedOptions(u),p=this.includeOptions(o,h)||h!==c;return this.updateSharedOptions(h,o,u),{sharedOptions:h,includeOptions:p}}updateElement(e,o,u,c){As(c)?Object.assign(e,u):this._resolveAnimations(o,c).update(e,u)}updateSharedOptions(e,o,u){e&&!As(o)&&this._resolveAnimations(void 0,o).update(e,u)}_setStyle(e,o,u,c){e.active=c;const h=this.getStyle(o,c);this._resolveAnimations(o,u,c).update(e,{options:!c&&this.getSharedOptions(h)||h})}removeHoverStyle(e,o,u){this._setStyle(e,u,"active",!1)}setHoverStyle(e,o,u){this._setStyle(e,u,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const o=this._data,u=this._cachedMeta.data;for(const[g,y,_]of this._syncList)this[g](y,_);this._syncList=[];const c=u.length,h=o.length,p=Math.min(h,c);p&&this.parse(0,p),h>c?this._insertElements(c,h-c,e):h<c&&this._removeElements(h,c-h)}_insertElements(e,o,u=!0){const c=this._cachedMeta,h=c.data,p=e+o;let g;const y=_=>{for(_.length+=o,g=_.length-1;g>=p;g--)_[g]=_[g-o]};for(y(h),g=e;g<p;++g)h[g]=new this.dataElementType;this._parsing&&y(c._parsed),this.parse(e,o),u&&this.updateElements(h,e,o,"reset")}updateElements(e,o,u,c){}_removeElements(e,o){const u=this._cachedMeta;if(this._parsing){const c=u._parsed.splice(e,o);u._stacked&&Ni(u,c)}u.data.splice(e,o)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[o,u,c]=e;this[o](u,c)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,o){o&&this._sync(["_removeElements",e,o]);const u=arguments.length-2;u&&this._sync(["_insertElements",e,u])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return i.defaults={},i})();function Oc(i){const n=i.iScale,e=function(i,n){if(!i._cache.$bar){const e=i.getMatchingVisibleMetas(n);let o=[];for(let u=0,c=e.length;u<c;u++)o=o.concat(e[u].controller.getAllParsedValues(i));i._cache.$bar=Lr(o.sort((u,c)=>u-c))}return i._cache.$bar}(n,i.type);let u,c,h,p,o=n._length;const g=()=>{32767===h||-32768===h||(Ee(p)&&(o=Math.min(o,Math.abs(h-p)||o)),p=h)};for(u=0,c=e.length;u<c;++u)h=n.getPixelForValue(e[u]),g();for(p=void 0,u=0,c=n.ticks.length;u<c;++u)h=n.getPixelForTick(u),g();return o}function ho(i,n,e,o){return It(i)?function(i,n,e,o){const u=e.parse(i[0],o),c=e.parse(i[1],o),h=Math.min(u,c),p=Math.max(u,c);let g=h,y=p;Math.abs(h)>Math.abs(p)&&(g=p,y=h),n[e.axis]=y,n._custom={barStart:g,barEnd:y,start:u,end:c,min:h,max:p}}(i,n,e,o):n[e.axis]=e.parse(i,o),n}function Zr(i,n,e,o){const u=i.iScale,c=i.vScale,h=u.getLabels(),p=u===c,g=[];let y,_,I,A;for(y=e,_=e+o;y<_;++y)A=n[y],I={},I[u.axis]=p||u.parse(h[y],y),g.push(ho(A,I,c,y));return g}function Cs(i){return i&&void 0!==i.barStart&&void 0!==i.barEnd}function Fc(i,n,e,o){let u=n.borderSkipped;const c={};if(!u)return void(i.borderSkipped=c);if(!0===u)return void(i.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:h,end:p,reverse:g,top:y,bottom:_}=function(i){let n,e,o,u,c;return i.horizontal?(n=i.base>i.x,e="left",o="right"):(n=i.base<i.y,e="bottom",o="top"),n?(u="end",c="start"):(u="start",c="end"),{start:e,end:o,reverse:n,top:u,bottom:c}}(i);"middle"===u&&e&&(i.enableBorderRadius=!0,(e._top||0)===o?u=y:(e._bottom||0)===o?u=_:(c[mr(_,h,p,g)]=!0,u=y)),c[mr(u,h,p,g)]=!0,i.borderSkipped=c}function mr(i,n,e,o){return o?(i=function(i,n,e){return i===n?e:i===e?n:i}(i,n,e),i=Te(i,e,n)):i=Te(i,n,e),i}function Te(i,n,e){return"start"===i?n:"end"===i?e:i}function jc(i,{inflateAmount:n},e){i.inflateAmount="auto"===n?1===e?.33:0:n}Cn.prototype.datasetElementType=null,Cn.prototype.dataElementType=null;let Tu=(()=>{class i extends Cn{parsePrimitiveData(e,o,u,c){return Zr(e,o,u,c)}parseArrayData(e,o,u,c){return Zr(e,o,u,c)}parseObjectData(e,o,u,c){const{iScale:h,vScale:p}=e,{xAxisKey:g="x",yAxisKey:y="y"}=this._parsing,_="x"===h.axis?g:y,I="x"===p.axis?g:y,A=[];let M,k,N,F;for(M=u,k=u+c;M<k;++M)F=o[M],N={},N[h.axis]=h.parse(Rn(F,_),M),A.push(ho(Rn(F,I),N,p,M));return A}updateRangeFromParsed(e,o,u,c){super.updateRangeFromParsed(e,o,u,c);const h=u._custom;h&&o===this._cachedMeta.vScale&&(e.min=Math.min(e.min,h.min),e.max=Math.max(e.max,h.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const o=this._cachedMeta,{iScale:u,vScale:c}=o,h=this.getParsed(e),p=h._custom,g=Cs(p)?"["+p.start+", "+p.end+"]":""+c.getLabelForValue(h[c.axis]);return{label:""+u.getLabelForValue(h[u.axis]),value:g}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(e){const o=this._cachedMeta;this.updateElements(o.data,0,o.data.length,e)}updateElements(e,o,u,c){const h="reset"===c,{index:p,_cachedMeta:{vScale:g}}=this,y=g.getBasePixel(),_=g.isHorizontal(),I=this._getRuler(),{sharedOptions:A,includeOptions:M}=this._getSharedOptions(o,c);for(let k=o;k<o+u;k++){const N=this.getParsed(k),F=h||xt(N[g.axis])?{base:y,head:y}:this._calculateBarValuePixels(k),V=this._calculateBarIndexPixels(k,I),H=(N._stacks||{})[g.axis],X={horizontal:_,base:F.base,enableBorderRadius:!H||Cs(N._custom)||p===H._top||p===H._bottom,x:_?F.head:V.center,y:_?V.center:F.head,height:_?V.size:Math.abs(F.size),width:_?Math.abs(F.size):V.size};M&&(X.options=A||this.resolveDataElementOptions(k,e[k].active?"active":c));const K=X.options||e[k].options;Fc(X,K,H,p),jc(X,K,I.ratio),this.updateElement(e[k],k,X,c)}}_getStacks(e,o){const{iScale:u}=this._cachedMeta,c=u.getMatchingVisibleMetas(this._type).filter(y=>y.controller.options.grouped),h=u.options.stacked,p=[],g=y=>{const _=y.controller.getParsed(o),I=_&&_[y.vScale.axis];if(xt(I)||isNaN(I))return!0};for(const y of c)if((void 0===o||!g(y))&&((!1===h||-1===p.indexOf(y.stack)||void 0===h&&void 0===y.stack)&&p.push(y.stack),y.index===e))break;return p.length||p.push(void 0),p}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,o,u){const c=this._getStacks(e,u),h=void 0!==o?c.indexOf(o):-1;return-1===h?c.length-1:h}_getRuler(){const e=this.options,o=this._cachedMeta,u=o.iScale,c=[];let h,p;for(h=0,p=o.data.length;h<p;++h)c.push(u.getPixelForValue(this.getParsed(h)[u.axis],h));const g=e.barThickness;return{min:g||Oc(o),pixels:c,start:u._startPixel,end:u._endPixel,stackCount:this._getStackCount(),scale:u,grouped:e.grouped,ratio:g?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:o,_stacked:u},options:{base:c,minBarLength:h}}=this,p=c||0,g=this.getParsed(e),y=g._custom,_=Cs(y);let k,N,I=g[o.axis],A=0,M=u?this.applyStack(o,g,u):I;M!==I&&(A=M-I,M=I),_&&(I=y.barStart,M=y.barEnd-y.barStart,0!==I&&qe(I)!==qe(y.barEnd)&&(A=0),A+=I);const F=xt(c)||_?A:c;let V=o.getPixelForValue(F);if(k=this.chart.getDataVisibility(e)?o.getPixelForValue(A+M):V,N=k-V,Math.abs(N)<h){N=function(i,n,e){return 0!==i?qe(i):(n.isHorizontal()?1:-1)*(n.min>=e?1:-1)}(N,o,p)*h,I===p&&(V-=N/2);const H=o.getPixelForDecimal(0),X=o.getPixelForDecimal(1),K=Math.min(H,X),z=Math.max(H,X);V=Math.max(Math.min(V,z),K),k=V+N}if(V===o.getPixelForValue(p)){const H=qe(N)*o.getLineWidthForValue(p)/2;V+=H,N-=H}return{size:N,base:V,head:k,center:k+N/2}}_calculateBarIndexPixels(e,o){const u=o.scale,c=this.options,h=c.skipNull,p=_t(c.maxBarThickness,1/0);let g,y;if(o.grouped){const _=h?this._getStackCount(e):o.stackCount,I="flex"===c.barThickness?function(i,n,e,o){const u=n.pixels,c=u[i];let h=i>0?u[i-1]:null,p=i<u.length-1?u[i+1]:null;const g=e.categoryPercentage;null===h&&(h=c-(null===p?n.end-n.start:p-c)),null===p&&(p=c+c-h);const y=c-(c-Math.min(h,p))/2*g;return{chunk:Math.abs(p-h)/2*g/o,ratio:e.barPercentage,start:y}}(e,o,c,_):function(i,n,e,o){const u=e.barThickness;let c,h;return xt(u)?(c=n.min*e.categoryPercentage,h=e.barPercentage):(c=u*o,h=1),{chunk:c/o,ratio:h,start:n.pixels[i]-c/2}}(e,o,c,_),A=this._getStackIndex(this.index,this._cachedMeta.stack,h?e:void 0);g=I.start+I.chunk*A+I.chunk/2,y=Math.min(p,I.chunk*I.ratio)}else g=u.getPixelForValue(this.getParsed(e)[u.axis],e),y=Math.min(p,o.min*o.ratio);return{base:g-y/2,head:g+y/2,center:g,size:y}}draw(){const e=this._cachedMeta,o=e.vScale,u=e.data,c=u.length;let h=0;for(;h<c;++h)null!==this.getParsed(h)[o.axis]&&u[h].draw(this._ctx)}}return i.id="bar",i.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},i.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}},i})(),Vc=(()=>{class i extends Cn{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,o,u,c){const h=super.parsePrimitiveData(e,o,u,c);for(let p=0;p<h.length;p++)h[p]._custom=this.resolveDataElementOptions(p+u).radius;return h}parseArrayData(e,o,u,c){const h=super.parseArrayData(e,o,u,c);for(let p=0;p<h.length;p++)h[p]._custom=_t(o[u+p][2],this.resolveDataElementOptions(p+u).radius);return h}parseObjectData(e,o,u,c){const h=super.parseObjectData(e,o,u,c);for(let p=0;p<h.length;p++){const g=o[u+p];h[p]._custom=_t(g&&g.r&&+g.r,this.resolveDataElementOptions(p+u).radius)}return h}getMaxOverflow(){const e=this._cachedMeta.data;let o=0;for(let u=e.length-1;u>=0;--u)o=Math.max(o,e[u].size(this.resolveDataElementOptions(u))/2);return o>0&&o}getLabelAndValue(e){const o=this._cachedMeta,{xScale:u,yScale:c}=o,h=this.getParsed(e),p=u.getLabelForValue(h.x),g=c.getLabelForValue(h.y),y=h._custom;return{label:o.label,value:"("+p+", "+g+(y?", "+y:"")+")"}}update(e){const o=this._cachedMeta.data;this.updateElements(o,0,o.length,e)}updateElements(e,o,u,c){const h="reset"===c,{iScale:p,vScale:g}=this._cachedMeta,{sharedOptions:y,includeOptions:_}=this._getSharedOptions(o,c),I=p.axis,A=g.axis;for(let M=o;M<o+u;M++){const k=e[M],N=!h&&this.getParsed(M),F={},V=F[I]=h?p.getPixelForDecimal(.5):p.getPixelForValue(N[I]),H=F[A]=h?g.getBasePixel():g.getPixelForValue(N[A]);F.skip=isNaN(V)||isNaN(H),_&&(F.options=y||this.resolveDataElementOptions(M,k.active?"active":c),h&&(F.options.radius=0)),this.updateElement(k,M,F,c)}}resolveDataElementOptions(e,o){const u=this.getParsed(e);let c=super.resolveDataElementOptions(e,o);c.$shared&&(c=Object.assign({},c,{$shared:!1}));const h=c.radius;return"active"!==o&&(c.radius=0),c.radius+=_t(u&&u._custom,h),c}}return i.id="bubble",i.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},i.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}},i})(),Au=(()=>{class i extends Cn{constructor(e,o){super(e,o),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,o){const u=this.getDataset().data,c=this._cachedMeta;if(!1===this._parsing)c._parsed=u;else{let p,g,h=y=>+u[y];if(St(u[e])){const{key:y="value"}=this._parsing;h=_=>+Rn(u[_],y)}for(p=e,g=e+o;p<g;++p)c._parsed[p]=h(p)}}_getRotation(){return Pe(this.options.rotation-90)}_getCircumference(){return Pe(this.options.circumference)}_getRotationExtents(){let e=Ot,o=-Ot;for(let u=0;u<this.chart.data.datasets.length;++u)if(this.chart.isDatasetVisible(u)){const c=this.chart.getDatasetMeta(u).controller,h=c._getRotation(),p=c._getCircumference();e=Math.min(e,h),o=Math.max(o,h+p)}return{rotation:e,circumference:o-e}}update(e){const o=this.chart,{chartArea:u}=o,c=this._cachedMeta,h=c.data,p=this.getMaxBorderWidth()+this.getMaxOffset(h)+this.options.spacing,g=Math.max((Math.min(u.width,u.height)-p)/2,0),y=Math.min(((i,n)=>"string"==typeof i&&i.endsWith("%")?parseFloat(i)/100:i/n)(this.options.cutout,g),1),_=this._getRingWeight(this.index),{circumference:I,rotation:A}=this._getRotationExtents(),{ratioX:M,ratioY:k,offsetX:N,offsetY:F}=function(i,n,e){let o=1,u=1,c=0,h=0;if(n<Ot){const p=i,g=p+n,y=Math.cos(p),_=Math.sin(p),I=Math.cos(g),A=Math.sin(g),M=(X,K,z)=>Ce(X,p,g,!0)?1:Math.max(K,K*e,z,z*e),k=(X,K,z)=>Ce(X,p,g,!0)?-1:Math.min(K,K*e,z,z*e),N=M(0,y,I),F=M(Vt,_,A),V=k(Pt,y,I),H=k(Pt+Vt,_,A);o=(N-V)/2,u=(F-H)/2,c=-(N+V)/2,h=-(F+H)/2}return{ratioX:o,ratioY:u,offsetX:c,offsetY:h}}(A,I,y),X=Math.max(Math.min((u.width-p)/M,(u.height-p)/k)/2,0),K=fs(this.options.radius,X),et=(K-Math.max(K*y,0))/this._getVisibleDatasetWeightTotal();this.offsetX=N*K,this.offsetY=F*K,c.total=this.calculateTotal(),this.outerRadius=K-et*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-et*_,0),this.updateElements(h,0,h.length,e)}_circumference(e,o){const u=this.options,c=this._cachedMeta,h=this._getCircumference();return o&&u.animation.animateRotate||!this.chart.getDataVisibility(e)||null===c._parsed[e]||c.data[e].hidden?0:this.calculateCircumference(c._parsed[e]*h/Ot)}updateElements(e,o,u,c){const h="reset"===c,p=this.chart,g=p.chartArea,I=(g.left+g.right)/2,A=(g.top+g.bottom)/2,M=h&&p.options.animation.animateScale,k=M?0:this.innerRadius,N=M?0:this.outerRadius,{sharedOptions:F,includeOptions:V}=this._getSharedOptions(o,c);let X,H=this._getRotation();for(X=0;X<o;++X)H+=this._circumference(X,h);for(X=o;X<o+u;++X){const K=this._circumference(X,h),z=e[X],et={x:I+this.offsetX,y:A+this.offsetY,startAngle:H,endAngle:H+K,circumference:K,outerRadius:N,innerRadius:k};V&&(et.options=F||this.resolveDataElementOptions(X,z.active?"active":c)),H+=K,this.updateElement(z,X,et,c)}}calculateTotal(){const e=this._cachedMeta,o=e.data;let c,u=0;for(c=0;c<o.length;c++){const h=e._parsed[c];null!==h&&!isNaN(h)&&this.chart.getDataVisibility(c)&&!o[c].hidden&&(u+=Math.abs(h))}return u}calculateCircumference(e){const o=this._cachedMeta.total;return o>0&&!isNaN(e)?Ot*(Math.abs(e)/o):0}getLabelAndValue(e){const u=this.chart,c=u.data.labels||[],h=hi(this._cachedMeta._parsed[e],u.options.locale);return{label:c[e]||"",value:h}}getMaxBorderWidth(e){let o=0;const u=this.chart;let c,h,p,g,y;if(!e)for(c=0,h=u.data.datasets.length;c<h;++c)if(u.isDatasetVisible(c)){p=u.getDatasetMeta(c),e=p.data,g=p.controller;break}if(!e)return 0;for(c=0,h=e.length;c<h;++c)y=g.resolveDataElementOptions(c),"inner"!==y.borderAlign&&(o=Math.max(o,y.borderWidth||0,y.hoverBorderWidth||0));return o}getMaxOffset(e){let o=0;for(let u=0,c=e.length;u<c;++u){const h=this.resolveDataElementOptions(u);o=Math.max(o,h.offset||0,h.hoverOffset||0)}return o}_getRingWeightOffset(e){let o=0;for(let u=0;u<e;++u)this.chart.isDatasetVisible(u)&&(o+=this._getRingWeight(u));return o}_getRingWeight(e){return Math.max(_t(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return i.id="doughnut",i.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},i.descriptors={_scriptable:n=>"spacing"!==n,_indexable:n=>"spacing"!==n},i.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(n){const e=n.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:o}}=n.legend.options;return e.labels.map((u,c)=>{const p=n.getDatasetMeta(0).controller.getStyle(c);return{text:u,fillStyle:p.backgroundColor,strokeStyle:p.borderColor,lineWidth:p.borderWidth,pointStyle:o,hidden:!n.getDataVisibility(c),index:c}})}return[]}},onClick(n,e,o){o.chart.toggleDataVisibility(e.index),o.chart.update()}},tooltip:{callbacks:{title:()=>"",label(n){let e=n.label;const o=": "+n.formattedValue;return It(e)?(e=e.slice(),e[0]+=o):e+=o,e}}}}},i})(),Cu=(()=>{class i extends Cn{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const o=this._cachedMeta,{dataset:u,data:c=[],_dataset:h}=o,p=this.chart._animationsDisabled;let{start:g,count:y}=ri(o,c,p);this._drawStart=g,this._drawCount=y,Le(o)&&(g=0,y=c.length),u._chart=this.chart,u._datasetIndex=this.index,u._decimated=!!h._decimated,u.points=c;const _=this.resolveDatasetElementOptions(e);this.options.showLine||(_.borderWidth=0),_.segment=this.options.segment,this.updateElement(u,void 0,{animated:!p,options:_},e),this.updateElements(c,g,y,e)}updateElements(e,o,u,c){const h="reset"===c,{iScale:p,vScale:g,_stacked:y,_dataset:_}=this._cachedMeta,{sharedOptions:I,includeOptions:A}=this._getSharedOptions(o,c),M=p.axis,k=g.axis,{spanGaps:N,segment:F}=this.options,V=jn(N)?N:Number.POSITIVE_INFINITY,H=this.chart._animationsDisabled||h||"none"===c;let X=o>0&&this.getParsed(o-1);for(let K=o;K<o+u;++K){const z=e[K],et=this.getParsed(K),ot=H?z:{},ft=xt(et[k]),dt=ot[M]=p.getPixelForValue(et[M],K),Ut=ot[k]=h||ft?g.getBasePixel():g.getPixelForValue(y?this.applyStack(g,et,y):et[k],K);ot.skip=isNaN(dt)||isNaN(Ut)||ft,ot.stop=K>0&&Math.abs(et[M]-X[M])>V,F&&(ot.parsed=et,ot.raw=_.data[K]),A&&(ot.options=I||this.resolveDataElementOptions(K,z.active?"active":c)),H||this.updateElement(z,K,ot,c),X=et}}getMaxOverflow(){const e=this._cachedMeta,o=e.dataset,u=o.options&&o.options.borderWidth||0,c=e.data||[];if(!c.length)return u;const h=c[0].size(this.resolveDataElementOptions(0)),p=c[c.length-1].size(this.resolveDataElementOptions(c.length-1));return Math.max(u,h,p)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}return i.id="line",i.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},i.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}},i})(),Bc=(()=>{class i extends Cn{constructor(e,o){super(e,o),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const u=this.chart,c=u.data.labels||[],h=hi(this._cachedMeta._parsed[e].r,u.options.locale);return{label:c[e]||"",value:h}}parseObjectData(e,o,u,c){return Ao.bind(this)(e,o,u,c)}update(e){const o=this._cachedMeta.data;this._updateRadius(),this.updateElements(o,0,o.length,e)}getMinMax(){const o={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return this._cachedMeta.data.forEach((u,c)=>{const h=this.getParsed(c).r;!isNaN(h)&&this.chart.getDataVisibility(c)&&(h<o.min&&(o.min=h),h>o.max&&(o.max=h))}),o}_updateRadius(){const e=this.chart,o=e.chartArea,u=e.options,c=Math.min(o.right-o.left,o.bottom-o.top),h=Math.max(c/2,0),g=(h-Math.max(u.cutoutPercentage?h/100*u.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=h-g*this.index,this.innerRadius=this.outerRadius-g}updateElements(e,o,u,c){const h="reset"===c,p=this.chart,y=p.options.animation,_=this._cachedMeta.rScale,I=_.xCenter,A=_.yCenter,M=_.getIndexAngle(0)-.5*Pt;let N,k=M;const F=360/this.countVisibleElements();for(N=0;N<o;++N)k+=this._computeAngle(N,c,F);for(N=o;N<o+u;N++){const V=e[N];let H=k,X=k+this._computeAngle(N,c,F),K=p.getDataVisibility(N)?_.getDistanceFromCenterForValue(this.getParsed(N).r):0;k=X,h&&(y.animateScale&&(K=0),y.animateRotate&&(H=X=M));const z={x:I,y:A,innerRadius:0,outerRadius:K,startAngle:H,endAngle:X,options:this.resolveDataElementOptions(N,V.active?"active":c)};this.updateElement(V,N,z,c)}}countVisibleElements(){let o=0;return this._cachedMeta.data.forEach((u,c)=>{!isNaN(this.getParsed(c).r)&&this.chart.getDataVisibility(c)&&o++}),o}_computeAngle(e,o,u){return this.chart.getDataVisibility(e)?Pe(this.resolveDataElementOptions(e,o).angle||u):0}}return i.id="polarArea",i.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},i.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(n){const e=n.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:o}}=n.legend.options;return e.labels.map((u,c)=>{const p=n.getDatasetMeta(0).controller.getStyle(c);return{text:u,fillStyle:p.backgroundColor,strokeStyle:p.borderColor,lineWidth:p.borderWidth,pointStyle:o,hidden:!n.getDataVisibility(c),index:c}})}return[]}},onClick(n,e,o){o.chart.toggleDataVisibility(e.index),o.chart.update()}},tooltip:{callbacks:{title:()=>"",label:n=>n.chart.data.labels[n.dataIndex]+": "+n.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}},i})(),zc=(()=>{class i extends Au{}return i.id="pie",i.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"},i})(),Hc=(()=>{class i extends Cn{getLabelAndValue(e){const o=this._cachedMeta.vScale,u=this.getParsed(e);return{label:o.getLabels()[e],value:""+o.getLabelForValue(u[o.axis])}}parseObjectData(e,o,u,c){return Ao.bind(this)(e,o,u,c)}update(e){const o=this._cachedMeta,u=o.dataset,c=o.data||[],h=o.iScale.getLabels();if(u.points=c,"resize"!==e){const p=this.resolveDatasetElementOptions(e);this.options.showLine||(p.borderWidth=0),this.updateElement(u,void 0,{_loop:!0,_fullLoop:h.length===c.length,options:p},e)}this.updateElements(c,0,c.length,e)}updateElements(e,o,u,c){const h=this._cachedMeta.rScale,p="reset"===c;for(let g=o;g<o+u;g++){const y=e[g],_=this.resolveDataElementOptions(g,y.active?"active":c),I=h.getPointPositionForValue(g,this.getParsed(g).r),A=p?h.xCenter:I.x,M=p?h.yCenter:I.y,k={x:A,y:M,angle:I.angle,skip:isNaN(A)||isNaN(M),options:_};this.updateElement(y,g,k,c)}}}return i.id="radar",i.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},i.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}},i})();class $n{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(n){const{x:e,y:o}=this.getProps(["x","y"],n);return{x:e,y:o}}hasValue(){return jn(this.x)&&jn(this.y)}getProps(n,e){const o=this.$animations;if(!e||!o)return this;const u={};return n.forEach(c=>{u[c]=o[c]&&o[c].active()?o[c]._to:this[c]}),u}}$n.defaults={},$n.defaultRoutes=void 0;const Mu={values:i=>It(i)?i:""+i,numeric(i,n,e){if(0===i)return"0";const o=this.chart.options.locale;let u,c=i;if(e.length>1){const y=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(y<1e-4||y>1e15)&&(u="scientific"),c=function(i,n){let e=n.length>3?n[2].value-n[1].value:n[1].value-n[0].value;return Math.abs(e)>=1&&i!==Math.floor(i)&&(e=i-Math.floor(i)),e}(i,e)}const h=$t(Math.abs(c)),p=Math.max(Math.min(-1*Math.floor(h),20),0),g={notation:u,minimumFractionDigits:p,maximumFractionDigits:p};return Object.assign(g,this.options.ticks.format),hi(i,o,g)},logarithmic(i,n,e){if(0===i)return"0";const o=i/Math.pow(10,Math.floor($t(i)));return 1===o||2===o||5===o?Mu.numeric.call(this,i,n,e):""}};var Ri={formatters:Mu};function Ms(i,n,e,o,u){const c=_t(o,0),h=Math.min(_t(u,i.length),i.length);let g,y,_,p=0;for(e=Math.ceil(e),u&&(g=u-o,e=g/Math.floor(g/e)),_=c;_<0;)p++,_=Math.round(c+p*e);for(y=Math.max(c,0);y<h;y++)y===_&&(n.push(i[y]),p++,_=Math.round(c+p*e))}Et.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(i,n)=>n.lineWidth,tickColor:(i,n)=>n.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ri.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),Et.route("scale.ticks","color","","color"),Et.route("scale.grid","color","","borderColor"),Et.route("scale.grid","borderColor","","borderColor"),Et.route("scale.title","color","","color"),Et.describe("scale",{_fallback:!1,_scriptable:i=>!i.startsWith("before")&&!i.startsWith("after")&&"callback"!==i&&"parser"!==i,_indexable:i=>"borderDash"!==i&&"tickBorderDash"!==i}),Et.describe("scales",{_fallback:"scale"}),Et.describe("scale.ticks",{_scriptable:i=>"backdropPadding"!==i&&"callback"!==i,_indexable:i=>"backdropPadding"!==i});const Pa=(i,n,e)=>"top"===n||"left"===n?i[n]+e:i[n]-e;function Pu(i,n){const e=[],o=i.length/n,u=i.length;let c=0;for(;c<u;c+=o)e.push(i[Math.floor(c)]);return e}function Wc(i,n,e){const o=i.ticks.length,u=Math.min(n,o-1),c=i._startPixel,h=i._endPixel,p=1e-6;let y,g=i.getPixelForTick(u);if(!(e&&(y=1===o?Math.max(g-c,h-g):0===n?(i.getPixelForTick(1)-g)/2:(g-i.getPixelForTick(u-1))/2,g+=u<n?y:-y,g<c-p||g>h+p)))return g}function vr(i){return i.drawTicks?i.tickLength:0}function Oa(i,n){if(!i.display)return 0;const e=Xt(i.font,n),o=se(i.padding);return(It(i.text)?i.text.length:1)*e.lineHeight+o.height}function Lu(i,n,e){let o=Tn(i);return(e&&"right"!==n||!e&&"right"===n)&&(o=(i=>"left"===i?"right":"right"===i?"left":i)(o)),o}class Qr extends $n{constructor(n){super(),this.id=n.id,this.type=n.type,this.options=void 0,this.ctx=n.ctx,this.chart=n.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(n){this.options=n.setContext(this.getContext()),this.axis=n.axis,this._userMin=this.parse(n.min),this._userMax=this.parse(n.max),this._suggestedMin=this.parse(n.suggestedMin),this._suggestedMax=this.parse(n.suggestedMax)}parse(n,e){return n}getUserBounds(){let{_userMin:n,_userMax:e,_suggestedMin:o,_suggestedMax:u}=this;return n=We(n,Number.POSITIVE_INFINITY),e=We(e,Number.NEGATIVE_INFINITY),o=We(o,Number.POSITIVE_INFINITY),u=We(u,Number.NEGATIVE_INFINITY),{min:We(n,o),max:We(e,u),minDefined:Yt(n),maxDefined:Yt(e)}}getMinMax(n){let h,{min:e,max:o,minDefined:u,maxDefined:c}=this.getUserBounds();if(u&&c)return{min:e,max:o};const p=this.getMatchingVisibleMetas();for(let g=0,y=p.length;g<y;++g)h=p[g].controller.getMinMax(this,n),u||(e=Math.min(e,h.min)),c||(o=Math.max(o,h.max));return e=c&&e>o?o:e,o=u&&e>o?e:o,{min:We(e,We(o,e)),max:We(o,We(e,o))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const n=this.chart.data;return this.options.labels||(this.isHorizontal()?n.xLabels:n.yLabels)||n.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Bt(this.options.beforeUpdate,[this])}update(n,e,o){const{beginAtZero:u,grace:c,ticks:h}=this.options,p=h.sampleSize;this.beforeUpdate(),this.maxWidth=n,this.maxHeight=e,this._margins=o=Object.assign({left:0,right:0,top:0,bottom:0},o),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+o.left+o.right:this.height+o.top+o.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(i,n,e){const{min:o,max:u}=i,c=fs(n,(u-o)/2),h=(p,g)=>e&&0===p?0:p+g;return{min:h(o,-Math.abs(c)),max:h(u,c)}}(this,c,u),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const g=p<this.ticks.length;this._convertTicksToLabels(g?Pu(this.ticks,p):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),h.display&&(h.autoSkip||"auto"===h.source)&&(this.ticks=function(i,n){const e=i.options.ticks,o=e.maxTicksLimit||function(i){const n=i.options.offset,e=i._tickSize();return Math.floor(Math.min(i._length/e+(n?0:1),i._maxLength/e))}(i),u=e.major.enabled?function(i){const n=[];let e,o;for(e=0,o=i.length;e<o;e++)i[e].major&&n.push(e);return n}(n):[],c=u.length,h=u[0],p=u[c-1],g=[];if(c>o)return function(i,n,e,o){let h,u=0,c=e[0];for(o=Math.ceil(o),h=0;h<i.length;h++)h===c&&(n.push(i[h]),u++,c=e[u*o])}(n,g,u,c/o),g;const y=function(i,n,e){const o=function(i){const n=i.length;let e,o;if(n<2)return!1;for(o=i[0],e=1;e<n;++e)if(i[e]-i[e-1]!==o)return!1;return o}(i),u=n.length/e;if(!o)return Math.max(u,1);const c=function(i){const n=[],e=Math.sqrt(i);let o;for(o=1;o<e;o++)i%o==0&&(n.push(o),n.push(i/o));return e===(0|e)&&n.push(e),n.sort((u,c)=>u-c).pop(),n}(o);for(let h=0,p=c.length-1;h<p;h++){const g=c[h];if(g>u)return g}return Math.max(u,1)}(u,n,o);if(c>0){let _,I;const A=c>1?Math.round((p-h)/(c-1)):null;for(Ms(n,g,y,xt(A)?0:h-A,h),_=0,I=c-1;_<I;_++)Ms(n,g,y,u[_],u[_+1]);return Ms(n,g,y,p,xt(A)?n.length:p+A),g}return Ms(n,g,y),g}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),g&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,o,n=this.options.reverse;this.isHorizontal()?(e=this.left,o=this.right):(e=this.top,o=this.bottom,n=!n),this._startPixel=e,this._endPixel=o,this._reversePixels=n,this._length=o-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Bt(this.options.afterUpdate,[this])}beforeSetDimensions(){Bt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Bt(this.options.afterSetDimensions,[this])}_callHooks(n){this.chart.notifyPlugins(n,this.getContext()),Bt(this.options[n],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Bt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(n){const e=this.options.ticks;let o,u,c;for(o=0,u=n.length;o<u;o++)c=n[o],c.label=Bt(e.callback,[c.value,o,n],this)}afterTickToLabelConversion(){Bt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Bt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const n=this.options,e=n.ticks,o=this.ticks.length,u=e.minRotation||0,c=e.maxRotation;let p,g,y,h=u;if(!this._isVisible()||!e.display||u>=c||o<=1||!this.isHorizontal())return void(this.labelRotation=u);const _=this._getLabelSizes(),I=_.widest.width,A=_.highest.height,M=ie(this.chart.width-I,0,this.maxWidth);p=n.offset?this.maxWidth/o:M/(o-1),I+6>p&&(p=M/(o-(n.offset?.5:1)),g=this.maxHeight-vr(n.grid)-e.padding-Oa(n.title,this.chart.options.font),y=Math.sqrt(I*I+A*A),h=Xi(Math.min(Math.asin(ie((_.highest.height+6)/p,-1,1)),Math.asin(ie(g/y,-1,1))-Math.asin(ie(A/y,-1,1)))),h=Math.max(u,Math.min(c,h))),this.labelRotation=h}afterCalculateLabelRotation(){Bt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Bt(this.options.beforeFit,[this])}fit(){const n={width:0,height:0},{chart:e,options:{ticks:o,title:u,grid:c}}=this,h=this._isVisible(),p=this.isHorizontal();if(h){const g=Oa(u,e.options.font);if(p?(n.width=this.maxWidth,n.height=vr(c)+g):(n.height=this.maxHeight,n.width=vr(c)+g),o.display&&this.ticks.length){const{first:y,last:_,widest:I,highest:A}=this._getLabelSizes(),M=2*o.padding,k=Pe(this.labelRotation),N=Math.cos(k),F=Math.sin(k);p?n.height=Math.min(this.maxHeight,n.height+(o.mirror?0:F*I.width+N*A.height)+M):n.width=Math.min(this.maxWidth,n.width+(o.mirror?0:N*I.width+F*A.height)+M),this._calculatePadding(y,_,F,N)}}this._handleMargins(),p?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=n.height):(this.width=n.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(n,e,o,u){const{ticks:{align:c,padding:h},position:p}=this.options,g=0!==this.labelRotation,y="top"!==p&&"x"===this.axis;if(this.isHorizontal()){const _=this.getPixelForTick(0)-this.left,I=this.right-this.getPixelForTick(this.ticks.length-1);let A=0,M=0;g?y?(A=u*n.width,M=o*e.height):(A=o*n.height,M=u*e.width):"start"===c?M=e.width:"end"===c?A=n.width:"inner"!==c&&(A=n.width/2,M=e.width/2),this.paddingLeft=Math.max((A-_+h)*this.width/(this.width-_),0),this.paddingRight=Math.max((M-I+h)*this.width/(this.width-I),0)}else{let _=e.height/2,I=n.height/2;"start"===c?(_=0,I=n.height):"end"===c&&(_=e.height,I=0),this.paddingTop=_+h,this.paddingBottom=I+h}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Bt(this.options.afterFit,[this])}isHorizontal(){const{axis:n,position:e}=this.options;return"top"===e||"bottom"===e||"x"===n}isFullSize(){return this.options.fullSize}_convertTicksToLabels(n){let e,o;for(this.beforeTickToLabelConversion(),this.generateTickLabels(n),e=0,o=n.length;e<o;e++)xt(n[e].label)&&(n.splice(e,1),o--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let n=this._labelSizes;if(!n){const e=this.options.ticks.sampleSize;let o=this.ticks;e<o.length&&(o=Pu(o,e)),this._labelSizes=n=this._computeLabelSizes(o,o.length)}return n}_computeLabelSizes(n,e){const{ctx:o,_longestTextCache:u}=this,c=[],h=[];let y,_,I,A,M,k,N,F,V,H,X,p=0,g=0;for(y=0;y<e;++y){if(A=n[y].label,M=this._resolveTickFontOptions(y),o.font=k=M.string,N=u[k]=u[k]||{data:{},gc:[]},F=M.lineHeight,V=H=0,xt(A)||It(A)){if(It(A))for(_=0,I=A.length;_<I;++_)X=A[_],!xt(X)&&!It(X)&&(V=cr(o,N.data,N.gc,V,X),H+=F)}else V=cr(o,N.data,N.gc,V,A),H=F;c.push(V),h.push(H),p=Math.max(V,p),g=Math.max(H,g)}!function(i,n){Rt(i,e=>{const o=e.gc,u=o.length/2;let c;if(u>n){for(c=0;c<u;++c)delete e.data[o[c]];o.splice(0,u)}})}(u,e);const K=c.indexOf(p),z=h.indexOf(g),et=ot=>({width:c[ot]||0,height:h[ot]||0});return{first:et(0),last:et(e-1),widest:et(K),highest:et(z),widths:c,heights:h}}getLabelForValue(n){return n}getPixelForValue(n,e){return NaN}getValueForPixel(n){}getPixelForTick(n){const e=this.ticks;return n<0||n>e.length-1?null:this.getPixelForValue(e[n].value)}getPixelForDecimal(n){this._reversePixels&&(n=1-n);const e=this._startPixel+n*this._length;return ie(this._alignToPixels?ai(this.chart,e,0):e,-32768,32767)}getDecimalForPixel(n){const e=(n-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:n,max:e}=this;return n<0&&e<0?e:n>0&&e>0?n:0}getContext(n){const e=this.ticks||[];if(n>=0&&n<e.length){const o=e[n];return o.$context||(o.$context=function(i,n,e){return Be(i,{tick:e,index:n,type:"tick"})}(this.getContext(),n,o))}return this.$context||(this.$context=function(i,n){return Be(i,{scale:n,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const n=this.options.ticks,e=Pe(this.labelRotation),o=Math.abs(Math.cos(e)),u=Math.abs(Math.sin(e)),c=this._getLabelSizes(),h=n.autoSkipPadding||0,p=c?c.widest.width+h:0,g=c?c.highest.height+h:0;return this.isHorizontal()?g*o>p*u?p/o:g/u:g*u<p*o?g/o:p/u}_isVisible(){const n=this.options.display;return"auto"!==n?!!n:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(n){const e=this.axis,o=this.chart,u=this.options,{grid:c,position:h}=u,p=c.offset,g=this.isHorizontal(),_=this.ticks.length+(p?1:0),I=vr(c),A=[],M=c.setContext(this.getContext()),k=M.drawBorder?M.borderWidth:0,N=k/2,F=function(Tt){return ai(o,Tt,k)};let V,H,X,K,z,et,ot,ft,dt,Ut,Ht,jt;if("top"===h)V=F(this.bottom),et=this.bottom-I,ft=V-N,Ut=F(n.top)+N,jt=n.bottom;else if("bottom"===h)V=F(this.top),Ut=n.top,jt=F(n.bottom)-N,et=V+N,ft=this.top+I;else if("left"===h)V=F(this.right),z=this.right-I,ot=V-N,dt=F(n.left)+N,Ht=n.right;else if("right"===h)V=F(this.left),dt=n.left,Ht=F(n.right)-N,z=V+N,ot=this.left+I;else if("x"===e){if("center"===h)V=F((n.top+n.bottom)/2+.5);else if(St(h)){const Tt=Object.keys(h)[0];V=F(this.chart.scales[Tt].getPixelForValue(h[Tt]))}Ut=n.top,jt=n.bottom,et=V+N,ft=et+I}else if("y"===e){if("center"===h)V=F((n.left+n.right)/2);else if(St(h)){const Tt=Object.keys(h)[0];V=F(this.chart.scales[Tt].getPixelForValue(h[Tt]))}z=V-N,ot=z-I,dt=n.left,Ht=n.right}const ke=_t(u.ticks.maxTicksLimit,_),_n=Math.max(1,Math.ceil(_/ke));for(H=0;H<_;H+=_n){const Tt=c.setContext(this.getContext(H)),De=Tt.lineWidth,Ae=Tt.color,bo=Tt.borderDash||[],Vl=Tt.borderDashOffset,ca=Tt.tickWidth,bc=Tt.tickColor,la=Tt.tickBorderDash||[],uu=Tt.tickBorderDashOffset;X=Wc(this,H,p),void 0!==X&&(K=ai(o,X,De),g?z=ot=dt=Ht=K:et=ft=Ut=jt=K,A.push({tx1:z,ty1:et,tx2:ot,ty2:ft,x1:dt,y1:Ut,x2:Ht,y2:jt,width:De,color:Ae,borderDash:bo,borderDashOffset:Vl,tickWidth:ca,tickColor:bc,tickBorderDash:la,tickBorderDashOffset:uu}))}return this._ticksLength=_,this._borderValue=V,A}_computeLabelItems(n){const e=this.axis,o=this.options,{position:u,ticks:c}=o,h=this.isHorizontal(),p=this.ticks,{align:g,crossAlign:y,padding:_,mirror:I}=c,A=vr(o.grid),M=A+_,k=I?-_:M,N=-Pe(this.labelRotation),F=[];let V,H,X,K,z,et,ot,ft,dt,Ut,Ht,jt,ke="middle";if("top"===u)et=this.bottom-k,ot=this._getXAxisLabelAlignment();else if("bottom"===u)et=this.top+k,ot=this._getXAxisLabelAlignment();else if("left"===u){const Tt=this._getYAxisLabelAlignment(A);ot=Tt.textAlign,z=Tt.x}else if("right"===u){const Tt=this._getYAxisLabelAlignment(A);ot=Tt.textAlign,z=Tt.x}else if("x"===e){if("center"===u)et=(n.top+n.bottom)/2+M;else if(St(u)){const Tt=Object.keys(u)[0];et=this.chart.scales[Tt].getPixelForValue(u[Tt])+M}ot=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===u)z=(n.left+n.right)/2-M;else if(St(u)){const Tt=Object.keys(u)[0];z=this.chart.scales[Tt].getPixelForValue(u[Tt])}ot=this._getYAxisLabelAlignment(A).textAlign}"y"===e&&("start"===g?ke="top":"end"===g&&(ke="bottom"));const _n=this._getLabelSizes();for(V=0,H=p.length;V<H;++V){X=p[V],K=X.label;const Tt=c.setContext(this.getContext(V));ft=this.getPixelForTick(V)+c.labelOffset,dt=this._resolveTickFontOptions(V),Ut=dt.lineHeight,Ht=It(K)?K.length:1;const De=Ht/2,Ae=Tt.color,bo=Tt.textStrokeColor,Vl=Tt.textStrokeWidth;let bc,ca=ot;if(h?(z=ft,"inner"===ot&&(ca=V===H-1?this.options.reverse?"left":"right":0===V?this.options.reverse?"right":"left":"center"),jt="top"===u?"near"===y||0!==N?-Ht*Ut+Ut/2:"center"===y?-_n.highest.height/2-De*Ut+Ut:Ut/2-_n.highest.height:"near"===y||0!==N?Ut/2:"center"===y?_n.highest.height/2-De*Ut:_n.highest.height-Ht*Ut,I&&(jt*=-1)):(et=ft,jt=(1-Ht)*Ut/2),Tt.showLabelBackdrop){const la=se(Tt.backdropPadding),uu=_n.heights[V],Ul=_n.widths[V];let Bl=et+jt-la.top,zl=z-la.left;switch(ke){case"middle":Bl-=uu/2;break;case"bottom":Bl-=uu}switch(ot){case"center":zl-=Ul/2;break;case"right":zl-=Ul}bc={left:zl,top:Bl,width:Ul+la.width,height:uu+la.height,color:Tt.backdropColor}}F.push({rotation:N,label:K,font:dt,color:Ae,strokeColor:bo,strokeWidth:Vl,textOffset:jt,textAlign:ca,textBaseline:ke,translation:[z,et],backdrop:bc})}return F}_getXAxisLabelAlignment(){const{position:n,ticks:e}=this.options;if(-Pe(this.labelRotation))return"top"===n?"left":"right";let u="center";return"start"===e.align?u="left":"end"===e.align?u="right":"inner"===e.align&&(u="inner"),u}_getYAxisLabelAlignment(n){const{position:e,ticks:{crossAlign:o,mirror:u,padding:c}}=this.options,p=n+c,g=this._getLabelSizes().widest.width;let y,_;return"left"===e?u?(_=this.right+c,"near"===o?y="left":"center"===o?(y="center",_+=g/2):(y="right",_+=g)):(_=this.right-p,"near"===o?y="right":"center"===o?(y="center",_-=g/2):(y="left",_=this.left)):"right"===e?u?(_=this.left+c,"near"===o?y="right":"center"===o?(y="center",_-=g/2):(y="left",_-=g)):(_=this.left+p,"near"===o?y="left":"center"===o?(y="center",_+=g/2):(y="right",_=this.right)):y="right",{textAlign:y,x:_}}_computeLabelArea(){if(this.options.ticks.mirror)return;const n=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:n.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:n.width}:void 0}drawBackground(){const{ctx:n,options:{backgroundColor:e},left:o,top:u,width:c,height:h}=this;e&&(n.save(),n.fillStyle=e,n.fillRect(o,u,c,h),n.restore())}getLineWidthForValue(n){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const u=this.ticks.findIndex(c=>c.value===n);return u>=0?e.setContext(this.getContext(u)).lineWidth:0}drawGrid(n){const e=this.options.grid,o=this.ctx,u=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(n));let c,h;const p=(g,y,_)=>{!_.width||!_.color||(o.save(),o.lineWidth=_.width,o.strokeStyle=_.color,o.setLineDash(_.borderDash||[]),o.lineDashOffset=_.borderDashOffset,o.beginPath(),o.moveTo(g.x,g.y),o.lineTo(y.x,y.y),o.stroke(),o.restore())};if(e.display)for(c=0,h=u.length;c<h;++c){const g=u[c];e.drawOnChartArea&&p({x:g.x1,y:g.y1},{x:g.x2,y:g.y2},g),e.drawTicks&&p({x:g.tx1,y:g.ty1},{x:g.tx2,y:g.ty2},{color:g.tickColor,width:g.tickWidth,borderDash:g.tickBorderDash,borderDashOffset:g.tickBorderDashOffset})}}drawBorder(){const{chart:n,ctx:e,options:{grid:o}}=this,u=o.setContext(this.getContext()),c=o.drawBorder?u.borderWidth:0;if(!c)return;const h=o.setContext(this.getContext(0)).lineWidth,p=this._borderValue;let g,y,_,I;this.isHorizontal()?(g=ai(n,this.left,c)-c/2,y=ai(n,this.right,h)+h/2,_=I=p):(_=ai(n,this.top,c)-c/2,I=ai(n,this.bottom,h)+h/2,g=y=p),e.save(),e.lineWidth=u.borderWidth,e.strokeStyle=u.borderColor,e.beginPath(),e.moveTo(g,_),e.lineTo(y,I),e.stroke(),e.restore()}drawLabels(n){if(!this.options.ticks.display)return;const o=this.ctx,u=this._computeLabelArea();u&&Mi(o,u);const c=this._labelItems||(this._labelItems=this._computeLabelItems(n));let h,p;for(h=0,p=c.length;h<p;++h){const g=c[h],y=g.font,_=g.label;g.backdrop&&(o.fillStyle=g.backdrop.color,o.fillRect(g.backdrop.left,g.backdrop.top,g.backdrop.width,g.backdrop.height)),gn(o,_,0,g.textOffset,y,g)}u&&Gr(o)}drawTitle(){const{ctx:n,options:{position:e,title:o,reverse:u}}=this;if(!o.display)return;const c=Xt(o.font),h=se(o.padding),p=o.align;let g=c.lineHeight/2;"bottom"===e||"center"===e||St(e)?(g+=h.bottom,It(o.text)&&(g+=c.lineHeight*(o.text.length-1))):g+=h.top;const{titleX:y,titleY:_,maxWidth:I,rotation:A}=function(i,n,e,o){const{top:u,left:c,bottom:h,right:p,chart:g}=i,{chartArea:y,scales:_}=g;let A,M,k,I=0;const N=h-u,F=p-c;if(i.isHorizontal()){if(M=be(o,c,p),St(e)){const V=Object.keys(e)[0];k=_[V].getPixelForValue(e[V])+N-n}else k="center"===e?(y.bottom+y.top)/2+N-n:Pa(i,e,n);A=p-c}else{if(St(e)){const V=Object.keys(e)[0];M=_[V].getPixelForValue(e[V])-F+n}else M="center"===e?(y.left+y.right)/2-F+n:Pa(i,e,n);k=be(o,h,u),I="left"===e?-Vt:Vt}return{titleX:M,titleY:k,maxWidth:A,rotation:I}}(this,g,e,p);gn(n,o.text,0,0,c,{color:o.color,maxWidth:I,rotation:A,textAlign:Lu(p,e,u),textBaseline:"middle",translation:[y,_]})}draw(n){!this._isVisible()||(this.drawBackground(),this.drawGrid(n),this.drawBorder(),this.drawTitle(),this.drawLabels(n))}_layers(){const n=this.options,e=n.ticks&&n.ticks.z||0,o=_t(n.grid&&n.grid.z,-1);return this._isVisible()&&this.draw===Qr.prototype.draw?[{z:o,draw:u=>{this.drawBackground(),this.drawGrid(u),this.drawTitle()}},{z:o+1,draw:()=>{this.drawBorder()}},{z:e,draw:u=>{this.drawLabels(u)}}]:[{z:e,draw:u=>{this.draw(u)}}]}getMatchingVisibleMetas(n){const e=this.chart.getSortedVisibleDatasetMetas(),o=this.axis+"AxisID",u=[];let c,h;for(c=0,h=e.length;c<h;++c){const p=e[c];p[o]===this.id&&(!n||p.type===n)&&u.push(p)}return u}_resolveTickFontOptions(n){return Xt(this.options.ticks.setContext(this.getContext(n)).font)}_maxDigits(){const n=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/n}}class Fo{constructor(n,e,o){this.type=n,this.scope=e,this.override=o,this.items=Object.create(null)}isForType(n){return Object.prototype.isPrototypeOf.call(this.type.prototype,n.prototype)}register(n){const e=Object.getPrototypeOf(n);let o;var i;"id"in(i=e)&&"defaults"in i&&(o=this.register(e));const u=this.items,c=n.id,h=this.scope+"."+c;if(!c)throw new Error("class does not have id: "+n);return c in u||(u[c]=n,function(i,n,e){const o=ti(Object.create(null),[e?Et.get(e):{},Et.get(n),i.defaults]);Et.set(n,o),i.defaultRoutes&&function(i,n){Object.keys(n).forEach(e=>{const o=e.split("."),u=o.pop(),c=[i].concat(o).join("."),h=n[e].split("."),p=h.pop(),g=h.join(".");Et.route(c,u,g,p)})}(n,i.defaultRoutes),i.descriptors&&Et.describe(n,i.descriptors)}(n,h,o),this.override&&Et.override(n.id,n.overrides)),h}get(n){return this.items[n]}unregister(n){const e=this.items,o=n.id,u=this.scope;o in e&&delete e[o],u&&o in Et[u]&&(delete Et[u][o],this.override&&delete Hn[o])}}var Kn=new class{constructor(){this.controllers=new Fo(Cn,"datasets",!0),this.elements=new Fo($n,"elements"),this.plugins=new Fo(Object,"plugins"),this.scales=new Fo(Qr,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...n){this._each("register",n)}remove(...n){this._each("unregister",n)}addControllers(...n){this._each("register",n,this.controllers)}addElements(...n){this._each("register",n,this.elements)}addPlugins(...n){this._each("register",n,this.plugins)}addScales(...n){this._each("register",n,this.scales)}getController(n){return this._get(n,this.controllers,"controller")}getElement(n){return this._get(n,this.elements,"element")}getPlugin(n){return this._get(n,this.plugins,"plugin")}getScale(n){return this._get(n,this.scales,"scale")}removeControllers(...n){this._each("unregister",n,this.controllers)}removeElements(...n){this._each("unregister",n,this.elements)}removePlugins(...n){this._each("unregister",n,this.plugins)}removeScales(...n){this._each("unregister",n,this.scales)}_each(n,e,o){[...e].forEach(u=>{const c=o||this._getRegistryForType(u);o||c.isForType(u)||c===this.plugins&&u.id?this._exec(n,c,u):Rt(u,h=>{const p=o||this._getRegistryForType(h);this._exec(n,p,h)})})}_exec(n,e,o){const u=kr(n);Bt(o["before"+u],[],o),e[n](o),Bt(o["after"+u],[],o)}_getRegistryForType(n){for(let e=0;e<this._typedRegistries.length;e++){const o=this._typedRegistries[e];if(o.isForType(n))return o}return this.plugins}_get(n,e,o){const u=e.get(n);if(void 0===u)throw new Error('"'+n+'" is not a registered '+o+".");return u}},Nu=Object.freeze({__proto__:null,BarController:Tu,BubbleController:Vc,DoughnutController:Au,LineController:Cu,PolarAreaController:Bc,PieController:zc,RadarController:Hc,ScatterController:(()=>{class i extends Cn{update(e){const o=this._cachedMeta,{data:u=[]}=o,c=this.chart._animationsDisabled;let{start:h,count:p}=ri(o,u,c);if(this._drawStart=h,this._drawCount=p,Le(o)&&(h=0,p=u.length),this.options.showLine){const{dataset:g,_dataset:y}=o;g._chart=this.chart,g._datasetIndex=this.index,g._decimated=!!y._decimated,g.points=u;const _=this.resolveDatasetElementOptions(e);_.segment=this.options.segment,this.updateElement(g,void 0,{animated:!c,options:_},e)}this.updateElements(u,h,p,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=Kn.getElement("line")),super.addElements()}updateElements(e,o,u,c){const h="reset"===c,{iScale:p,vScale:g,_stacked:y,_dataset:_}=this._cachedMeta,I=this.resolveDataElementOptions(o,c),A=this.getSharedOptions(I),M=this.includeOptions(c,A),k=p.axis,N=g.axis,{spanGaps:F,segment:V}=this.options,H=jn(F)?F:Number.POSITIVE_INFINITY,X=this.chart._animationsDisabled||h||"none"===c;let K=o>0&&this.getParsed(o-1);for(let z=o;z<o+u;++z){const et=e[z],ot=this.getParsed(z),ft=X?et:{},dt=xt(ot[N]),Ut=ft[k]=p.getPixelForValue(ot[k],z),Ht=ft[N]=h||dt?g.getBasePixel():g.getPixelForValue(y?this.applyStack(g,ot,y):ot[N],z);ft.skip=isNaN(Ut)||isNaN(Ht)||dt,ft.stop=z>0&&Math.abs(ot[k]-K[k])>H,V&&(ft.parsed=ot,ft.raw=_.data[z]),M&&(ft.options=A||this.resolveDataElementOptions(z,et.active?"active":c)),X||this.updateElement(et,z,ft,c),K=ot}this.updateSharedOptions(A,c,I)}getMaxOverflow(){const e=this._cachedMeta,o=e.data||[];if(!this.options.showLine){let g=0;for(let y=o.length-1;y>=0;--y)g=Math.max(g,o[y].size(this.resolveDataElementOptions(y))/2);return g>0&&g}const u=e.dataset,c=u.options&&u.options.borderWidth||0;if(!o.length)return c;const h=o[0].size(this.resolveDataElementOptions(0)),p=o[o.length-1].size(this.resolveDataElementOptions(o.length-1));return Math.max(c,h,p)/2}}return i.id="scatter",i.defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1},i.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:n=>"("+n.label+", "+n.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}},i})()});function Jr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var Kc={_date:(()=>{class i{constructor(e){this.options=e||{}}init(e){}formats(){return Jr()}parse(e,o){return Jr()}format(e,o){return Jr()}add(e,o,u){return Jr()}diff(e,o,u){return Jr()}startOf(e,o,u){return Jr()}endOf(e,o){return Jr()}}return i.override=function(n){Object.assign(i.prototype,n)},i})()};function Xc(i,n,e,o){const{controller:u,data:c,_sorted:h}=i,p=u._cachedMeta.iScale;if(p&&n===p.axis&&"r"!==n&&h&&c.length){const g=p._reversePixels?Qi:cn;if(!o)return g(c,n,e);if(u._sharedOptions){const y=c[0],_="function"==typeof y.getRange&&y.getRange(n);if(_){const I=g(c,n,e-_),A=g(c,n,e+_);return{lo:I.lo,hi:A.hi}}}}return{lo:0,hi:c.length-1}}function ts(i,n,e,o,u){const c=i.getSortedVisibleDatasetMetas(),h=e[n];for(let p=0,g=c.length;p<g;++p){const{index:y,data:_}=c[p],{lo:I,hi:A}=Xc(c[p],n,h,u);for(let M=I;M<=A;++M){const k=_[M];k.skip||o(k,y,M)}}}function jo(i,n,e,o,u){const c=[];return!u&&!i.isPointInArea(n)||ts(i,e,n,function(p,g,y){!u&&!lr(p,i.chartArea,0)||p.inRange(n.x,n.y,o)&&c.push({element:p,datasetIndex:g,index:y})},!0),c}function Na(i,n,e,o,u,c){return c||i.isPointInArea(n)?"r"!==e||o?function(i,n,e,o,u,c){let h=[];const p=function(i){const n=-1!==i.indexOf("x"),e=-1!==i.indexOf("y");return function(o,u){const c=n?Math.abs(o.x-u.x):0,h=e?Math.abs(o.y-u.y):0;return Math.sqrt(Math.pow(c,2)+Math.pow(h,2))}}(e);let g=Number.POSITIVE_INFINITY;return ts(i,e,n,function(_,I,A){const M=_.inRange(n.x,n.y,u);if(o&&!M)return;const k=_.getCenterPoint(u);if(!c&&!i.isPointInArea(k)&&!M)return;const F=p(n,k);F<g?(h=[{element:_,datasetIndex:I,index:A}],g=F):F===g&&h.push({element:_,datasetIndex:I,index:A})}),h}(i,n,e,o,u,c):function(i,n,e,o){let u=[];return ts(i,e,n,function(h,p,g){const{startAngle:y,endAngle:_}=h.getProps(["startAngle","endAngle"],o),{angle:I}=ms(h,{x:n.x,y:n.y});Ce(I,y,_)&&u.push({element:h,datasetIndex:p,index:g})}),u}(i,n,e,u):[]}function Fu(i,n,e,o,u){const c=[],h="x"===e?"inXRange":"inYRange";let p=!1;return ts(i,e,n,(g,y,_)=>{g[h](n[e],u)&&(c.push({element:g,datasetIndex:y,index:_}),p=p||g.inRange(n.x,n.y,u))}),o&&!p?[]:c}var Ra={evaluateInteractionItems:ts,modes:{index(i,n,e,o){const u=$r(n,i),c=e.axis||"x",h=e.includeInvisible||!1,p=e.intersect?jo(i,u,c,o,h):Na(i,u,c,!1,o,h),g=[];return p.length?(i.getSortedVisibleDatasetMetas().forEach(y=>{const _=p[0].index,I=y.data[_];I&&!I.skip&&g.push({element:I,datasetIndex:y.index,index:_})}),g):[]},dataset(i,n,e,o){const u=$r(n,i),c=e.axis||"xy",h=e.includeInvisible||!1;let p=e.intersect?jo(i,u,c,o,h):Na(i,u,c,!1,o,h);if(p.length>0){const g=p[0].datasetIndex,y=i.getDatasetMeta(g).data;p=[];for(let _=0;_<y.length;++_)p.push({element:y[_],datasetIndex:g,index:_})}return p},point:(i,n,e,o)=>jo(i,$r(n,i),e.axis||"xy",o,e.includeInvisible||!1),nearest:(i,n,e,o)=>Na(i,$r(n,i),e.axis||"xy",e.intersect,o,e.includeInvisible||!1),x:(i,n,e,o)=>Fu(i,$r(n,i),"x",e.intersect,o),y:(i,n,e,o)=>Fu(i,$r(n,i),"y",e.intersect,o)}};const Vo=["left","top","right","bottom"];function di(i,n){return i.filter(e=>e.pos===n)}function Fa(i,n){return i.filter(e=>-1===Vo.indexOf(e.pos)&&e.box.axis===n)}function es(i,n){return i.sort((e,o)=>{const u=n?o:e,c=n?e:o;return u.weight===c.weight?u.index-c.index:u.weight-c.weight})}function ju(i,n,e,o){return Math.max(i[e],n[e])+Math.max(i[o],n[o])}function Vu(i,n){i.top=Math.max(i.top,n.top),i.left=Math.max(i.left,n.left),i.bottom=Math.max(i.bottom,n.bottom),i.right=Math.max(i.right,n.right)}function el(i,n,e,o){const{pos:u,box:c}=e,h=i.maxPadding;if(!St(u)){e.size&&(i[u]-=e.size);const I=o[e.stack]||{size:0,count:1};I.size=Math.max(I.size,e.horizontal?c.height:c.width),e.size=I.size/I.count,i[u]+=e.size}c.getPadding&&Vu(h,c.getPadding());const p=Math.max(0,n.outerWidth-ju(h,i,"left","right")),g=Math.max(0,n.outerHeight-ju(h,i,"top","bottom")),y=p!==i.w,_=g!==i.h;return i.w=p,i.h=g,e.horizontal?{same:y,other:_}:{same:_,other:y}}function Uu(i,n){const e=n.maxPadding;return function(u){const c={left:0,top:0,right:0,bottom:0};return u.forEach(h=>{c[h]=Math.max(n[h],e[h])}),c}(i?["left","right"]:["top","bottom"])}function Ps(i,n,e,o){const u=[];let c,h,p,g,y,_;for(c=0,h=i.length,y=0;c<h;++c){p=i[c],g=p.box,g.update(p.width||n.w,p.height||n.h,Uu(p.horizontal,n));const{same:I,other:A}=el(n,e,p,o);y|=I&&u.length,_=_||A,g.fullSize||u.push(p)}return y&&Ps(u,n,e,o)||_}function Uo(i,n,e,o,u){i.top=e,i.left=n,i.right=n+o,i.bottom=e+u,i.width=o,i.height=u}function Bu(i,n,e,o){const u=e.padding;let{x:c,y:h}=n;for(const p of i){const g=p.box,y=o[p.stack]||{count:1,placed:0,weight:1},_=p.stackWeight/y.weight||1;if(p.horizontal){const I=n.w*_,A=y.size||g.height;Ee(y.start)&&(h=y.start),g.fullSize?Uo(g,u.left,h,e.outerWidth-u.right-u.left,A):Uo(g,n.left+y.placed,h,I,A),y.start=h,y.placed+=I,h=g.bottom}else{const I=n.h*_,A=y.size||g.width;Ee(y.start)&&(c=y.start),g.fullSize?Uo(g,c,u.top,A,e.outerHeight-u.bottom-u.top):Uo(g,c,n.top+y.placed,A,I),y.start=c,y.placed+=I,c=g.right}}n.x=c,n.y=h}Et.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var He={addBox(i,n){i.boxes||(i.boxes=[]),n.fullSize=n.fullSize||!1,n.position=n.position||"top",n.weight=n.weight||0,n._layers=n._layers||function(){return[{z:0,draw(e){n.draw(e)}}]},i.boxes.push(n)},removeBox(i,n){const e=i.boxes?i.boxes.indexOf(n):-1;-1!==e&&i.boxes.splice(e,1)},configure(i,n,e){n.fullSize=e.fullSize,n.position=e.position,n.weight=e.weight},update(i,n,e,o){if(!i)return;const u=se(i.options.layout.padding),c=Math.max(n-u.width,0),h=Math.max(e-u.height,0),p=function(i){const n=function(i){const n=[];let e,o,u,c,h,p;for(e=0,o=(i||[]).length;e<o;++e)u=i[e],({position:c,options:{stack:h,stackWeight:p=1}}=u),n.push({index:e,box:u,pos:c,horizontal:u.isHorizontal(),weight:u.weight,stack:h&&c+h,stackWeight:p});return n}(i),e=es(n.filter(y=>y.box.fullSize),!0),o=es(di(n,"left"),!0),u=es(di(n,"right")),c=es(di(n,"top"),!0),h=es(di(n,"bottom")),p=Fa(n,"x"),g=Fa(n,"y");return{fullSize:e,leftAndTop:o.concat(c),rightAndBottom:u.concat(g).concat(h).concat(p),chartArea:di(n,"chartArea"),vertical:o.concat(u).concat(g),horizontal:c.concat(h).concat(p)}}(i.boxes),g=p.vertical,y=p.horizontal;Rt(i.boxes,N=>{"function"==typeof N.beforeLayout&&N.beforeLayout()});const _=g.reduce((N,F)=>F.box.options&&!1===F.box.options.display?N:N+1,0)||1,I=Object.freeze({outerWidth:n,outerHeight:e,padding:u,availableWidth:c,availableHeight:h,vBoxMaxWidth:c/2/_,hBoxMaxHeight:h/2}),A=Object.assign({},u);Vu(A,se(o));const M=Object.assign({maxPadding:A,w:c,h,x:u.left,y:u.top},u),k=function(i,n){const e=function(i){const n={};for(const e of i){const{stack:o,pos:u,stackWeight:c}=e;if(!o||!Vo.includes(u))continue;const h=n[o]||(n[o]={count:0,placed:0,weight:0,size:0});h.count++,h.weight+=c}return n}(i),{vBoxMaxWidth:o,hBoxMaxHeight:u}=n;let c,h,p;for(c=0,h=i.length;c<h;++c){p=i[c];const{fullSize:g}=p.box,y=e[p.stack],_=y&&p.stackWeight/y.weight;p.horizontal?(p.width=_?_*o:g&&n.availableWidth,p.height=u):(p.width=o,p.height=_?_*u:g&&n.availableHeight)}return e}(g.concat(y),I);Ps(p.fullSize,M,I,k),Ps(g,M,I,k),Ps(y,M,I,k)&&Ps(g,M,I,k),function(i){const n=i.maxPadding;function e(o){const u=Math.max(n[o]-i[o],0);return i[o]+=u,u}i.y+=e("top"),i.x+=e("left"),e("right"),e("bottom")}(M),Bu(p.leftAndTop,M,I,k),M.x+=M.w,M.y+=M.h,Bu(p.rightAndBottom,M,I,k),i.chartArea={left:M.left,top:M.top,right:M.left+M.w,bottom:M.top+M.h,height:M.h,width:M.w},Rt(p.chartArea,N=>{const F=N.box;Object.assign(F,i.chartArea),F.update(M.w,M.h,{left:0,top:0,right:0,bottom:0})})}};class Bo{acquireContext(n,e){}releaseContext(n){return!1}addEventListener(n,e,o){}removeEventListener(n,e,o){}getDevicePixelRatio(){return 1}getMaximumSize(n,e,o,u){return e=Math.max(0,e||n.width),o=o||n.height,{width:e,height:Math.max(0,u?Math.floor(e/u):o)}}isAttached(n){return!0}updateConfig(n){}}class Va extends Bo{acquireContext(n){return n&&n.getContext&&n.getContext("2d")||null}updateConfig(n){n.options.animation=!1}}const zo="$chartjs",il={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},zu=i=>null===i||""===i,Hu=!!Ec&&{passive:!0};function ol(i,n,e){i.canvas.removeEventListener(n,e,Hu)}function Ho(i,n){for(const e of i)if(e===n||e.contains(n))return!0}function ul(i,n,e){const o=i.canvas,u=new MutationObserver(c=>{let h=!1;for(const p of c)h=h||Ho(p.addedNodes,o),h=h&&!Ho(p.removedNodes,o);h&&e()});return u.observe(document,{childList:!0,subtree:!0}),u}function cl(i,n,e){const o=i.canvas,u=new MutationObserver(c=>{let h=!1;for(const p of c)h=h||Ho(p.removedNodes,o),h=h&&!Ho(p.addedNodes,o);h&&e()});return u.observe(document,{childList:!0,subtree:!0}),u}const Os=new Map;let Wu=0;function Wo(){const i=window.devicePixelRatio;i!==Wu&&(Wu=i,Os.forEach((n,e)=>{e.currentDevicePixelRatio!==i&&n()}))}function ll(i,n,e){const o=i.canvas,u=o&&Co(o);if(!u)return;const c=Ii((p,g)=>{const y=u.clientWidth;e(p,g),y<u.clientWidth&&e()},window),h=new ResizeObserver(p=>{const g=p[0],y=g.contentRect.width,_=g.contentRect.height;0===y&&0===_||c(y,_)});return h.observe(u),function(i,n){Os.size||window.addEventListener("resize",Wo),Os.set(i,n)}(i,c),h}function Ls(i,n,e){e&&e.disconnect(),"resize"===n&&function(i){Os.delete(i),Os.size||window.removeEventListener("resize",Wo)}(i)}function Go(i,n,e){const o=i.canvas,u=Ii(c=>{null!==i.ctx&&e(function(i,n){const e=il[i.type]||i.type,{x:o,y:u}=$r(i,n);return{type:e,chart:n,native:i,x:void 0!==o?o:null,y:void 0!==u?u:null}}(c,i))},i,c=>{const h=c[0];return[h,h.offsetX,h.offsetY]});return function(i,n,e){i.addEventListener(n,e,Hu)}(o,n,u),u}class Ua extends Bo{acquireContext(n,e){const o=n&&n.getContext&&n.getContext("2d");return o&&o.canvas===n?(function(i,n){const e=i.style,o=i.getAttribute("height"),u=i.getAttribute("width");if(i[zo]={initial:{height:o,width:u,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",zu(u)){const c=ko(i,"width");void 0!==c&&(i.width=c)}if(zu(o))if(""===i.style.height)i.height=i.width/(n||2);else{const c=ko(i,"height");void 0!==c&&(i.height=c)}}(n,e),o):null}releaseContext(n){const e=n.canvas;if(!e[zo])return!1;const o=e[zo].initial;["height","width"].forEach(c=>{const h=o[c];xt(h)?e.removeAttribute(c):e.setAttribute(c,h)});const u=o.style||{};return Object.keys(u).forEach(c=>{e.style[c]=u[c]}),e.width=e.width,delete e[zo],!0}addEventListener(n,e,o){this.removeEventListener(n,e),(n.$proxies||(n.$proxies={}))[e]=({attach:ul,detach:cl,resize:ll}[e]||Go)(n,e,o)}removeEventListener(n,e){const o=n.$proxies||(n.$proxies={}),u=o[e];u&&(({attach:Ls,detach:Ls,resize:Ls}[e]||ol)(n,e,u),o[e]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(n,e,o,u){return function(i,n,e,o){const u=Mo(i),c=dr(u,"margin"),h=oo(u.maxWidth,i,"clientWidth")||wi,p=oo(u.maxHeight,i,"clientHeight")||wi,g=function(i,n,e){let o,u;if(void 0===n||void 0===e){const c=Co(i);if(c){const h=c.getBoundingClientRect(),p=Mo(c),g=dr(p,"border","width"),y=dr(p,"padding");n=h.width-y.width-g.width,e=h.height-y.height-g.height,o=oo(p.maxWidth,c,"clientWidth"),u=oo(p.maxHeight,c,"clientHeight")}else n=i.clientWidth,e=i.clientHeight}return{width:n,height:e,maxWidth:o||wi,maxHeight:u||wi}}(i,n,e);let{width:y,height:_}=g;if("content-box"===u.boxSizing){const I=dr(u,"border","width"),A=dr(u,"padding");y-=A.width+I.width,_-=A.height+I.height}return y=Math.max(0,y-c.width),_=Math.max(0,o?Math.floor(y/o):_-c.height),y=xa(Math.min(y,h,g.maxWidth)),_=xa(Math.min(_,p,g.maxHeight)),y&&!_&&(_=xa(y/2)),{width:y,height:_}}(n,e,o,u)}isAttached(n){const e=Co(n);return!(!e||!e.isConnected)}}class hl{constructor(){this._init=[]}notify(n,e,o,u){"beforeInit"===e&&(this._init=this._createDescriptors(n,!0),this._notify(this._init,n,"install"));const c=u?this._descriptors(n).filter(u):this._descriptors(n),h=this._notify(c,n,e,o);return"afterDestroy"===e&&(this._notify(c,n,"stop"),this._notify(this._init,n,"uninstall")),h}_notify(n,e,o,u){u=u||{};for(const c of n){const h=c.plugin;if(!1===Bt(h[o],[e,u,c.options],h)&&u.cancelable)return!1}return!0}invalidate(){xt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(n){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(n);return this._notifyStateChanges(n),e}_createDescriptors(n,e){const o=n&&n.config,u=_t(o.options&&o.options.plugins,{}),c=function(i){const n={},e=[],o=Object.keys(Kn.plugins.items);for(let c=0;c<o.length;c++)e.push(Kn.getPlugin(o[c]));const u=i.plugins||[];for(let c=0;c<u.length;c++){const h=u[c];-1===e.indexOf(h)&&(e.push(h),n[h.id]=!0)}return{plugins:e,localIds:n}}(o);return!1!==u||e?function(i,{plugins:n,localIds:e},o,u){const c=[],h=i.getContext();for(const p of n){const g=p.id,y=go(o[g],u);null!==y&&c.push({plugin:p,options:fl(i.config,{plugin:p,local:e[g]},y,h)})}return c}(n,c,u,e):[]}_notifyStateChanges(n){const e=this._oldCache||[],o=this._cache,u=(c,h)=>c.filter(p=>!h.some(g=>p.plugin.id===g.plugin.id));this._notify(u(e,o),n,"stop"),this._notify(u(o,e),n,"start")}}function go(i,n){return n||!1!==i?!0===i?{}:i:null}function fl(i,{plugin:n,local:e},o,u){const c=i.pluginScopeKeys(n),h=i.getOptionScopes(o,c);return e&&n.defaults&&h.push(n.defaults),i.createResolver(h,u,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ba(i,n){return((n.datasets||{})[i]||{}).indexAxis||n.indexAxis||(Et.datasets[i]||{}).indexAxis||"x"}function Ns(i,n){return"x"===i||"y"===i?i:n.axis||function(i){return"top"===i||"bottom"===i?"x":"left"===i||"right"===i?"y":void 0}(n.position)||i.charAt(0).toLowerCase()}function Rs(i){const n=i.options||(i.options={});n.plugins=_t(n.plugins,{}),n.scales=function(i,n){const e=Hn[i.type]||{scales:{}},o=n.scales||{},u=Ba(i.type,n),c=Object.create(null),h=Object.create(null);return Object.keys(o).forEach(p=>{const g=o[p];if(!St(g))return console.error(`Invalid scale configuration for scale: ${p}`);if(g._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${p}`);const y=Ns(p,g),_=function(i,n){return i===n?"_index_":"_value_"}(y,u),I=e.scales||{};c[y]=c[y]||p,h[p]=Nn(Object.create(null),[{axis:y},g,I[y],I[_]])}),i.data.datasets.forEach(p=>{const g=p.type||i.type,y=p.indexAxis||Ba(g,n),I=(Hn[g]||{}).scales||{};Object.keys(I).forEach(A=>{const M=function(i,n){let e=i;return"_index_"===i?e=n:"_value_"===i&&(e="x"===n?"y":"x"),e}(A,y),k=p[M+"AxisID"]||c[M]||M;h[k]=h[k]||Object.create(null),Nn(h[k],[{axis:M},o[k],I[A]])})}),Object.keys(h).forEach(p=>{const g=h[p];Nn(g,[Et.scales[g.type],Et.scale])}),h}(i,n)}function Yu(i){return(i=i||{}).datasets=i.datasets||[],i.labels=i.labels||[],i}const za=new Map,Ha=new Set;function $o(i,n){let e=za.get(i);return e||(e=n(),za.set(i,e),Ha.add(e)),e}const ss=(i,n,e)=>{const o=Rn(n,e);void 0!==o&&i.add(o)};class Wa{constructor(n){var i;this._config=((i=(i=n)||{}).data=Yu(i.data),Rs(i),i),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(n){this._config.type=n}get data(){return this._config.data}set data(n){this._config.data=Yu(n)}get options(){return this._config.options}set options(n){this._config.options=n}get plugins(){return this._config.plugins}update(){const n=this._config;this.clearCache(),Rs(n)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(n){return $o(n,()=>[[`datasets.${n}`,""]])}datasetAnimationScopeKeys(n,e){return $o(`${n}.transition.${e}`,()=>[[`datasets.${n}.transitions.${e}`,`transitions.${e}`],[`datasets.${n}`,""]])}datasetElementScopeKeys(n,e){return $o(`${n}-${e}`,()=>[[`datasets.${n}.elements.${e}`,`datasets.${n}`,`elements.${e}`,""]])}pluginScopeKeys(n){const e=n.id;return $o(`${this.type}-plugin-${e}`,()=>[[`plugins.${e}`,...n.additionalOptionScopes||[]]])}_cachedScopes(n,e){const o=this._scopeCache;let u=o.get(n);return(!u||e)&&(u=new Map,o.set(n,u)),u}getOptionScopes(n,e,o){const{options:u,type:c}=this,h=this._cachedScopes(n,o),p=h.get(e);if(p)return p;const g=new Set;e.forEach(_=>{n&&(g.add(n),_.forEach(I=>ss(g,n,I))),_.forEach(I=>ss(g,u,I)),_.forEach(I=>ss(g,Hn[c]||{},I)),_.forEach(I=>ss(g,Et,I)),_.forEach(I=>ss(g,ur,I))});const y=Array.from(g);return 0===y.length&&y.push(Object.create(null)),Ha.has(e)&&h.set(e,y),y}chartOptionScopes(){const{options:n,type:e}=this;return[n,Hn[e]||{},Et.datasets[e]||{},{type:e},Et,ur]}resolveNamedOptions(n,e,o,u=[""]){const c={$shared:!0},{resolver:h,subPrefixes:p}=Ko(this._resolverCache,n,u);let g=h;(function(i,n){const{isScriptable:e,isIndexable:o}=x(i);for(const u of n){const c=e(u),h=o(u),p=(h||c)&&i[u];if(c&&(In(p)||Ku(p))||h&&It(p))return!0}return!1})(h,e)&&(c.$shared=!1,g=b(h,o=In(o)?o():o,this.createResolver(n,o,p)));for(const y of e)c[y]=g[y];return c}createResolver(n,e,o=[""],u){const{resolver:c}=Ko(this._resolverCache,n,o);return St(e)?b(c,e,void 0,u):c}}function Ko(i,n,e){let o=i.get(n);o||(o=new Map,i.set(n,o));const u=e.join();let c=o.get(u);return c||(c={resolver:f(n,e),subPrefixes:e.filter(p=>!p.toLowerCase().includes("hover"))},o.set(u,c)),c}const Ku=i=>St(i)&&Object.getOwnPropertyNames(i).reduce((n,e)=>n||In(i[e]),!1),Zu=["top","bottom","left","right","chartArea"];function Xo(i,n){return"top"===i||"bottom"===i||-1===Zu.indexOf(i)&&"x"===n}function Fs(i,n){return function(e,o){return e[i]===o[i]?e[n]-o[n]:e[i]-o[i]}}function Zo(i){const n=i.chart,e=n.options.animation;n.notifyPlugins("afterRender"),Bt(e&&e.onComplete,[i],n)}function qa(i){const n=i.chart,e=n.options.animation;Bt(e&&e.onProgress,[i],n)}function Ga(i){return wa()&&"string"==typeof i?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}const Qo={},Qu=i=>{const n=Ga(i);return Object.values(Qo).filter(e=>e.canvas===n).pop()};function ml(i,n,e){const o=Object.keys(i);for(const u of o){const c=+u;if(c>=n){const h=i[u];delete i[u],(e>0||c>n)&&(i[c+e]=h)}}}class as{constructor(n,e){const o=this.config=new Wa(e),u=Ga(n),c=Qu(u);if(c)throw new Error("Canvas is already in use. Chart with ID '"+c.id+"' must be destroyed before the canvas with ID '"+c.canvas.id+"' can be reused.");const h=o.createResolver(o.chartOptionScopes(),this.getContext());var i;this.platform=new(o.platform||(i=u,!wa()||"undefined"!=typeof OffscreenCanvas&&i instanceof OffscreenCanvas?Va:Ua)),this.platform.updateConfig(o);const p=this.platform.acquireContext(u,h.aspectRatio),g=p&&p.canvas,y=g&&g.height,_=g&&g.width;this.id=Ys(),this.ctx=p,this.canvas=g,this.width=_,this.height=y,this._options=h,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new hl,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(i,n){let e;return function(...o){return n?(clearTimeout(e),e=setTimeout(i,n,o)):i.apply(this,o),n}}(I=>this.update(I),h.resizeDelay||0),this._dataChanges=[],Qo[this.id]=this,p&&g?(ge.listen(this,"complete",Zo),ge.listen(this,"progress",qa),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:n,maintainAspectRatio:e},width:o,height:u,_aspectRatio:c}=this;return xt(n)?e&&c?c:u?o/u:null:n}get data(){return this.config.data}set data(n){this.config.data=n}get options(){return this._options}set options(n){this.config.options=n}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():li(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return io(this.canvas,this.ctx),this}stop(){return ge.stop(this),this}resize(n,e){ge.running(this)?this._resizeBeforeDraw={width:n,height:e}:this._resize(n,e)}_resize(n,e){const o=this.options,h=this.platform.getMaximumSize(this.canvas,n,e,o.maintainAspectRatio&&this.aspectRatio),p=o.devicePixelRatio||this.platform.getDevicePixelRatio(),g=this.width?"resize":"attach";this.width=h.width,this.height=h.height,this._aspectRatio=this.aspectRatio,li(this,p,!0)&&(this.notifyPlugins("resize",{size:h}),Bt(o.onResize,[this,h],this),this.attached&&this._doResize(g)&&this.render())}ensureScalesHaveIDs(){Rt(this.options.scales||{},(o,u)=>{o.id=u})}buildOrUpdateScales(){const n=this.options,e=n.scales,o=this.scales,u=Object.keys(o).reduce((h,p)=>(h[p]=!1,h),{});let c=[];e&&(c=c.concat(Object.keys(e).map(h=>{const p=e[h],g=Ns(h,p),y="r"===g,_="x"===g;return{options:p,dposition:y?"chartArea":_?"bottom":"left",dtype:y?"radialLinear":_?"category":"linear"}}))),Rt(c,h=>{const p=h.options,g=p.id,y=Ns(g,p),_=_t(p.type,h.dtype);(void 0===p.position||Xo(p.position,y)!==Xo(h.dposition))&&(p.position=h.dposition),u[g]=!0;let I=null;g in o&&o[g].type===_?I=o[g]:(I=new(Kn.getScale(_))({id:g,type:_,ctx:this.ctx,chart:this}),o[I.id]=I),I.init(p,n)}),Rt(u,(h,p)=>{h||delete o[p]}),Rt(o,h=>{He.configure(this,h,h.options),He.addBox(this,h)})}_updateMetasets(){const n=this._metasets,e=this.data.datasets.length,o=n.length;if(n.sort((u,c)=>u.index-c.index),o>e){for(let u=e;u<o;++u)this._destroyDatasetMeta(u);n.splice(e,o-e)}this._sortedMetasets=n.slice(0).sort(Fs("order","index"))}_removeUnreferencedMetasets(){const{_metasets:n,data:{datasets:e}}=this;n.length>e.length&&delete this._stacks,n.forEach((o,u)=>{0===e.filter(c=>c===o._dataset).length&&this._destroyDatasetMeta(u)})}buildOrUpdateControllers(){const n=[],e=this.data.datasets;let o,u;for(this._removeUnreferencedMetasets(),o=0,u=e.length;o<u;o++){const c=e[o];let h=this.getDatasetMeta(o);const p=c.type||this.config.type;if(h.type&&h.type!==p&&(this._destroyDatasetMeta(o),h=this.getDatasetMeta(o)),h.type=p,h.indexAxis=c.indexAxis||Ba(p,this.options),h.order=c.order||0,h.index=o,h.label=""+c.label,h.visible=this.isDatasetVisible(o),h.controller)h.controller.updateIndex(o),h.controller.linkScales();else{const g=Kn.getController(p),{datasetElementType:y,dataElementType:_}=Et.datasets[p];Object.assign(g.prototype,{dataElementType:Kn.getElement(_),datasetElementType:y&&Kn.getElement(y)}),h.controller=new g(this,o),n.push(h.controller)}}return this._updateMetasets(),n}_resetElements(){Rt(this.data.datasets,(n,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(n){const e=this.config;e.update();const o=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),u=this._animationsDisabled=!o.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:n,cancelable:!0}))return;const c=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let h=0;for(let y=0,_=this.data.datasets.length;y<_;y++){const{controller:I}=this.getDatasetMeta(y),A=!u&&-1===c.indexOf(I);I.buildOrUpdateElements(A),h=Math.max(+I.getMaxOverflow(),h)}h=this._minPadding=o.layout.autoPadding?h:0,this._updateLayout(h),u||Rt(c,y=>{y.reset()}),this._updateDatasets(n),this.notifyPlugins("afterUpdate",{mode:n}),this._layers.sort(Fs("z","_idx"));const{_active:p,_lastEvent:g}=this;g?this._eventHandler(g,!0):p.length&&this._updateHoverStyles(p,p,!0),this.render()}_updateScales(){Rt(this.scales,n=>{He.removeBox(this,n)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const n=this.options,e=new Set(Object.keys(this._listeners)),o=new Set(n.events);(!Fn(e,o)||!!this._responsiveListeners!==n.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:n}=this,e=this._getUniformDataChanges()||[];for(const{method:o,start:u,count:c}of e)ml(n,u,"_removeElements"===o?-c:c)}_getUniformDataChanges(){const n=this._dataChanges;if(!n||!n.length)return;this._dataChanges=[];const e=this.data.datasets.length,o=c=>new Set(n.filter(h=>h[0]===c).map((h,p)=>p+","+h.splice(1).join(","))),u=o(0);for(let c=1;c<e;c++)if(!Fn(u,o(c)))return;return Array.from(u).map(c=>c.split(",")).map(c=>({method:c[1],start:+c[2],count:+c[3]}))}_updateLayout(n){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;He.update(this,this.width,this.height,n);const e=this.chartArea,o=e.width<=0||e.height<=0;this._layers=[],Rt(this.boxes,u=>{o&&"chartArea"===u.position||(u.configure&&u.configure(),this._layers.push(...u._layers()))},this),this._layers.forEach((u,c)=>{u._idx=c}),this.notifyPlugins("afterLayout")}_updateDatasets(n){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:n,cancelable:!0})){for(let e=0,o=this.data.datasets.length;e<o;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,o=this.data.datasets.length;e<o;++e)this._updateDataset(e,In(n)?n({datasetIndex:e}):n);this.notifyPlugins("afterDatasetsUpdate",{mode:n})}}_updateDataset(n,e){const o=this.getDatasetMeta(n),u={meta:o,index:n,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",u)&&(o.controller._update(e),u.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",u))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(ge.has(this)?this.attached&&!ge.running(this)&&ge.start(this):(this.draw(),Zo({chart:this})))}draw(){let n;if(this._resizeBeforeDraw){const{width:o,height:u}=this._resizeBeforeDraw;this._resize(o,u),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(n=0;n<e.length&&e[n].z<=0;++n)e[n].draw(this.chartArea);for(this._drawDatasets();n<e.length;++n)e[n].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(n){const e=this._sortedMetasets,o=[];let u,c;for(u=0,c=e.length;u<c;++u){const h=e[u];(!n||h.visible)&&o.push(h)}return o}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const n=this.getSortedVisibleDatasetMetas();for(let e=n.length-1;e>=0;--e)this._drawDataset(n[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(n){const e=this.ctx,o=n._clip,u=!o.disabled,c=this.chartArea,h={meta:n,index:n.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",h)&&(u&&Mi(e,{left:!1===o.left?0:c.left-o.left,right:!1===o.right?this.width:c.right+o.right,top:!1===o.top?0:c.top-o.top,bottom:!1===o.bottom?this.height:c.bottom+o.bottom}),n.controller.draw(),u&&Gr(e),h.cancelable=!1,this.notifyPlugins("afterDatasetDraw",h))}isPointInArea(n){return lr(n,this.chartArea,this._minPadding)}getElementsAtEventForMode(n,e,o,u){const c=Ra.modes[e];return"function"==typeof c?c(this,n,o,u):[]}getDatasetMeta(n){const e=this.data.datasets[n],o=this._metasets;let u=o.filter(c=>c&&c._dataset===e).pop();return u||(u={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:n,_dataset:e,_parsed:[],_sorted:!1},o.push(u)),u}getContext(){return this.$context||(this.$context=Be(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(n){const e=this.data.datasets[n];if(!e)return!1;const o=this.getDatasetMeta(n);return"boolean"==typeof o.hidden?!o.hidden:!e.hidden}setDatasetVisibility(n,e){this.getDatasetMeta(n).hidden=!e}toggleDataVisibility(n){this._hiddenIndices[n]=!this._hiddenIndices[n]}getDataVisibility(n){return!this._hiddenIndices[n]}_updateVisibility(n,e,o){const u=o?"show":"hide",c=this.getDatasetMeta(n),h=c.controller._resolveAnimations(void 0,u);Ee(e)?(c.data[e].hidden=!o,this.update()):(this.setDatasetVisibility(n,o),h.update(c,{visible:o}),this.update(p=>p.datasetIndex===n?u:void 0))}hide(n,e){this._updateVisibility(n,e,!1)}show(n,e){this._updateVisibility(n,e,!0)}_destroyDatasetMeta(n){const e=this._metasets[n];e&&e.controller&&e.controller._destroy(),delete this._metasets[n]}_stop(){let n,e;for(this.stop(),ge.remove(this),n=0,e=this.data.datasets.length;n<e;++n)this._destroyDatasetMeta(n)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:n,ctx:e}=this;this._stop(),this.config.clearCache(),n&&(this.unbindEvents(),io(n,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete Qo[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...n){return this.canvas.toDataURL(...n)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const n=this._listeners,e=this.platform,o=(c,h)=>{e.addEventListener(this,c,h),n[c]=h},u=(c,h,p)=>{c.offsetX=h,c.offsetY=p,this._eventHandler(c)};Rt(this.options.events,c=>o(c,u))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const n=this._responsiveListeners,e=this.platform,o=(g,y)=>{e.addEventListener(this,g,y),n[g]=y},u=(g,y)=>{n[g]&&(e.removeEventListener(this,g,y),delete n[g])},c=(g,y)=>{this.canvas&&this.resize(g,y)};let h;const p=()=>{u("attach",p),this.attached=!0,this.resize(),o("resize",c),o("detach",h)};h=()=>{this.attached=!1,u("resize",c),this._stop(),this._resize(0,0),o("attach",p)},e.isAttached(this.canvas)?p():h()}unbindEvents(){Rt(this._listeners,(n,e)=>{this.platform.removeEventListener(this,e,n)}),this._listeners={},Rt(this._responsiveListeners,(n,e)=>{this.platform.removeEventListener(this,e,n)}),this._responsiveListeners=void 0}updateHoverStyle(n,e,o){const u=o?"set":"remove";let c,h,p,g;for("dataset"===e&&(c=this.getDatasetMeta(n[0].datasetIndex),c.controller["_"+u+"DatasetHoverStyle"]()),p=0,g=n.length;p<g;++p){h=n[p];const y=h&&this.getDatasetMeta(h.datasetIndex).controller;y&&y[u+"HoverStyle"](h.element,h.datasetIndex,h.index)}}getActiveElements(){return this._active||[]}setActiveElements(n){const e=this._active||[],o=n.map(({datasetIndex:c,index:h})=>{const p=this.getDatasetMeta(c);if(!p)throw new Error("No dataset found at index "+c);return{datasetIndex:c,element:p.data[h],index:h}});!bi(o,e)&&(this._active=o,this._lastEvent=null,this._updateHoverStyles(o,e))}notifyPlugins(n,e,o){return this._plugins.notify(this,n,e,o)}_updateHoverStyles(n,e,o){const u=this.options.hover,c=(g,y)=>g.filter(_=>!y.some(I=>_.datasetIndex===I.datasetIndex&&_.index===I.index)),h=c(e,n),p=o?n:c(n,e);h.length&&this.updateHoverStyle(h,u.mode,!1),p.length&&u.mode&&this.updateHoverStyle(p,u.mode,!0)}_eventHandler(n,e){const o={event:n,replay:e,cancelable:!0,inChartArea:this.isPointInArea(n)},u=h=>(h.options.events||this.options.events).includes(n.native.type);if(!1===this.notifyPlugins("beforeEvent",o,u))return;const c=this._handleEvent(n,e,o.inChartArea);return o.cancelable=!1,this.notifyPlugins("afterEvent",o,u),(c||o.changed)&&this.render(),this}_handleEvent(n,e,o){const{_active:u=[],options:c}=this,p=this._getActiveElements(n,u,o,e),g="mouseup"===(i=n).type||"click"===i.type||"contextmenu"===i.type,y=function(i,n,e,o){return e&&"mouseout"!==i.type?o?n:i:null}(n,this._lastEvent,o,g);var i;o&&(this._lastEvent=null,Bt(c.onHover,[n,p,this],this),g&&Bt(c.onClick,[n,p,this],this));const _=!bi(p,u);return(_||e)&&(this._active=p,this._updateHoverStyles(p,u,e)),this._lastEvent=y,_}_getActiveElements(n,e,o,u){if("mouseout"===n.type)return[];if(!o)return e;const c=this.options.hover;return this.getElementsAtEventForMode(n,c.mode,c,u)}}const Ya=()=>Rt(as.instances,i=>i._plugins.invalidate()),Fi=!0;function Jo(i,n,e){const{startAngle:o,pixelMargin:u,x:c,y:h,outerRadius:p,innerRadius:g}=n;let y=u/p;i.beginPath(),i.arc(c,h,p,o-y,e+y),g>u?(y=u/g,i.arc(c,h,g,e+y,o-y,!0)):i.arc(c,h,u,e+Vt,o-Vt),i.closePath(),i.clip()}function yn(i,n,e,o){return{x:e+i*Math.cos(n),y:o+i*Math.sin(n)}}function ta(i,n,e,o,u,c){const{x:h,y:p,startAngle:g,pixelMargin:y,innerRadius:_}=n,I=Math.max(n.outerRadius+o+e-y,0),A=_>0?_+o+e+y:0;let M=0;const k=u-g;if(o){const Ae=((_>0?_-o:0)+(I>0?I-o:0))/2;M=(k-(0!==Ae?k*Ae/(Ae+o):k))/2}const F=(k-Math.max(.001,k*I-e/Pt)/I)/2,V=g+F+M,H=u-F-M,{outerStart:X,outerEnd:K,innerStart:z,innerEnd:et}=function(i,n,e,o){const u=function(i){return Z(i,["outerStart","outerEnd","innerStart","innerEnd"])}(i.options.borderRadius),c=(e-n)/2,h=Math.min(c,o*n/2),p=g=>{const y=(e-Math.min(c,g))*o/2;return ie(g,0,Math.min(c,y))};return{outerStart:p(u.outerStart),outerEnd:p(u.outerEnd),innerStart:ie(u.innerStart,0,h),innerEnd:ie(u.innerEnd,0,h)}}(n,A,I,H-V),ot=I-X,ft=I-K,dt=V+X/ot,Ut=H-K/ft,Ht=A+z,jt=A+et,ke=V+z/Ht,_n=H-et/jt;if(i.beginPath(),c){if(i.arc(h,p,I,dt,Ut),K>0){const Ae=yn(ft,Ut,h,p);i.arc(Ae.x,Ae.y,K,Ut,H+Vt)}const Tt=yn(jt,H,h,p);if(i.lineTo(Tt.x,Tt.y),et>0){const Ae=yn(jt,_n,h,p);i.arc(Ae.x,Ae.y,et,H+Vt,_n+Math.PI)}if(i.arc(h,p,A,H-et/A,V+z/A,!0),z>0){const Ae=yn(Ht,ke,h,p);i.arc(Ae.x,Ae.y,z,ke+Math.PI,V-Vt)}const De=yn(ot,V,h,p);if(i.lineTo(De.x,De.y),X>0){const Ae=yn(ot,dt,h,p);i.arc(Ae.x,Ae.y,X,V-Vt,dt)}}else{i.moveTo(h,p);const Tt=Math.cos(dt)*I+h,De=Math.sin(dt)*I+p;i.lineTo(Tt,De);const Ae=Math.cos(Ut)*I+h,bo=Math.sin(Ut)*I+p;i.lineTo(Ae,bo)}i.closePath()}Object.defineProperties(as,{defaults:{enumerable:Fi,value:Et},instances:{enumerable:Fi,value:Qo},overrides:{enumerable:Fi,value:Hn},registry:{enumerable:Fi,value:Kn},version:{enumerable:Fi,value:"3.9.1"},getChart:{enumerable:Fi,value:Qu},register:{enumerable:Fi,value:(...i)=>{Kn.add(...i),Ya()}},unregister:{enumerable:Fi,value:(...i)=>{Kn.remove(...i),Ya()}}});class ea extends $n{constructor(n){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,e,o){const u=this.getProps(["x","y"],o),{angle:c,distance:h}=ms(u,{x:n,y:e}),{startAngle:p,endAngle:g,innerRadius:y,outerRadius:_,circumference:I}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],o),A=this.options.spacing/2,k=_t(I,g-p)>=Ot||Ce(c,p,g),N=Oe(h,y+A,_+A);return k&&N}getCenterPoint(n){const{x:e,y:o,startAngle:u,endAngle:c,innerRadius:h,outerRadius:p}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],n),{offset:g,spacing:y}=this.options,_=(u+c)/2,I=(h+p+y+g)/2;return{x:e+Math.cos(_)*I,y:o+Math.sin(_)*I}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:e,circumference:o}=this,u=(e.offset||0)/2,c=(e.spacing||0)/2,h=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=o>Ot?Math.floor(o/Ot):0,0===o||this.innerRadius<0||this.outerRadius<0)return;n.save();let p=0;if(u){p=u/2;const y=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(y)*p,Math.sin(y)*p),this.circumference>=Pt&&(p=u)}n.fillStyle=e.backgroundColor,n.strokeStyle=e.borderColor;const g=function(i,n,e,o,u){const{fullCircles:c,startAngle:h,circumference:p}=n;let g=n.endAngle;if(c){ta(i,n,e,o,h+Ot,u);for(let y=0;y<c;++y)i.fill();isNaN(p)||(g=h+p%Ot,p%Ot==0&&(g+=Ot))}return ta(i,n,e,o,g,u),i.fill(),g}(n,this,p,c,h);(function(i,n,e,o,u,c){const{options:h}=n,{borderWidth:p,borderJoinStyle:g}=h,y="inner"===h.borderAlign;!p||(y?(i.lineWidth=2*p,i.lineJoin=g||"round"):(i.lineWidth=p,i.lineJoin=g||"bevel"),n.fullCircles&&function(i,n,e){const{x:o,y:u,startAngle:c,pixelMargin:h,fullCircles:p}=n,g=Math.max(n.outerRadius-h,0),y=n.innerRadius+h;let _;for(e&&Jo(i,n,c+Ot),i.beginPath(),i.arc(o,u,y,c+Ot,c,!0),_=0;_<p;++_)i.stroke();for(i.beginPath(),i.arc(o,u,g,c,c+Ot),_=0;_<p;++_)i.stroke()}(i,n,y),y&&Jo(i,n,u),ta(i,n,e,o,u,c),i.stroke())})(n,this,p,c,g,h),n.restore()}}function Ka(i,n,e=n){i.lineCap=_t(e.borderCapStyle,n.borderCapStyle),i.setLineDash(_t(e.borderDash,n.borderDash)),i.lineDashOffset=_t(e.borderDashOffset,n.borderDashOffset),i.lineJoin=_t(e.borderJoinStyle,n.borderJoinStyle),i.lineWidth=_t(e.borderWidth,n.borderWidth),i.strokeStyle=_t(e.borderColor,n.borderColor)}function ec(i,n,e){i.lineTo(e.x,e.y)}function Xa(i,n,e={}){const o=i.length,{start:u=0,end:c=o-1}=e,{start:h,end:p}=n,g=Math.max(u,h),y=Math.min(c,p);return{count:o,start:g,loop:n.loop,ilen:y<g&&!(u<h&&c<h||u>p&&c>p)?o+y-g:y-g}}function na(i,n,e,o){const{points:u,options:c}=n,{count:h,start:p,loop:g,ilen:y}=Xa(u,e,o),_=function(i){return i.stepped?To:i.tension||"monotone"===i.cubicInterpolationMode?pn:ec}(c);let M,k,N,{move:I=!0,reverse:A}=o||{};for(M=0;M<=y;++M)k=u[(p+(A?y-M:M))%h],!k.skip&&(I?(i.moveTo(k.x,k.y),I=!1):_(i,N,k,A,c.stepped),N=k);return g&&(k=u[(p+(A?y:0))%h],_(i,N,k,A,c.stepped)),!!g}function Za(i,n,e,o){const u=n.points,{count:c,start:h,ilen:p}=Xa(u,e,o),{move:g=!0,reverse:y}=o||{};let A,M,k,N,F,V,_=0,I=0;const H=K=>(h+(y?p-K:K))%c,X=()=>{N!==F&&(i.lineTo(_,F),i.lineTo(_,N),i.lineTo(_,V))};for(g&&(M=u[H(0)],i.moveTo(M.x,M.y)),A=0;A<=p;++A){if(M=u[H(A)],M.skip)continue;const K=M.x,z=M.y,et=0|K;et===k?(z<N?N=z:z>F&&(F=z),_=(I*_+K)/++I):(X(),i.lineTo(K,z),k=et,I=0,N=F=z),V=z}X()}function js(i){const n=i.options;return i._decimated||i._loop||n.tension||"monotone"===n.cubicInterpolationMode||n.stepped||n.borderDash&&n.borderDash.length?na:Za}ea.id="arc",ea.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0},ea.defaultRoutes={backgroundColor:"backgroundColor"};const ji="function"==typeof Path2D;let Vs=(()=>{class i extends $n{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,o){const u=this.options;!u.tension&&"monotone"!==u.cubicInterpolationMode||u.stepped||this._pointsUpdated||(fu(this._points,u,e,u.spanGaps?this._loop:this._fullLoop,o),this._pointsUpdated=!0)}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(i,n){const e=i.points,o=i.options.spanGaps,u=e.length;if(!u)return[];const c=!!i._loop,{start:h,end:p}=function(i,n,e,o){let u=0,c=n-1;if(e&&!o)for(;u<n&&!i[u].skip;)u++;for(;u<n&&i[u].skip;)u++;for(u%=n,e&&(c+=u);c>u&&i[c%n].skip;)c--;return c%=n,{start:u,end:c}}(e,u,c,o);return function(i,n,e,o){return o&&o.setContext&&e?function(i,n,e,o){const u=i._chart.getContext(),c=Oo(i.options),{_datasetIndex:h,options:{spanGaps:p}}=i,g=e.length,y=[];let _=c,I=n[0].start,A=I;function M(k,N,F,V){const H=p?-1:1;if(k!==N){for(k+=g;e[k%g].skip;)k-=H;for(;e[N%g].skip;)N+=H;k%g!=N%g&&(y.push({start:k%g,end:N%g,loop:F,style:V}),_=V,I=N%g)}}for(const k of n){I=p?I:k.start;let F,N=e[I%g];for(A=I+1;A<=k.end;A++){const V=e[A%g];F=Oo(o.setContext(Be(u,{type:"segment",p0:N,p1:V,p0DataIndex:(A-1)%g,p1DataIndex:A%g,datasetIndex:h}))),Tc(F,_)&&M(I,A-1,k.loop,_),N=V,_=F}I<A-1&&M(I,A-1,k.loop,_)}return y}(i,n,e,o):n}(i,!0===o?[{start:h,end:p,loop:c}]:function(i,n,e,o){const u=i.length,c=[];let g,h=n,p=i[n];for(g=n+1;g<=e;++g){const y=i[g%u];y.skip||y.stop?p.skip||(c.push({start:n%u,end:(g-1)%u,loop:o=!1}),n=h=y.stop?g:null):(h=g,p.skip&&(n=g)),p=y}return null!==h&&c.push({start:n%u,end:h%u,loop:o}),c}(e,h,p<h?p+u:p,!!i._fullLoop&&0===h&&p===u-1),e,n)}(this,this.options.segment))}first(){const e=this.segments;return e.length&&this.points[e[0].start]}last(){const e=this.segments,u=e.length;return u&&this.points[e[u-1].end]}interpolate(e,o){const u=this.options,c=e[o],h=this.points,p=bu(this,{property:o,start:c,end:c});if(!p.length)return;const g=[],y=function(i){return i.stepped?Ia:i.tension||"monotone"===i.cubicInterpolationMode?gu:pr}(u);let _,I;for(_=0,I=p.length;_<I;++_){const{start:A,end:M}=p[_],k=h[A],N=h[M];if(k===N){g.push(k);continue}const V=y(k,N,Math.abs((c-k[o])/(N[o]-k[o])),u.stepped);V[o]=e[o],g.push(V)}return 1===g.length?g[0]:g}pathSegment(e,o,u){return js(this)(e,this,o,u)}path(e,o,u){const c=this.segments,h=js(this);let p=this._loop;o=o||0,u=u||this.points.length-o;for(const g of c)p&=h(e,this,g,{start:o,end:o+u-1});return!!p}draw(e,o,u,c){(this.points||[]).length&&(this.options||{}).borderWidth&&(e.save(),function(i,n,e,o){ji&&!n.options.segment?function(i,n,e,o){let u=n._path;u||(u=n._path=new Path2D,n.path(u,e,o)&&u.closePath()),Ka(i,n.options),i.stroke(u)}(i,n,e,o):function(i,n,e,o){const{segments:u,options:c}=n,h=js(n);for(const p of u)Ka(i,c,p.style),i.beginPath(),h(i,n,p,{start:e,end:e+o-1})&&i.closePath(),i.stroke()}(i,n,e,o)}(e,this,u,c),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return i.id="line",i.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},i.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},i.descriptors={_scriptable:!0,_indexable:n=>"borderDash"!==n&&"fill"!==n},i})();function sc(i,n,e,o){const u=i.options,{[e]:c}=i.getProps([e],o);return Math.abs(n-c)<u.radius+u.hitRadius}let bl=(()=>{class i extends $n{constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,o,u){const c=this.options,{x:h,y:p}=this.getProps(["x","y"],u);return Math.pow(e-h,2)+Math.pow(o-p,2)<Math.pow(c.hitRadius+c.radius,2)}inXRange(e,o){return sc(this,e,"x",o)}inYRange(e,o){return sc(this,e,"y",o)}getCenterPoint(e){const{x:o,y:u}=this.getProps(["x","y"],e);return{x:o,y:u}}size(e){let o=(e=e||this.options||{}).radius||0;return o=Math.max(o,o&&e.hoverRadius||0),2*(o+(o&&e.borderWidth||0))}draw(e,o){const u=this.options;this.skip||u.radius<.1||!lr(this,o,this.size(u)/2)||(e.strokeStyle=u.borderColor,e.lineWidth=u.borderWidth,e.fillStyle=u.backgroundColor,Wr(e,u,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}return i.id="point",i.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},i.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},i})();function Ja(i,n){const{x:e,y:o,base:u,width:c,height:h}=i.getProps(["x","y","base","width","height"],n);let p,g,y,_,I;return i.horizontal?(I=h/2,p=Math.min(e,u),g=Math.max(e,u),y=o-I,_=o+I):(I=c/2,p=e-I,g=e+I,y=Math.min(o,u),_=Math.max(o,u)),{left:p,top:y,right:g,bottom:_}}function s(i,n,e,o){return i?0:ie(n,e,o)}function l(i,n,e,o){const u=null===n,c=null===e,p=i&&!(u&&c)&&Ja(i,o);return p&&(u||Oe(n,p.left,p.right))&&(c||Oe(e,p.top,p.bottom))}function m(i,n){i.rect(n.x,n.y,n.w,n.h)}function v(i,n,e={}){const o=i.x!==e.x?-n:0,u=i.y!==e.y?-n:0;return{x:i.x+o,y:i.y+u,w:i.w+((i.x+i.w!==e.x+e.w?n:0)-o),h:i.h+((i.y+i.h!==e.y+e.h?n:0)-u),radius:i.radius}}class w extends $n{constructor(n){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,n&&Object.assign(this,n)}draw(n){const{inflateAmount:e,options:{borderColor:o,backgroundColor:u}}=this,{inner:c,outer:h}=function(i){const n=Ja(i),e=n.right-n.left,o=n.bottom-n.top,u=function(i,n,e){const u=i.borderSkipped,c=ui(i.options.borderWidth);return{t:s(u.top,c.top,0,e),r:s(u.right,c.right,0,n),b:s(u.bottom,c.bottom,0,e),l:s(u.left,c.left,0,n)}}(i,e/2,o/2),c=function(i,n,e){const{enableBorderRadius:o}=i.getProps(["enableBorderRadius"]),u=i.options.borderRadius,c=ci(u),h=Math.min(n,e),p=i.borderSkipped,g=o||St(u);return{topLeft:s(!g||p.top||p.left,c.topLeft,0,h),topRight:s(!g||p.top||p.right,c.topRight,0,h),bottomLeft:s(!g||p.bottom||p.left,c.bottomLeft,0,h),bottomRight:s(!g||p.bottom||p.right,c.bottomRight,0,h)}}(i,e/2,o/2);return{outer:{x:n.left,y:n.top,w:e,h:o,radius:c},inner:{x:n.left+u.l,y:n.top+u.t,w:e-u.l-u.r,h:o-u.t-u.b,radius:{topLeft:Math.max(0,c.topLeft-Math.max(u.t,u.l)),topRight:Math.max(0,c.topRight-Math.max(u.t,u.r)),bottomLeft:Math.max(0,c.bottomLeft-Math.max(u.b,u.l)),bottomRight:Math.max(0,c.bottomRight-Math.max(u.b,u.r))}}}}(this),p=(i=h.radius).topLeft||i.topRight||i.bottomLeft||i.bottomRight?mn:m;var i;n.save(),(h.w!==c.w||h.h!==c.h)&&(n.beginPath(),p(n,v(h,e,c)),n.clip(),p(n,v(c,-e,h)),n.fillStyle=o,n.fill("evenodd")),n.beginPath(),p(n,v(c,e)),n.fillStyle=u,n.fill(),n.restore()}inRange(n,e,o){return l(this,n,e,o)}inXRange(n,e){return l(this,n,null,e)}inYRange(n,e){return l(this,null,n,e)}getCenterPoint(n){const{x:e,y:o,base:u,horizontal:c}=this.getProps(["x","y","base","horizontal"],n);return{x:c?(e+u)/2:e,y:c?o:(o+u)/2}}getRange(n){return"x"===n?this.width/2:this.height/2}}w.id="bar",w.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},w.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var E=Object.freeze({__proto__:null,ArcElement:ea,LineElement:Vs,PointElement:bl,BarElement:w});function O(i){if(i._decimated){const n=i._data;delete i._decimated,delete i._data,Object.defineProperty(i,"data",{value:n})}}function R(i){i.data.datasets.forEach(n=>{O(n)})}var q={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(i,n,e)=>{if(!e.enabled)return void R(i);const o=i.width;i.data.datasets.forEach((u,c)=>{const{_data:h,indexAxis:p}=u,g=i.getDatasetMeta(c),y=h||u.data;if("y"===ki([p,i.options.indexAxis])||!g.controller.supportsDecimation)return;const _=i.scales[g.xAxisID];if("linear"!==_.type&&"time"!==_.type||i.options.parsing)return;let k,{start:I,count:A}=function(i,n){const e=n.length;let u,o=0;const{iScale:c}=i,{min:h,max:p,minDefined:g,maxDefined:y}=c.getUserBounds();return g&&(o=ie(cn(n,c.axis,h).lo,0,e-1)),u=y?ie(cn(n,c.axis,p).hi+1,o,e)-o:e-o,{start:o,count:u}}(g,y);if(A<=(e.threshold||4*o))O(u);else{switch(xt(h)&&(u._data=y,delete u.data,Object.defineProperty(u,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(N){this._data=N}})),e.algorithm){case"lttb":k=function(i,n,e,o,u){const c=u.samples||o;if(c>=e)return i.slice(n,n+e);const h=[],p=(e-2)/(c-2);let g=0;const y=n+e-1;let I,A,M,k,N,_=n;for(h[g++]=i[_],I=0;I<c-2;I++){let H,F=0,V=0;const X=Math.floor((I+1)*p)+1+n,K=Math.min(Math.floor((I+2)*p)+1,e)+n,z=K-X;for(H=X;H<K;H++)F+=i[H].x,V+=i[H].y;F/=z,V/=z;const et=Math.floor(I*p)+1+n,ot=Math.min(Math.floor((I+1)*p)+1,e)+n,{x:ft,y:dt}=i[_];for(M=k=-1,H=et;H<ot;H++)k=.5*Math.abs((ft-F)*(i[H].y-dt)-(ft-i[H].x)*(V-dt)),k>M&&(M=k,A=i[H],N=H);h[g++]=A,_=N}return h[g++]=i[y],h}(y,I,A,o,e);break;case"min-max":k=function(i,n,e,o){let h,p,g,y,_,I,A,M,k,N,u=0,c=0;const F=[],H=i[n].x,K=i[n+e-1].x-H;for(h=n;h<n+e;++h){p=i[h],g=(p.x-H)/K*o,y=p.y;const z=0|g;if(z===_)y<k?(k=y,I=h):y>N&&(N=y,A=h),u=(c*u+p.x)/++c;else{const et=h-1;if(!xt(I)&&!xt(A)){const ot=Math.min(I,A),ft=Math.max(I,A);ot!==M&&ot!==et&&F.push(Wl(Hl({},i[ot]),{x:u})),ft!==M&&ft!==et&&F.push(Wl(Hl({},i[ft]),{x:u}))}h>0&&et!==M&&F.push(i[et]),F.push(p),_=z,c=0,k=N=y,I=A=M=h}}return F}(y,I,A,o);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}u._decimated=k}})},destroy(i){R(i)}};function ut(i,n,e,o){if(o)return;let u=n[i],c=e[i];return"angle"===i&&(u=Ge(u),c=Ge(c)),{property:i,start:u,end:c}}function bt(i,n,e){for(;n>i;n--){const o=e[n];if(!isNaN(o.x)&&!isNaN(o.y))break}return n}function Dt(i,n,e,o){return i&&n?o(i[e],n[e]):i?i[e]:n?n[e]:0}function qt(i,n){let e=[],o=!1;return It(i)?(o=!0,e=i):e=function(i,n){const{x:e=null,y:o=null}=i||{},u=n.points,c=[];return n.segments.forEach(({start:h,end:p})=>{p=bt(h,p,u);const g=u[h],y=u[p];null!==o?(c.push({x:g.x,y:o}),c.push({x:y.x,y:o})):null!==e&&(c.push({x:e,y:g.y}),c.push({x:e,y:y.y}))}),c}(i,n),e.length?new Vs({points:e,options:{tension:0},_loop:o,_fullLoop:o}):null}function Jt(i){return i&&!1!==i.fill}function pi(i,n,e){let u=i[n].fill;const c=[n];let h;if(!e)return u;for(;!1!==u&&-1===c.indexOf(u);){if(!Yt(u))return u;if(h=i[u],!h)return!1;if(h.visible)return u;c.push(u),u=h.fill}return!1}function Vi(i,n,e){const o=function(i){const n=i.options,e=n.fill;let o=_t(e&&e.target,e);return void 0===o&&(o=!!n.backgroundColor),!1!==o&&null!==o&&(!0===o?"origin":o)}(i);if(St(o))return!isNaN(o.value)&&o;let u=parseFloat(o);return Yt(u)&&Math.floor(u)===u?function(i,n,e,o){return("-"===i||"+"===i)&&(e=n+e),!(e===n||e<0||e>=o)&&e}(o[0],n,u,e):["origin","start","end","stack","shape"].indexOf(o)>=0&&o}function _l(i,n,e){const o=[];for(let u=0;u<e.length;u++){const c=e[u],{first:h,last:p,point:g}=Xn(c,n,"x");if(!(!g||h&&p))if(h)o.unshift(g);else if(i.push(g),!p)break}i.push(...o)}function Xn(i,n,e){const o=i.interpolate(n,e);if(!o)return{};const u=o[e],c=i.segments,h=i.points;let p=!1,g=!1;for(let y=0;y<c.length;y++){const _=c[y],I=h[_.start][e],A=h[_.end][e];if(Oe(u,I,A)){p=u===I,g=u===A;break}}return{first:p,last:g,point:o}}class Ui{constructor(n){this.x=n.x,this.y=n.y,this.radius=n.radius}pathSegment(n,e,o){const{x:u,y:c,radius:h}=this;return n.arc(u,c,h,(e=e||{start:0,end:Ot}).end,e.start,!0),!o.bounds}interpolate(n){const{x:e,y:o,radius:u}=this,c=n.angle;return{x:e+Math.cos(c)*u,y:o+Math.sin(c)*u,angle:c}}}function wl(i,n,e){const o=function(i){const{chart:n,fill:e,line:o}=i;if(Yt(e))return function(i,n){const e=i.getDatasetMeta(n);return e&&i.isDatasetVisible(n)?e.dataset:null}(n,e);if("stack"===e)return function(i){const{scale:n,index:e,line:o}=i,u=[],c=o.segments,h=o.points,p=function(i,n){const e=[],o=i.getMatchingVisibleMetas("line");for(let u=0;u<o.length;u++){const c=o[u];if(c.index===n)break;c.hidden||e.unshift(c.dataset)}return e}(n,e);p.push(qt({x:null,y:n.bottom},o));for(let g=0;g<c.length;g++){const y=c[g];for(let _=y.start;_<=y.end;_++)_l(u,h[_],p)}return new Vs({points:u,options:{}})}(i);if("shape"===e)return!0;const u=function(i){return(i.scale||{}).getPointPositionForValue?function(i){const{scale:n,fill:e}=i,o=n.options,u=n.getLabels().length,c=o.reverse?n.max:n.min,h=function(i,n,e){let o;return o="start"===i?e:"end"===i?n.options.reverse?n.min:n.max:St(i)?i.value:n.getBaseValue(),o}(e,n,c),p=[];if(o.grid.circular){const g=n.getPointPositionForValue(0,c);return new Ui({x:g.x,y:g.y,radius:n.getDistanceFromCenterForValue(h)})}for(let g=0;g<u;++g)p.push(n.getPointPositionForValue(g,h));return p}(i):function(i){const{scale:n={},fill:e}=i,o=function(i,n){let e=null;return"start"===i?e=n.bottom:"end"===i?e=n.top:St(i)?e=n.getPixelForValue(i.value):n.getBasePixel&&(e=n.getBasePixel()),e}(e,n);if(Yt(o)){const u=n.isHorizontal();return{x:u?o:null,y:u?null:o}}return null}(i)}(i);return u instanceof Ui?u:qt(u,o)}(n),{line:u,scale:c,axis:h}=n,p=u.options,g=p.fill,y=p.backgroundColor,{above:_=y,below:I=y}=g||{};o&&u.points.length&&(Mi(i,e),function(i,n){const{line:e,target:o,above:u,below:c,area:h,scale:p}=n,g=e._loop?"angle":n.axis;i.save(),"x"===g&&c!==u&&(Gl(i,o,h.top),Yl(i,{line:e,target:o,color:u,scale:p,property:g}),i.restore(),i.save(),Gl(i,o,h.bottom)),Yl(i,{line:e,target:o,color:c,scale:p,property:g}),i.restore()}(i,{line:u,target:o,above:_,below:I,area:e,scale:c,axis:h}),Gr(i))}function Gl(i,n,e){const{segments:o,points:u}=n;let c=!0,h=!1;i.beginPath();for(const p of o){const{start:g,end:y}=p,_=u[g],I=u[bt(g,y,u)];c?(i.moveTo(_.x,_.y),c=!1):(i.lineTo(_.x,e),i.lineTo(_.x,_.y)),h=!!n.pathSegment(i,p,{move:h}),h?i.closePath():i.lineTo(I.x,e)}i.lineTo(n.first().x,e),i.closePath(),i.clip()}function Yl(i,n){const{line:e,target:o,property:u,color:c,scale:h}=n,p=function(i,n,e){const o=i.segments,u=i.points,c=n.points,h=[];for(const p of o){let{start:g,end:y}=p;y=bt(g,y,u);const _=ut(e,u[g],u[y],p.loop);if(!n.segments){h.push({source:p,target:_,start:u[g],end:u[y]});continue}const I=bu(n,_);for(const A of I){const M=ut(e,c[A.start],c[A.end],A.loop),k=vu(p,u,M);for(const N of k)h.push({source:N,target:A,start:{[e]:Dt(_,M,"start",Math.max)},end:{[e]:Dt(_,M,"end",Math.min)}})}}return h}(e,o,u);for(const{source:g,target:y,start:_,end:I}of p){const{style:{backgroundColor:A=c}={}}=g,M=!0!==o;i.save(),i.fillStyle=A,Qh(i,h,M&&ut(u,_,I)),i.beginPath();const k=!!e.pathSegment(i,g);let N;if(M){k?i.closePath():$l(i,o,I,u);const F=!!o.pathSegment(i,y,{move:k,reverse:!0});N=k&&F,N||$l(i,o,_,u)}i.closePath(),i.fill(N?"evenodd":"nonzero"),i.restore()}}function Qh(i,n,e){const{top:o,bottom:u}=n.chart.chartArea,{property:c,start:h,end:p}=e||{};"x"===c&&(i.beginPath(),i.rect(h,o,p-h,u-o),i.clip())}function $l(i,n,e,o){const u=n.interpolate(e,o);u&&i.lineTo(u.x,u.y)}var Jh={id:"filler",afterDatasetsUpdate(i,n,e){const o=(i.data.datasets||[]).length,u=[];let c,h,p,g;for(h=0;h<o;++h)c=i.getDatasetMeta(h),p=c.dataset,g=null,p&&p.options&&p instanceof Vs&&(g={visible:i.isDatasetVisible(h),index:h,fill:Vi(p,h,o),chart:i,axis:c.controller.options.indexAxis,scale:c.vScale,line:p}),c.$filler=g,u.push(g);for(h=0;h<o;++h)g=u[h],g&&!1!==g.fill&&(g.fill=pi(u,h,e.propagate))},beforeDraw(i,n,e){const o="beforeDraw"===e.drawTime,u=i.getSortedVisibleDatasetMetas(),c=i.chartArea;for(let h=u.length-1;h>=0;--h){const p=u[h].$filler;!p||(p.line.updateControlPoints(c,p.axis),o&&p.fill&&wl(i.ctx,p,c))}},beforeDatasetsDraw(i,n,e){if("beforeDatasetsDraw"!==e.drawTime)return;const o=i.getSortedVisibleDatasetMetas();for(let u=o.length-1;u>=0;--u){const c=o[u].$filler;Jt(c)&&wl(i.ctx,c,i.chartArea)}},beforeDatasetDraw(i,n,e){const o=n.meta.$filler;!Jt(o)||"beforeDatasetDraw"!==e.drawTime||wl(i.ctx,o,i.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Kl=(i,n)=>{let{boxHeight:e=n,boxWidth:o=n}=i;return i.usePointStyle&&(e=Math.min(e,n),o=i.pointStyleWidth||Math.min(o,n)),{boxWidth:o,boxHeight:e,itemHeight:Math.max(n,e)}};class Xl extends $n{constructor(n){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=n.chart,this.options=n.options,this.ctx=n.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(n,e,o){this.maxWidth=n,this.maxHeight=e,this._margins=o,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const n=this.options.labels||{};let e=Bt(n.generateLabels,[this.chart],this)||[];n.filter&&(e=e.filter(o=>n.filter(o,this.chart.data))),n.sort&&(e=e.sort((o,u)=>n.sort(o,u,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:n,ctx:e}=this;if(!n.display)return void(this.width=this.height=0);const o=n.labels,u=Xt(o.font),c=u.size,h=this._computeTitleHeight(),{boxWidth:p,itemHeight:g}=Kl(o,c);let y,_;e.font=u.string,this.isHorizontal()?(y=this.maxWidth,_=this._fitRows(h,c,p,g)+10):(_=this.maxHeight,y=this._fitCols(h,c,p,g)+10),this.width=Math.min(y,n.maxWidth||this.maxWidth),this.height=Math.min(_,n.maxHeight||this.maxHeight)}_fitRows(n,e,o,u){const{ctx:c,maxWidth:h,options:{labels:{padding:p}}}=this,g=this.legendHitBoxes=[],y=this.lineWidths=[0],_=u+p;let I=n;c.textAlign="left",c.textBaseline="middle";let A=-1,M=-_;return this.legendItems.forEach((k,N)=>{const F=o+e/2+c.measureText(k.text).width;(0===N||y[y.length-1]+F+2*p>h)&&(I+=_,y[y.length-(N>0?0:1)]=0,M+=_,A++),g[N]={left:0,top:M,row:A,width:F,height:u},y[y.length-1]+=F+p}),I}_fitCols(n,e,o,u){const{ctx:c,maxHeight:h,options:{labels:{padding:p}}}=this,g=this.legendHitBoxes=[],y=this.columnSizes=[],_=h-n;let I=p,A=0,M=0,k=0,N=0;return this.legendItems.forEach((F,V)=>{const H=o+e/2+c.measureText(F.text).width;V>0&&M+u+2*p>_&&(I+=A+p,y.push({width:A,height:M}),k+=A+p,N++,A=M=0),g[V]={left:k,top:M,col:N,width:H,height:u},A=Math.max(A,H),M+=u+p}),I+=A,y.push({width:A,height:M}),I}adjustHitBoxes(){if(!this.options.display)return;const n=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:o,labels:{padding:u},rtl:c}}=this,h=Ss(c,this.left,this.width);if(this.isHorizontal()){let p=0,g=be(o,this.left+u,this.right-this.lineWidths[p]);for(const y of e)p!==y.row&&(p=y.row,g=be(o,this.left+u,this.right-this.lineWidths[p])),y.top+=this.top+n+u,y.left=h.leftForLtr(h.x(g),y.width),g+=y.width+u}else{let p=0,g=be(o,this.top+n+u,this.bottom-this.columnSizes[p].height);for(const y of e)y.col!==p&&(p=y.col,g=be(o,this.top+n+u,this.bottom-this.columnSizes[p].height)),y.top=g,y.left+=this.left+u,y.left=h.leftForLtr(h.x(y.left),y.width),g+=y.height+u}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const n=this.ctx;Mi(n,this),this._draw(),Gr(n)}}_draw(){const{options:n,columnSizes:e,lineWidths:o,ctx:u}=this,{align:c,labels:h}=n,p=Et.color,g=Ss(n.rtl,this.left,this.width),y=Xt(h.font),{color:_,padding:I}=h,A=y.size,M=A/2;let k;this.drawTitle(),u.textAlign=g.textAlign("left"),u.textBaseline="middle",u.lineWidth=.5,u.font=y.string;const{boxWidth:N,boxHeight:F,itemHeight:V}=Kl(h,A),K=this.isHorizontal(),z=this._computeTitleHeight();k=K?{x:be(c,this.left+I,this.right-o[0]),y:this.top+I+z,line:0}:{x:this.left+I,y:be(c,this.top+z+I,this.bottom-e[0].height),line:0},Ea(this.ctx,n.textDirection);const et=V+I;this.legendItems.forEach((ot,ft)=>{u.strokeStyle=ot.fontColor||_,u.fillStyle=ot.fontColor||_;const dt=u.measureText(ot.text).width,Ut=g.textAlign(ot.textAlign||(ot.textAlign=h.textAlign)),Ht=N+M+dt;let jt=k.x,ke=k.y;g.setWidth(this.width),K?ft>0&&jt+Ht+I>this.right&&(ke=k.y+=et,k.line++,jt=k.x=be(c,this.left+I,this.right-o[k.line])):ft>0&&ke+et>this.bottom&&(jt=k.x=jt+e[k.line].width+I,k.line++,ke=k.y=be(c,this.top+z+I,this.bottom-e[k.line].height)),function(ot,ft,dt){if(isNaN(N)||N<=0||isNaN(F)||F<0)return;u.save();const Ut=_t(dt.lineWidth,1);if(u.fillStyle=_t(dt.fillStyle,p),u.lineCap=_t(dt.lineCap,"butt"),u.lineDashOffset=_t(dt.lineDashOffset,0),u.lineJoin=_t(dt.lineJoin,"miter"),u.lineWidth=Ut,u.strokeStyle=_t(dt.strokeStyle,p),u.setLineDash(_t(dt.lineDash,[])),h.usePointStyle){const Ht={radius:F*Math.SQRT2/2,pointStyle:dt.pointStyle,rotation:dt.rotation,borderWidth:Ut},jt=g.xPlus(ot,N/2);qr(u,Ht,jt,ft+M,h.pointStyleWidth&&N)}else{const Ht=ft+Math.max((A-F)/2,0),jt=g.leftForLtr(ot,N),ke=ci(dt.borderRadius);u.beginPath(),Object.values(ke).some(_n=>0!==_n)?mn(u,{x:jt,y:Ht,w:N,h:F,radius:ke}):u.rect(jt,Ht,N,F),u.fill(),0!==Ut&&u.stroke()}u.restore()}(g.x(jt),ke,ot),jt=((i,n,e,o)=>i===(o?"left":"right")?e:"center"===i?(n+e)/2:n)(Ut,jt+N+M,K?jt+Ht:this.right,n.rtl),function(ot,ft,dt){gn(u,dt.text,ot,ft+V/2,y,{strikethrough:dt.hidden,textAlign:g.textAlign(dt.textAlign)})}(g.x(jt),ke,ot),K?k.x+=Ht+I:k.y+=et}),Sa(this.ctx,n.textDirection)}drawTitle(){const n=this.options,e=n.title,o=Xt(e.font),u=se(e.padding);if(!e.display)return;const c=Ss(n.rtl,this.left,this.width),h=this.ctx,p=e.position,y=u.top+o.size/2;let _,I=this.left,A=this.width;if(this.isHorizontal())A=Math.max(...this.lineWidths),_=this.top+y,I=be(n.align,I,this.right-A);else{const k=this.columnSizes.reduce((N,F)=>Math.max(N,F.height),0);_=y+be(n.align,this.top,this.bottom-k-n.labels.padding-this._computeTitleHeight())}const M=be(p,I,I+A);h.textAlign=c.textAlign(Tn(p)),h.textBaseline="middle",h.strokeStyle=e.color,h.fillStyle=e.color,h.font=o.string,gn(h,e.text,M,_,o)}_computeTitleHeight(){const n=this.options.title,e=Xt(n.font),o=se(n.padding);return n.display?e.lineHeight+o.height:0}_getLegendItemAt(n,e){let o,u,c;if(Oe(n,this.left,this.right)&&Oe(e,this.top,this.bottom))for(c=this.legendHitBoxes,o=0;o<c.length;++o)if(u=c[o],Oe(n,u.left,u.left+u.width)&&Oe(e,u.top,u.top+u.height))return this.legendItems[o];return null}handleEvent(n){const e=this.options;if(!function(i,n){return!(("mousemove"!==i&&"mouseout"!==i||!n.onHover&&!n.onLeave)&&(!n.onClick||"click"!==i&&"mouseup"!==i))}(n.type,e))return;const o=this._getLegendItemAt(n.x,n.y);if("mousemove"===n.type||"mouseout"===n.type){const u=this._hoveredItem,c=((i,n)=>null!==i&&null!==n&&i.datasetIndex===n.datasetIndex&&i.index===n.index)(u,o);u&&!c&&Bt(e.onLeave,[n,u,this],this),this._hoveredItem=o,o&&!c&&Bt(e.onHover,[n,o,this],this)}else o&&Bt(e.onClick,[n,o,this],this)}}var nf={id:"legend",_element:Xl,start(i,n,e){const o=i.legend=new Xl({ctx:i.ctx,options:e,chart:i});He.configure(i,o,e),He.addBox(i,o)},stop(i){He.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,n,e){const o=i.legend;He.configure(i,o,e),o.options=e},afterUpdate(i){const n=i.legend;n.buildLabels(),n.adjustHitBoxes()},afterEvent(i,n){n.replay||i.legend.handleEvent(n.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,n,e){const o=n.datasetIndex,u=e.chart;u.isDatasetVisible(o)?(u.hide(o),n.hidden=!0):(u.show(o),n.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){const n=i.data.datasets,{labels:{usePointStyle:e,pointStyle:o,textAlign:u,color:c}}=i.legend.options;return i._getSortedDatasetMetas().map(h=>{const p=h.controller.getStyle(e?0:void 0),g=se(p.borderWidth);return{text:n[h.index].label,fillStyle:p.backgroundColor,fontColor:c,hidden:!h.visible,lineCap:p.borderCapStyle,lineDash:p.borderDash,lineDashOffset:p.borderDashOffset,lineJoin:p.borderJoinStyle,lineWidth:(g.width+g.height)/4,strokeStyle:p.borderColor,pointStyle:o||p.pointStyle,rotation:p.rotation,textAlign:u||p.textAlign,borderRadius:0,datasetIndex:h.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}};class xl extends $n{constructor(n){super(),this.chart=n.chart,this.options=n.options,this.ctx=n.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(n,e){const o=this.options;if(this.left=0,this.top=0,!o.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=n,this.height=this.bottom=e;const u=It(o.text)?o.text.length:1;this._padding=se(o.padding);const c=u*Xt(o.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=c:this.width=c}isHorizontal(){const n=this.options.position;return"top"===n||"bottom"===n}_drawArgs(n){const{top:e,left:o,bottom:u,right:c,options:h}=this,p=h.align;let y,_,I,g=0;return this.isHorizontal()?(_=be(p,o,c),I=e+n,y=c-o):("left"===h.position?(_=o+n,I=be(p,u,e),g=-.5*Pt):(_=c-n,I=be(p,e,u),g=.5*Pt),y=u-e),{titleX:_,titleY:I,maxWidth:y,rotation:g}}draw(){const n=this.ctx,e=this.options;if(!e.display)return;const o=Xt(e.font),c=o.lineHeight/2+this._padding.top,{titleX:h,titleY:p,maxWidth:g,rotation:y}=this._drawArgs(c);gn(n,e.text,0,0,o,{color:e.color,maxWidth:g,rotation:y,textAlign:Tn(e.align),textBaseline:"middle",translation:[h,p]})}}var sf={id:"title",_element:xl,start(i,n,e){!function(i,n){const e=new xl({ctx:i.ctx,options:n,chart:i});He.configure(i,e,n),He.addBox(i,e),i.titleBlock=e}(i,e)},stop(i){He.removeBox(i,i.titleBlock),delete i.titleBlock},beforeUpdate(i,n,e){const o=i.titleBlock;He.configure(i,o,e),o.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const oc=new WeakMap;var of={id:"subtitle",start(i,n,e){const o=new xl({ctx:i.ctx,options:e,chart:i});He.configure(i,o,e),He.addBox(i,o),oc.set(i,o)},stop(i){He.removeBox(i,oc.get(i)),oc.delete(i)},beforeUpdate(i,n,e){const o=oc.get(i);He.configure(i,o,e),o.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const nu={average(i){if(!i.length)return!1;let n,e,o=0,u=0,c=0;for(n=0,e=i.length;n<e;++n){const h=i[n].element;if(h&&h.hasValue()){const p=h.tooltipPosition();o+=p.x,u+=p.y,++c}}return{x:o/c,y:u/c}},nearest(i,n){if(!i.length)return!1;let c,h,p,e=n.x,o=n.y,u=Number.POSITIVE_INFINITY;for(c=0,h=i.length;c<h;++c){const g=i[c].element;if(g&&g.hasValue()){const _=xi(n,g.getCenterPoint());_<u&&(u=_,p=g)}}if(p){const g=p.tooltipPosition();e=g.x,o=g.y}return{x:e,y:o}}};function _r(i,n){return n&&(It(n)?Array.prototype.push.apply(i,n):i.push(n)),i}function cs(i){return("string"==typeof i||i instanceof String)&&i.indexOf("\n")>-1?i.split("\n"):i}function af(i,n){const{element:e,datasetIndex:o,index:u}=n,c=i.getDatasetMeta(o).controller,{label:h,value:p}=c.getLabelAndValue(u);return{chart:i,label:h,parsed:c.getParsed(u),raw:i.data.datasets[o].data[u],formattedValue:p,dataset:c.getDataset(),dataIndex:u,datasetIndex:o,element:e}}function Zl(i,n){const e=i.chart.ctx,{body:o,footer:u,title:c}=i,{boxWidth:h,boxHeight:p}=n,g=Xt(n.bodyFont),y=Xt(n.titleFont),_=Xt(n.footerFont),I=c.length,A=u.length,M=o.length,k=se(n.padding);let N=k.height,F=0,V=o.reduce((K,z)=>K+z.before.length+z.lines.length+z.after.length,0);V+=i.beforeBody.length+i.afterBody.length,I&&(N+=I*y.lineHeight+(I-1)*n.titleSpacing+n.titleMarginBottom),V&&(N+=M*(n.displayColors?Math.max(p,g.lineHeight):g.lineHeight)+(V-M)*g.lineHeight+(V-1)*n.bodySpacing),A&&(N+=n.footerMarginTop+A*_.lineHeight+(A-1)*n.footerSpacing);let H=0;const X=function(K){F=Math.max(F,e.measureText(K).width+H)};return e.save(),e.font=y.string,Rt(i.title,X),e.font=g.string,Rt(i.beforeBody.concat(i.afterBody),X),H=n.displayColors?h+2+n.boxPadding:0,Rt(o,K=>{Rt(K.before,X),Rt(K.lines,X),Rt(K.after,X)}),H=0,e.font=_.string,Rt(i.footer,X),e.restore(),F+=k.width,{width:F,height:N}}function lf(i,n,e,o){const{x:u,width:c}=e,{width:h,chartArea:{left:p,right:g}}=i;let y="center";return"center"===o?y=u<=(p+g)/2?"left":"right":u<=c/2?y="left":u>=h-c/2&&(y="right"),function(i,n,e,o){const{x:u,width:c}=o,h=e.caretSize+e.caretPadding;if("left"===i&&u+c+h>n.width||"right"===i&&u-c-h<0)return!0}(y,i,n,e)&&(y="center"),y}function Ql(i,n,e){const o=e.yAlign||n.yAlign||function(i,n){const{y:e,height:o}=n;return e<o/2?"top":e>i.height-o/2?"bottom":"center"}(i,e);return{xAlign:e.xAlign||n.xAlign||lf(i,n,e,o),yAlign:o}}function Jl(i,n,e,o){const{caretSize:u,caretPadding:c,cornerRadius:h}=i,{xAlign:p,yAlign:g}=e,y=u+c,{topLeft:_,topRight:I,bottomLeft:A,bottomRight:M}=ci(h);let k=function(i,n){let{x:e,width:o}=i;return"right"===n?e-=o:"center"===n&&(e-=o/2),e}(n,p);const N=function(i,n,e){let{y:o,height:u}=i;return"top"===n?o+=e:o-="bottom"===n?u+e:u/2,o}(n,g,y);return"center"===g?"left"===p?k+=y:"right"===p&&(k-=y):"left"===p?k-=Math.max(_,A)+u:"right"===p&&(k+=Math.max(I,M)+u),{x:ie(k,0,o.width-n.width),y:ie(N,0,o.height-n.height)}}function ac(i,n,e){const o=se(e.padding);return"center"===n?i.x+i.width/2:"right"===n?i.x+i.width-o.right:i.x+o.left}function th(i){return _r([],cs(i))}function eh(i,n){const e=n&&n.dataset&&n.dataset.tooltip&&n.dataset.tooltip.callbacks;return e?i.override(e):i}let nh=(()=>{class i extends $n{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart||e._chart,this._chart=this.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const o=this.chart,u=this.options.setContext(this.getContext()),c=u.enabled&&o.options.animation&&u.animations,h=new Yn(this.chart,c);return c._cacheable&&(this._cachedAnimations=Object.freeze(h)),h}getContext(){return this.$context||(this.$context=function(i,n,e){return Be(i,{tooltip:n,tooltipItems:e,type:"tooltip"})}(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,o){const{callbacks:u}=o,c=u.beforeTitle.apply(this,[e]),h=u.title.apply(this,[e]),p=u.afterTitle.apply(this,[e]);let g=[];return g=_r(g,cs(c)),g=_r(g,cs(h)),g=_r(g,cs(p)),g}getBeforeBody(e,o){return th(o.callbacks.beforeBody.apply(this,[e]))}getBody(e,o){const{callbacks:u}=o,c=[];return Rt(e,h=>{const p={before:[],lines:[],after:[]},g=eh(u,h);_r(p.before,cs(g.beforeLabel.call(this,h))),_r(p.lines,g.label.call(this,h)),_r(p.after,cs(g.afterLabel.call(this,h))),c.push(p)}),c}getAfterBody(e,o){return th(o.callbacks.afterBody.apply(this,[e]))}getFooter(e,o){const{callbacks:u}=o,c=u.beforeFooter.apply(this,[e]),h=u.footer.apply(this,[e]),p=u.afterFooter.apply(this,[e]);let g=[];return g=_r(g,cs(c)),g=_r(g,cs(h)),g=_r(g,cs(p)),g}_createItems(e){const o=this._active,u=this.chart.data,c=[],h=[],p=[];let y,_,g=[];for(y=0,_=o.length;y<_;++y)g.push(af(this.chart,o[y]));return e.filter&&(g=g.filter((I,A,M)=>e.filter(I,A,M,u))),e.itemSort&&(g=g.sort((I,A)=>e.itemSort(I,A,u))),Rt(g,I=>{const A=eh(e.callbacks,I);c.push(A.labelColor.call(this,I)),h.push(A.labelPointStyle.call(this,I)),p.push(A.labelTextColor.call(this,I))}),this.labelColors=c,this.labelPointStyles=h,this.labelTextColors=p,this.dataPoints=g,g}update(e,o){const u=this.options.setContext(this.getContext()),c=this._active;let h,p=[];if(c.length){const g=nu[u.position].call(this,c,this._eventPosition);p=this._createItems(u),this.title=this.getTitle(p,u),this.beforeBody=this.getBeforeBody(p,u),this.body=this.getBody(p,u),this.afterBody=this.getAfterBody(p,u),this.footer=this.getFooter(p,u);const y=this._size=Zl(this,u),_=Object.assign({},g,y),I=Ql(this.chart,u,_),A=Jl(u,_,I,this.chart);this.xAlign=I.xAlign,this.yAlign=I.yAlign,h={opacity:1,x:A.x,y:A.y,width:y.width,height:y.height,caretX:g.x,caretY:g.y}}else 0!==this.opacity&&(h={opacity:0});this._tooltipItems=p,this.$context=void 0,h&&this._resolveAnimations().update(this,h),e&&u.external&&u.external.call(this,{chart:this.chart,tooltip:this,replay:o})}drawCaret(e,o,u,c){const h=this.getCaretPosition(e,u,c);o.lineTo(h.x1,h.y1),o.lineTo(h.x2,h.y2),o.lineTo(h.x3,h.y3)}getCaretPosition(e,o,u){const{xAlign:c,yAlign:h}=this,{caretSize:p,cornerRadius:g}=u,{topLeft:y,topRight:_,bottomLeft:I,bottomRight:A}=ci(g),{x:M,y:k}=e,{width:N,height:F}=o;let V,H,X,K,z,et;return"center"===h?(z=k+F/2,"left"===c?(V=M,H=V-p,K=z+p,et=z-p):(V=M+N,H=V+p,K=z-p,et=z+p),X=V):(H="left"===c?M+Math.max(y,I)+p:"right"===c?M+N-Math.max(_,A)-p:this.caretX,"top"===h?(K=k,z=K-p,V=H-p,X=H+p):(K=k+F,z=K+p,V=H+p,X=H-p),et=K),{x1:V,x2:H,x3:X,y1:K,y2:z,y3:et}}drawTitle(e,o,u){const c=this.title,h=c.length;let p,g,y;if(h){const _=Ss(u.rtl,this.x,this.width);for(e.x=ac(this,u.titleAlign,u),o.textAlign=_.textAlign(u.titleAlign),o.textBaseline="middle",p=Xt(u.titleFont),g=u.titleSpacing,o.fillStyle=u.titleColor,o.font=p.string,y=0;y<h;++y)o.fillText(c[y],_.x(e.x),e.y+p.lineHeight/2),e.y+=p.lineHeight+g,y+1===h&&(e.y+=u.titleMarginBottom-g)}}_drawColorBox(e,o,u,c,h){const p=this.labelColors[u],g=this.labelPointStyles[u],{boxHeight:y,boxWidth:_,boxPadding:I}=h,A=Xt(h.bodyFont),M=ac(this,"left",h),k=c.x(M),F=o.y+(y<A.lineHeight?(A.lineHeight-y)/2:0);if(h.usePointStyle){const V={radius:Math.min(_,y)/2,pointStyle:g.pointStyle,rotation:g.rotation,borderWidth:1},H=c.leftForLtr(k,_)+_/2,X=F+y/2;e.strokeStyle=h.multiKeyBackground,e.fillStyle=h.multiKeyBackground,Wr(e,V,H,X),e.strokeStyle=p.borderColor,e.fillStyle=p.backgroundColor,Wr(e,V,H,X)}else{e.lineWidth=St(p.borderWidth)?Math.max(...Object.values(p.borderWidth)):p.borderWidth||1,e.strokeStyle=p.borderColor,e.setLineDash(p.borderDash||[]),e.lineDashOffset=p.borderDashOffset||0;const V=c.leftForLtr(k,_-I),H=c.leftForLtr(c.xPlus(k,1),_-I-2),X=ci(p.borderRadius);Object.values(X).some(K=>0!==K)?(e.beginPath(),e.fillStyle=h.multiKeyBackground,mn(e,{x:V,y:F,w:_,h:y,radius:X}),e.fill(),e.stroke(),e.fillStyle=p.backgroundColor,e.beginPath(),mn(e,{x:H,y:F+1,w:_-2,h:y-2,radius:X}),e.fill()):(e.fillStyle=h.multiKeyBackground,e.fillRect(V,F,_,y),e.strokeRect(V,F,_,y),e.fillStyle=p.backgroundColor,e.fillRect(H,F+1,_-2,y-2))}e.fillStyle=this.labelTextColors[u]}drawBody(e,o,u){const{body:c}=this,{bodySpacing:h,bodyAlign:p,displayColors:g,boxHeight:y,boxWidth:_,boxPadding:I}=u,A=Xt(u.bodyFont);let M=A.lineHeight,k=0;const N=Ss(u.rtl,this.x,this.width),F=function(dt){o.fillText(dt,N.x(e.x+k),e.y+M/2),e.y+=M+h},V=N.textAlign(p);let H,X,K,z,et,ot,ft;for(o.textAlign=p,o.textBaseline="middle",o.font=A.string,e.x=ac(this,V,u),o.fillStyle=u.bodyColor,Rt(this.beforeBody,F),k=g&&"right"!==V?"center"===p?_/2+I:_+2+I:0,z=0,ot=c.length;z<ot;++z){for(H=c[z],X=this.labelTextColors[z],o.fillStyle=X,Rt(H.before,F),K=H.lines,g&&K.length&&(this._drawColorBox(o,e,z,N,u),M=Math.max(A.lineHeight,y)),et=0,ft=K.length;et<ft;++et)F(K[et]),M=A.lineHeight;Rt(H.after,F)}k=0,M=A.lineHeight,Rt(this.afterBody,F),e.y-=h}drawFooter(e,o,u){const c=this.footer,h=c.length;let p,g;if(h){const y=Ss(u.rtl,this.x,this.width);for(e.x=ac(this,u.footerAlign,u),e.y+=u.footerMarginTop,o.textAlign=y.textAlign(u.footerAlign),o.textBaseline="middle",p=Xt(u.footerFont),o.fillStyle=u.footerColor,o.font=p.string,g=0;g<h;++g)o.fillText(c[g],y.x(e.x),e.y+p.lineHeight/2),e.y+=p.lineHeight+u.footerSpacing}}drawBackground(e,o,u,c){const{xAlign:h,yAlign:p}=this,{x:g,y}=e,{width:_,height:I}=u,{topLeft:A,topRight:M,bottomLeft:k,bottomRight:N}=ci(c.cornerRadius);o.fillStyle=c.backgroundColor,o.strokeStyle=c.borderColor,o.lineWidth=c.borderWidth,o.beginPath(),o.moveTo(g+A,y),"top"===p&&this.drawCaret(e,o,u,c),o.lineTo(g+_-M,y),o.quadraticCurveTo(g+_,y,g+_,y+M),"center"===p&&"right"===h&&this.drawCaret(e,o,u,c),o.lineTo(g+_,y+I-N),o.quadraticCurveTo(g+_,y+I,g+_-N,y+I),"bottom"===p&&this.drawCaret(e,o,u,c),o.lineTo(g+k,y+I),o.quadraticCurveTo(g,y+I,g,y+I-k),"center"===p&&"left"===h&&this.drawCaret(e,o,u,c),o.lineTo(g,y+A),o.quadraticCurveTo(g,y,g+A,y),o.closePath(),o.fill(),c.borderWidth>0&&o.stroke()}_updateAnimationTarget(e){const o=this.chart,u=this.$animations,c=u&&u.x,h=u&&u.y;if(c||h){const p=nu[e.position].call(this,this._active,this._eventPosition);if(!p)return;const g=this._size=Zl(this,e),y=Object.assign({},p,this._size),_=Ql(o,e,y),I=Jl(e,y,_,o);(c._to!==I.x||h._to!==I.y)&&(this.xAlign=_.xAlign,this.yAlign=_.yAlign,this.width=g.width,this.height=g.height,this.caretX=p.x,this.caretY=p.y,this._resolveAnimations().update(this,I))}}_willRender(){return!!this.opacity}draw(e){const o=this.options.setContext(this.getContext());let u=this.opacity;if(!u)return;this._updateAnimationTarget(o);const c={width:this.width,height:this.height},h={x:this.x,y:this.y};u=Math.abs(u)<.001?0:u;const p=se(o.padding);o.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(e.save(),e.globalAlpha=u,this.drawBackground(h,e,c,o),Ea(e,o.textDirection),h.y+=p.top,this.drawTitle(h,e,o),this.drawBody(h,e,o),this.drawFooter(h,e,o),Sa(e,o.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,o){const u=this._active,c=e.map(({datasetIndex:g,index:y})=>{const _=this.chart.getDatasetMeta(g);if(!_)throw new Error("Cannot find a dataset at index "+g);return{datasetIndex:g,element:_.data[y],index:y}}),h=!bi(u,c),p=this._positionChanged(c,o);(h||p)&&(this._active=c,this._eventPosition=o,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,o,u=!0){if(o&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const c=this.options,h=this._active||[],p=this._getActiveElements(e,h,o,u),g=this._positionChanged(p,e),y=o||!bi(p,h)||g;return y&&(this._active=p,(c.enabled||c.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,o))),y}_getActiveElements(e,o,u,c){const h=this.options;if("mouseout"===e.type)return[];if(!c)return o;const p=this.chart.getElementsAtEventForMode(e,h.mode,h,u);return h.reverse&&p.reverse(),p}_positionChanged(e,o){const{caretX:u,caretY:c,options:h}=this,p=nu[h.position].call(this,e,o);return!1!==p&&(u!==p.x||c!==p.y)}}return i.positioners=nu,i})();var pf={id:"tooltip",_element:nh,positioners:nu,afterInit(i,n,e){e&&(i.tooltip=new nh({chart:i,options:e}))},beforeUpdate(i,n,e){i.tooltip&&i.tooltip.initialize(e)},reset(i,n,e){i.tooltip&&i.tooltip.initialize(e)},afterDraw(i){const n=i.tooltip;if(n&&n._willRender()){const e={tooltip:n};if(!1===i.notifyPlugins("beforeTooltipDraw",e))return;n.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",e)}},afterEvent(i,n){i.tooltip&&i.tooltip.handleEvent(n.event,n.replay,n.inChartArea)&&(n.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,n)=>n.bodyFont.size,boxWidth:(i,n)=>n.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:Ze,title(i){if(i.length>0){const n=i[0],e=n.chart.data.labels,o=e?e.length:0;if(this&&this.options&&"dataset"===this.options.mode)return n.dataset.label||"";if(n.label)return n.label;if(o>0&&n.dataIndex<o)return e[n.dataIndex]}return""},afterTitle:Ze,beforeBody:Ze,beforeLabel:Ze,label(i){if(this&&this.options&&"dataset"===this.options.mode)return i.label+": "+i.formattedValue||i.formattedValue;let n=i.dataset.label||"";n&&(n+=": ");const e=i.formattedValue;return xt(e)||(n+=e),n},labelColor(i){const e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){const e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Ze,afterBody:Ze,beforeFooter:Ze,footer:Ze,afterFooter:Ze}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>"filter"!==i&&"itemSort"!==i&&"external"!==i,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},gf=Object.freeze({__proto__:null,Decimation:q,Filler:Jh,Legend:nf,SubTitle:of,Title:sf,Tooltip:pf});class uc extends Qr{constructor(n){super(n),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(n){const e=this._addedLabels;if(e.length){const o=this.getLabels();for(const{index:u,label:c}of e)o[u]===c&&o.splice(u,1);this._addedLabels=[]}super.init(n)}parse(n,e){if(xt(n))return null;const o=this.getLabels();return((i,n)=>null===i?null:ie(Math.round(i),0,n))(e=isFinite(e)&&o[e]===n?e:function(i,n,e,o){const u=i.indexOf(n);return-1===u?((i,n,e,o)=>("string"==typeof n?(e=i.push(n)-1,o.unshift({index:e,label:n})):isNaN(n)&&(e=null),e))(i,n,e,o):u!==i.lastIndexOf(n)?e:u}(o,n,_t(e,n),this._addedLabels),o.length-1)}determineDataLimits(){const{minDefined:n,maxDefined:e}=this.getUserBounds();let{min:o,max:u}=this.getMinMax(!0);"ticks"===this.options.bounds&&(n||(o=0),e||(u=this.getLabels().length-1)),this.min=o,this.max=u}buildTicks(){const n=this.min,e=this.max,o=this.options.offset,u=[];let c=this.getLabels();c=0===n&&e===c.length-1?c:c.slice(n,e+1),this._valueRange=Math.max(c.length-(o?0:1),1),this._startValue=this.min-(o?.5:0);for(let h=n;h<=e;h++)u.push({value:h});return u}getLabelForValue(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(n){return"number"!=typeof n&&(n=this.parse(n)),null===n?NaN:this.getPixelForDecimal((n-this._startValue)/this._valueRange)}getPixelForTick(n){const e=this.ticks;return n<0||n>e.length-1?null:this.getPixelForValue(e[n].value)}getValueForPixel(n){return Math.round(this._startValue+this.getDecimalForPixel(n)*this._valueRange)}getBasePixel(){return this.bottom}}function ih(i,n,{horizontal:e,minRotation:o}){const u=Pe(o),c=(e?Math.sin(u):Math.cos(u))||.001;return Math.min(n/c,.75*n*(""+i).length)}uc.id="category",uc.defaults={ticks:{callback:uc.prototype.getLabelForValue}};class cc extends Qr{constructor(n){super(n),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(n,e){return xt(n)||("number"==typeof n||n instanceof Number)&&!isFinite(+n)?null:+n}handleTickRangeOptions(){const{beginAtZero:n}=this.options,{minDefined:e,maxDefined:o}=this.getUserBounds();let{min:u,max:c}=this;const h=g=>u=e?u:g,p=g=>c=o?c:g;if(n){const g=qe(u),y=qe(c);g<0&&y<0?p(0):g>0&&y>0&&h(0)}if(u===c){let g=1;(c>=Number.MAX_SAFE_INTEGER||u<=Number.MIN_SAFE_INTEGER)&&(g=Math.abs(.05*c)),p(c+g),n||h(u-g)}this.min=u,this.max=c}getTickLimit(){const n=this.options.ticks;let u,{maxTicksLimit:e,stepSize:o}=n;return o?(u=Math.ceil(this.max/o)-Math.floor(this.min/o)+1,u>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${o} would result generating up to ${u} ticks. Limiting to 1000.`),u=1e3)):(u=this.computeTickLimit(),e=e||11),e&&(u=Math.min(e,u)),u}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const n=this.options,e=n.ticks;let o=this.getTickLimit();o=Math.max(2,o);const h=function(i,n){const e=[],{bounds:u,step:c,min:h,max:p,precision:g,count:y,maxTicks:_,maxDigits:I,includeBounds:A}=i,M=c||1,k=_-1,{min:N,max:F}=n,V=!xt(h),H=!xt(p),X=!xt(y),K=(F-N)/(I+1);let et,ot,ft,dt,z=ni((F-N)/k/M)*M;if(z<1e-14&&!V&&!H)return[{value:N},{value:F}];dt=Math.ceil(F/z)-Math.floor(N/z),dt>k&&(z=ni(dt*z/k/M)*M),xt(g)||(et=Math.pow(10,g),z=Math.ceil(z*et)/et),"ticks"===u?(ot=Math.floor(N/z)*z,ft=Math.ceil(F/z)*z):(ot=N,ft=F),V&&H&&c&&function(i,n){const e=Math.round(i);return e-n<=i&&e+n>=i}((p-h)/c,z/1e3)?(dt=Math.round(Math.min((p-h)/z,_)),z=(p-h)/dt,ot=h,ft=p):X?(ot=V?h:ot,ft=H?p:ft,dt=y-1,z=(ft-ot)/dt):(dt=(ft-ot)/z,dt=ii(dt,Math.round(dt),z/1e3)?Math.round(dt):Math.ceil(dt));const Ut=Math.max(Pr(z),Pr(ot));et=Math.pow(10,xt(g)?Ut:g),ot=Math.round(ot*et)/et,ft=Math.round(ft*et)/et;let Ht=0;for(V&&(A&&ot!==h?(e.push({value:h}),ot<h&&Ht++,ii(Math.round((ot+Ht*z)*et)/et,h,ih(h,K,i))&&Ht++):ot<h&&Ht++);Ht<dt;++Ht)e.push({value:Math.round((ot+Ht*z)*et)/et});return H&&A&&ft!==p?e.length&&ii(e[e.length-1].value,p,ih(p,K,i))?e[e.length-1].value=p:e.push({value:p}):(!H||ft===p)&&e.push({value:ft}),e}({maxTicks:o,bounds:n.bounds,min:n.min,max:n.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===n.bounds&&Xs(h,this,"value"),n.reverse?(h.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),h}configure(){const n=this.ticks;let e=this.min,o=this.max;if(super.configure(),this.options.offset&&n.length){const u=(o-e)/Math.max(n.length-1,1)/2;e-=u,o+=u}this._startValue=e,this._endValue=o,this._valueRange=o-e}getLabelForValue(n){return hi(n,this.chart.options.locale,this.options.ticks.format)}}class Il extends cc{determineDataLimits(){const{min:n,max:e}=this.getMinMax(!0);this.min=Yt(n)?n:0,this.max=Yt(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const n=this.isHorizontal(),e=n?this.width:this.height,o=Pe(this.options.ticks.minRotation),u=(n?Math.sin(o):Math.cos(o))||.001,c=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,c.lineHeight/u))}getPixelForValue(n){return null===n?NaN:this.getPixelForDecimal((n-this._startValue)/this._valueRange)}getValueForPixel(n){return this._startValue+this.getDecimalForPixel(n)*this._valueRange}}function rh(i){return i/Math.pow(10,Math.floor($t(i)))==1}Il.id="linear",Il.defaults={ticks:{callback:Ri.formatters.numeric}};class El extends Qr{constructor(n){super(n),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(n,e){const o=cc.prototype.parse.apply(this,[n,e]);if(0!==o)return Yt(o)&&o>0?o:null;this._zero=!0}determineDataLimits(){const{min:n,max:e}=this.getMinMax(!0);this.min=Yt(n)?Math.max(0,n):null,this.max=Yt(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:n,maxDefined:e}=this.getUserBounds();let o=this.min,u=this.max;const c=g=>o=n?o:g,h=g=>u=e?u:g,p=(g,y)=>Math.pow(10,Math.floor($t(g))+y);o===u&&(o<=0?(c(1),h(10)):(c(p(o,-1)),h(p(u,1)))),o<=0&&c(p(u,-1)),u<=0&&h(p(o,1)),this._zero&&this.min!==this._suggestedMin&&o===p(this.min,0)&&c(p(o,-1)),this.min=o,this.max=u}buildTicks(){const n=this.options,o=function(i,n){const e=Math.floor($t(n.max)),o=Math.ceil(n.max/Math.pow(10,e)),u=[];let c=We(i.min,Math.pow(10,Math.floor($t(n.min)))),h=Math.floor($t(c)),p=Math.floor(c/Math.pow(10,h)),g=h<0?Math.pow(10,Math.abs(h)):1;do{u.push({value:c,major:rh(c)}),++p,10===p&&(p=1,++h,g=h>=0?1:g),c=Math.round(p*Math.pow(10,h)*g)/g}while(h<e||h===e&&p<o);const y=We(i.max,c);return u.push({value:y,major:rh(c)}),u}({min:this._userMin,max:this._userMax},this);return"ticks"===n.bounds&&Xs(o,this,"value"),n.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}getLabelForValue(n){return void 0===n?"0":hi(n,this.chart.options.locale,this.options.ticks.format)}configure(){const n=this.min;super.configure(),this._startValue=$t(n),this._valueRange=$t(this.max)-$t(n)}getPixelForValue(n){return(void 0===n||0===n)&&(n=this.min),null===n||isNaN(n)?NaN:this.getPixelForDecimal(n===this.min?0:($t(n)-this._startValue)/this._valueRange)}getValueForPixel(n){const e=this.getDecimalForPixel(n);return Math.pow(10,this._startValue+e*this._valueRange)}}function Sl(i){const n=i.ticks;if(n.display&&i.display){const e=se(n.backdropPadding);return _t(n.font&&n.font.size,Et.font.size)+e.height}return 0}function wf(i,n,e){return e=It(e)?e:[e],{w:Se(i,n.string,e),h:e.length*n.lineHeight}}function sh(i,n,e,o,u){return i===o||i===u?{start:n-e/2,end:n+e/2}:i<o||i>u?{start:n-e,end:n}:{start:n,end:n+e}}function If(i,n,e,o,u){const c=Math.abs(Math.sin(e)),h=Math.abs(Math.cos(e));let p=0,g=0;o.start<n.l?(p=(n.l-o.start)/c,i.l=Math.min(i.l,n.l-p)):o.end>n.r&&(p=(o.end-n.r)/c,i.r=Math.max(i.r,n.r+p)),u.start<n.t?(g=(n.t-u.start)/h,i.t=Math.min(i.t,n.t-g)):u.end>n.b&&(g=(u.end-n.b)/h,i.b=Math.max(i.b,n.b+g))}function Sf(i){return 0===i||180===i?"center":i<180?"left":"right"}function Tf(i,n,e){return"right"===e?i-=n:"center"===e&&(i-=n/2),i}function Af(i,n,e){return 90===e||270===e?i-=n/2:(e>270||e<90)&&(i-=n),i}function oh(i,n,e,o){const{ctx:u}=i;if(e)u.arc(i.xCenter,i.yCenter,n,0,Ot);else{let c=i.getPointPosition(0,n);u.moveTo(c.x,c.y);for(let h=1;h<o;h++)c=i.getPointPosition(h,n),u.lineTo(c.x,c.y)}}El.id="logarithmic",El.defaults={ticks:{callback:Ri.formatters.logarithmic,major:{enabled:!0}}};class iu extends cc{constructor(n){super(n),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const n=this._padding=se(Sl(this.options)/2),e=this.width=this.maxWidth-n.width,o=this.height=this.maxHeight-n.height;this.xCenter=Math.floor(this.left+e/2+n.left),this.yCenter=Math.floor(this.top+o/2+n.top),this.drawingArea=Math.floor(Math.min(e,o)/2)}determineDataLimits(){const{min:n,max:e}=this.getMinMax(!1);this.min=Yt(n)&&!isNaN(n)?n:0,this.max=Yt(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Sl(this.options))}generateTickLabels(n){cc.prototype.generateTickLabels.call(this,n),this._pointLabels=this.getLabels().map((e,o)=>{const u=Bt(this.options.pointLabels.callback,[e,o],this);return u||0===u?u:""}).filter((e,o)=>this.chart.getDataVisibility(o))}fit(){const n=this.options;n.display&&n.pointLabels.display?function(i){const n={l:i.left+i._padding.left,r:i.right-i._padding.right,t:i.top+i._padding.top,b:i.bottom-i._padding.bottom},e=Object.assign({},n),o=[],u=[],c=i._pointLabels.length,h=i.options.pointLabels,p=h.centerPointLabels?Pt/c:0;for(let g=0;g<c;g++){const y=h.setContext(i.getPointLabelContext(g));u[g]=y.padding;const _=i.getPointPosition(g,i.drawingArea+u[g],p),I=Xt(y.font),A=wf(i.ctx,I,i._pointLabels[g]);o[g]=A;const M=Ge(i.getIndexAngle(g)+p),k=Math.round(Xi(M));If(e,n,M,sh(k,_.x,A.w,0,180),sh(k,_.y,A.h,90,270))}i.setCenterPoint(n.l-e.l,e.r-n.r,n.t-e.t,e.b-n.b),i._pointLabelItems=function(i,n,e){const o=[],u=i._pointLabels.length,c=i.options,h=Sl(c)/2,p=i.drawingArea,g=c.pointLabels.centerPointLabels?Pt/u:0;for(let y=0;y<u;y++){const _=i.getPointPosition(y,p+h+e[y],g),I=Math.round(Xi(Ge(_.angle+Vt))),A=n[y],M=Af(_.y,A.h,I),k=Sf(I),N=Tf(_.x,A.w,k);o.push({x:_.x,y:M,textAlign:k,left:N,top:M,right:N+A.w,bottom:M+A.h})}return o}(i,o,u)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(n,e,o,u){this.xCenter+=Math.floor((n-e)/2),this.yCenter+=Math.floor((o-u)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(n,e,o,u))}getIndexAngle(n){return Ge(n*(Ot/(this._pointLabels.length||1))+Pe(this.options.startAngle||0))}getDistanceFromCenterForValue(n){if(xt(n))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-n)*e:(n-this.min)*e}getValueForDistanceFromCenter(n){if(xt(n))return NaN;const e=n/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(n){const e=this._pointLabels||[];if(n>=0&&n<e.length){const o=e[n];return function(i,n,e){return Be(i,{label:e,index:n,type:"pointLabel"})}(this.getContext(),n,o)}}getPointPosition(n,e,o=0){const u=this.getIndexAngle(n)-Vt+o;return{x:Math.cos(u)*e+this.xCenter,y:Math.sin(u)*e+this.yCenter,angle:u}}getPointPositionForValue(n,e){return this.getPointPosition(n,this.getDistanceFromCenterForValue(e))}getBasePosition(n){return this.getPointPositionForValue(n||0,this.getBaseValue())}getPointLabelPosition(n){const{left:e,top:o,right:u,bottom:c}=this._pointLabelItems[n];return{left:e,top:o,right:u,bottom:c}}drawBackground(){const{backgroundColor:n,grid:{circular:e}}=this.options;if(n){const o=this.ctx;o.save(),o.beginPath(),oh(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),o.closePath(),o.fillStyle=n,o.fill(),o.restore()}}drawGrid(){const n=this.ctx,e=this.options,{angleLines:o,grid:u}=e,c=this._pointLabels.length;let h,p,g;if(e.pointLabels.display&&function(i,n){const{ctx:e,options:{pointLabels:o}}=i;for(let u=n-1;u>=0;u--){const c=o.setContext(i.getPointLabelContext(u)),h=Xt(c.font),{x:p,y:g,textAlign:y,left:_,top:I,right:A,bottom:M}=i._pointLabelItems[u],{backdropColor:k}=c;if(!xt(k)){const N=ci(c.borderRadius),F=se(c.backdropPadding);e.fillStyle=k;const V=_-F.left,H=I-F.top,X=A-_+F.width,K=M-I+F.height;Object.values(N).some(z=>0!==z)?(e.beginPath(),mn(e,{x:V,y:H,w:X,h:K,radius:N}),e.fill()):e.fillRect(V,H,X,K)}gn(e,i._pointLabels[u],p,g+h.lineHeight/2,h,{color:c.color,textAlign:y,textBaseline:"middle"})}}(this,c),u.display&&this.ticks.forEach((y,_)=>{0!==_&&(p=this.getDistanceFromCenterForValue(y.value),function(i,n,e,o){const u=i.ctx,c=n.circular,{color:h,lineWidth:p}=n;!c&&!o||!h||!p||e<0||(u.save(),u.strokeStyle=h,u.lineWidth=p,u.setLineDash(n.borderDash),u.lineDashOffset=n.borderDashOffset,u.beginPath(),oh(i,e,c,o),u.closePath(),u.stroke(),u.restore())}(this,u.setContext(this.getContext(_-1)),p,c))}),o.display){for(n.save(),h=c-1;h>=0;h--){const y=o.setContext(this.getPointLabelContext(h)),{color:_,lineWidth:I}=y;!I||!_||(n.lineWidth=I,n.strokeStyle=_,n.setLineDash(y.borderDash),n.lineDashOffset=y.borderDashOffset,p=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),g=this.getPointPosition(h,p),n.beginPath(),n.moveTo(this.xCenter,this.yCenter),n.lineTo(g.x,g.y),n.stroke())}n.restore()}}drawBorder(){}drawLabels(){const n=this.ctx,e=this.options,o=e.ticks;if(!o.display)return;const u=this.getIndexAngle(0);let c,h;n.save(),n.translate(this.xCenter,this.yCenter),n.rotate(u),n.textAlign="center",n.textBaseline="middle",this.ticks.forEach((p,g)=>{if(0===g&&!e.reverse)return;const y=o.setContext(this.getContext(g)),_=Xt(y.font);if(c=this.getDistanceFromCenterForValue(this.ticks[g].value),y.showLabelBackdrop){n.font=_.string,h=n.measureText(p.label).width,n.fillStyle=y.backdropColor;const I=se(y.backdropPadding);n.fillRect(-h/2-I.left,-c-_.size/2-I.top,h+I.width,_.size+I.height)}gn(n,p.label,0,-c,_,{color:y.color})}),n.restore()}drawTitle(){}}iu.id="radialLinear",iu.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Ri.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:i=>i,padding:5,centerPointLabels:!1}},iu.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},iu.descriptors={angleLines:{_fallback:"grid"}};const lc={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Mn=Object.keys(lc);function Df(i,n){return i-n}function ah(i,n){if(xt(n))return null;const e=i._adapter,{parser:o,round:u,isoWeekday:c}=i._parseOpts;let h=n;return"function"==typeof o&&(h=o(h)),Yt(h)||(h="string"==typeof o?e.parse(h,o):e.parse(h)),null===h?null:(u&&(h="week"!==u||!jn(c)&&!0!==c?e.startOf(h,u):e.startOf(h,"isoWeek",c)),+h)}function uh(i,n,e,o){const u=Mn.length;for(let c=Mn.indexOf(i);c<u-1;++c){const h=lc[Mn[c]],p=h.steps?h.steps:Number.MAX_SAFE_INTEGER;if(h.common&&Math.ceil((e-n)/(p*h.size))<=o)return Mn[c]}return Mn[u-1]}function ch(i,n,e){if(e){if(e.length){const{lo:o,hi:u}=Ye(e,n);i[e[o]>=n?e[o]:e[u]]=!0}}else i[n]=!0}function lh(i,n,e){const o=[],u={},c=n.length;let h,p;for(h=0;h<c;++h)p=n[h],u[p]=h,o.push({value:p,major:!1});return 0!==c&&e?function(i,n,e,o){const u=i._adapter,c=+u.startOf(n[0].value,o),h=n[n.length-1].value;let p,g;for(p=c;p<=h;p=+u.add(p,1,o))g=e[p],g>=0&&(n[g].major=!0);return n}(i,o,u,e):o}let Tl=(()=>{class i extends Qr{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,o){const u=e.time||(e.time={}),c=this._adapter=new Kc._date(e.adapters.date);c.init(o),Nn(u.displayFormats,c.formats()),this._parseOpts={parser:u.parser,round:u.round,isoWeekday:u.isoWeekday},super.init(e),this._normalized=o.normalized}parse(e,o){return void 0===e?null:ah(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,o=this._adapter,u=e.time.unit||"day";let{min:c,max:h,minDefined:p,maxDefined:g}=this.getUserBounds();function y(_){!p&&!isNaN(_.min)&&(c=Math.min(c,_.min)),!g&&!isNaN(_.max)&&(h=Math.max(h,_.max))}(!p||!g)&&(y(this._getLabelBounds()),("ticks"!==e.bounds||"labels"!==e.ticks.source)&&y(this.getMinMax(!1))),c=Yt(c)&&!isNaN(c)?c:+o.startOf(Date.now(),u),h=Yt(h)&&!isNaN(h)?h:+o.endOf(Date.now(),u)+1,this.min=Math.min(c,h-1),this.max=Math.max(c+1,h)}_getLabelBounds(){const e=this.getLabelTimestamps();let o=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY;return e.length&&(o=e[0],u=e[e.length-1]),{min:o,max:u}}buildTicks(){const e=this.options,o=e.time,u=e.ticks,c="labels"===u.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&c.length&&(this.min=this._userMin||c[0],this.max=this._userMax||c[c.length-1]);const h=this.min,g=function(i,n,e){let o=0,u=i.length;for(;o<u&&i[o]<n;)o++;for(;u>o&&i[u-1]>e;)u--;return o>0||u<i.length?i.slice(o,u):i}(c,h,this.max);return this._unit=o.unit||(u.autoSkip?uh(o.minUnit,this.min,this.max,this._getLabelCapacity(h)):function(i,n,e,o,u){for(let c=Mn.length-1;c>=Mn.indexOf(e);c--){const h=Mn[c];if(lc[h].common&&i._adapter.diff(u,o,h)>=n-1)return h}return Mn[e?Mn.indexOf(e):0]}(this,g.length,o.minUnit,this.min,this.max)),this._majorUnit=u.major.enabled&&"year"!==this._unit?function(i){for(let n=Mn.indexOf(i)+1,e=Mn.length;n<e;++n)if(lc[Mn[n]].common)return Mn[n]}(this._unit):void 0,this.initOffsets(c),e.reverse&&g.reverse(),lh(this,g,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e){let c,h,o=0,u=0;this.options.offset&&e.length&&(c=this.getDecimalForValue(e[0]),o=1===e.length?1-c:(this.getDecimalForValue(e[1])-c)/2,h=this.getDecimalForValue(e[e.length-1]),u=1===e.length?h:(h-this.getDecimalForValue(e[e.length-2]))/2);const p=e.length<3?.5:.25;o=ie(o,0,p),u=ie(u,0,p),this._offsets={start:o,end:u,factor:1/(o+1+u)}}_generate(){const e=this._adapter,o=this.min,u=this.max,c=this.options,h=c.time,p=h.unit||uh(h.minUnit,o,u,this._getLabelCapacity(o)),g=_t(h.stepSize,1),y="week"===p&&h.isoWeekday,_=jn(y)||!0===y,I={};let M,k,A=o;if(_&&(A=+e.startOf(A,"isoWeek",y)),A=+e.startOf(A,_?"day":p),e.diff(u,o,p)>1e5*g)throw new Error(o+" and "+u+" are too far apart with stepSize of "+g+" "+p);const N="data"===c.ticks.source&&this.getDataTimestamps();for(M=A,k=0;M<u;M=+e.add(M,g,p),k++)ch(I,M,N);return(M===u||"ticks"===c.bounds||1===k)&&ch(I,M,N),Object.keys(I).sort((F,V)=>F-V).map(F=>+F)}getLabelForValue(e){const u=this.options.time;return this._adapter.format(e,u.tooltipFormat?u.tooltipFormat:u.displayFormats.datetime)}_tickFormatFunction(e,o,u,c){const h=this.options,p=h.time.displayFormats,g=this._unit,y=this._majorUnit,I=y&&p[y],A=u[o],k=this._adapter.format(e,c||(y&&I&&A&&A.major?I:g&&p[g])),N=h.ticks.callback;return N?Bt(N,[k,o,u],this):k}generateTickLabels(e){let o,u,c;for(o=0,u=e.length;o<u;++o)c=e[o],c.label=this._tickFormatFunction(c.value,o,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const o=this._offsets,u=this.getDecimalForValue(e);return this.getPixelForDecimal((o.start+u)*o.factor)}getValueForPixel(e){const o=this._offsets,u=this.getDecimalForPixel(e)/o.factor-o.end;return this.min+u*(this.max-this.min)}_getLabelSize(e){const o=this.options.ticks,u=this.ctx.measureText(e).width,c=Pe(this.isHorizontal()?o.maxRotation:o.minRotation),h=Math.cos(c),p=Math.sin(c),g=this._resolveTickFontOptions(0).size;return{w:u*h+g*p,h:u*p+g*h}}_getLabelCapacity(e){const o=this.options.time,u=o.displayFormats,c=u[o.unit]||u.millisecond,h=this._tickFormatFunction(e,0,lh(this,[e],this._majorUnit),c),p=this._getLabelSize(h),g=Math.floor(this.isHorizontal()?this.width/p.w:this.height/p.h)-1;return g>0?g:1}getDataTimestamps(){let o,u,e=this._cache.data||[];if(e.length)return e;const c=this.getMatchingVisibleMetas();if(this._normalized&&c.length)return this._cache.data=c[0].controller.getAllParsedValues(this);for(o=0,u=c.length;o<u;++o)e=e.concat(c[o].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let o,u;if(e.length)return e;const c=this.getLabels();for(o=0,u=c.length;o<u;++o)e.push(ah(this,c[o]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Lr(e.sort(Df))}}return i.id="time",i.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}},i})();function hc(i,n,e){let c,h,p,g,o=0,u=i.length-1;e?(n>=i[o].pos&&n<=i[u].pos&&({lo:o,hi:u}=cn(i,"pos",n)),({pos:c,time:p}=i[o]),({pos:h,time:g}=i[u])):(n>=i[o].time&&n<=i[u].time&&({lo:o,hi:u}=cn(i,"time",n)),({time:c,pos:p}=i[o]),({time:h,pos:g}=i[u]));const y=h-c;return y?p+(g-p)*(n-c)/y:p}class Al extends Tl{constructor(n){super(n),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const n=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(n);this._minPos=hc(e,this.min),this._tableRange=hc(e,this.max)-this._minPos,super.initOffsets(n)}buildLookupTable(n){const{min:e,max:o}=this,u=[],c=[];let h,p,g,y,_;for(h=0,p=n.length;h<p;++h)y=n[h],y>=e&&y<=o&&u.push(y);if(u.length<2)return[{time:e,pos:0},{time:o,pos:1}];for(h=0,p=u.length;h<p;++h)_=u[h+1],g=u[h-1],y=u[h],Math.round((_+g)/2)!==y&&c.push({time:y,pos:h/(p-1)});return c}_getTimestampsForTable(){let n=this._cache.all||[];if(n.length)return n;const e=this.getDataTimestamps(),o=this.getLabelTimestamps();return n=e.length&&o.length?this.normalize(e.concat(o)):e.length?e:o,n=this._cache.all=n,n}getDecimalForValue(n){return(hc(this._table,n)-this._minPos)/this._tableRange}getValueForPixel(n){const e=this._offsets,o=this.getDecimalForPixel(n)/e.factor-e.end;return hc(this._table,o*this._tableRange+this._minPos,!0)}}Al.id="timeseries",Al.defaults=Tl.defaults;const Rf=[Nu,E,gf,Object.freeze({__proto__:null,CategoryScale:uc,LinearScale:Il,LogarithmicScale:El,RadialLinearScale:iu,TimeScale:Tl,TimeSeriesScale:Al})],fc=function(i,n){return i===n||i!=i&&n!=n},dc=function(i,n){for(var e=i.length;e--;)if(fc(i[e][0],n))return e;return-1};var zf=Array.prototype.splice;function ra(i){var n=-1,e=null==i?0:i.length;for(this.clear();++n<e;){var o=i[n];this.set(o[0],o[1])}}ra.prototype.clear=function(){this.__data__=[],this.size=0},ra.prototype.delete=function(i){var n=this.__data__,e=dc(n,i);return!(e<0||(e==n.length-1?n.pop():zf.call(n,e,1),--this.size,0))},ra.prototype.get=function(i){var n=this.__data__,e=dc(n,i);return e<0?void 0:n[e][1]},ra.prototype.has=function(i){return dc(this.__data__,i)>-1},ra.prototype.set=function(i,n){var e=this.__data__,o=dc(e,i);return o<0?(++this.size,e.push([i,n])):e[o][1]=n,this};const pc=ra,hh="object"==typeof global&&global&&global.Object===Object&&global;var od="object"==typeof self&&self&&self.Object===Object&&self;const sa=hh||od||Function("return this")();var ud=sa.Symbol,fh=Object.prototype,cd=fh.hasOwnProperty,ld=fh.toString,ru=ud?ud.toStringTag:void 0;var pd=Object.prototype.toString;var dh=ud?ud.toStringTag:void 0;const mc=function(i){return null==i?void 0===i?"[object Undefined]":"[object Null]":dh&&dh in Object(i)?function(i){var n=cd.call(i,ru),e=i[ru];try{i[ru]=void 0;var o=!0}catch(c){}var u=ld.call(i);return o&&(n?i[ru]=e:delete i[ru]),u}(i):function(i){return pd.call(i)}(i)},vo=function(i){var n=typeof i;return null!=i&&("object"==n||"function"==n)},Cl=function(i){if(!vo(i))return!1;var n=mc(i);return"[object Function]"==n||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n};var i,Td=sa["__core-js_shared__"],ph=(i=/[^.]+$/.exec(Td&&Td.keys&&Td.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"";var kd=Function.prototype.toString;var Ld=/^\[object .+?Constructor\]$/,Vd=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const Bd=function(i){return!(!vo(i)||function(i){return!!ph&&ph in i}(i))&&(Cl(i)?Vd:Ld).test(function(i){if(null!=i){try{return kd.call(i)}catch(n){}try{return i+""}catch(n){}}return""}(i))},kl=function(i,n){var e=function(i,n){return null==i?void 0:i[n]}(i,n);return Bd(e)?e:void 0},gh=kl(sa,"Map"),su=kl(Object,"create");var Jd=Object.prototype.hasOwnProperty;var ip=Object.prototype.hasOwnProperty;function oa(i){var n=-1,e=null==i?0:i.length;for(this.clear();++n<e;){var o=i[n];this.set(o[0],o[1])}}oa.prototype.clear=function(){this.__data__=su?su(null):{},this.size=0},oa.prototype.delete=function(i){var n=this.has(i)&&delete this.__data__[i];return this.size-=n?1:0,n},oa.prototype.get=function(i){var n=this.__data__;if(su){var e=n[i];return"__lodash_hash_undefined__"===e?void 0:e}return Jd.call(n,i)?n[i]:void 0},oa.prototype.has=function(i){var n=this.__data__;return su?void 0!==n[i]:ip.call(n,i)},oa.prototype.set=function(i,n){var e=this.__data__;return this.size+=this.has(i)?0:1,e[i]=su&&void 0===n?"__lodash_hash_undefined__":n,this};const mh=oa,yc=function(i,n){var e=i.__data__;return function(i){var n=typeof i;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==i:null===i}(n)?e["string"==typeof n?"string":"hash"]:e.map};function aa(i){var n=-1,e=null==i?0:i.length;for(this.clear();++n<e;){var o=i[n];this.set(o[0],o[1])}}aa.prototype.clear=function(){this.size=0,this.__data__={hash:new mh,map:new(gh||pc),string:new mh}},aa.prototype.delete=function(i){var n=yc(this,i).delete(i);return this.size-=n?1:0,n},aa.prototype.get=function(i){return yc(this,i).get(i)},aa.prototype.has=function(i){return yc(this,i).has(i)},aa.prototype.set=function(i,n){var e=yc(this,i),o=e.size;return e.set(i,n),this.size+=e.size==o?0:1,this};const xp=aa;function ua(i){var n=this.__data__=new pc(i);this.size=n.size}ua.prototype.clear=function(){this.__data__=new pc,this.size=0},ua.prototype.delete=function(i){var n=this.__data__,e=n.delete(i);return this.size=n.size,e},ua.prototype.get=function(i){return this.__data__.get(i)},ua.prototype.has=function(i){return this.__data__.has(i)},ua.prototype.set=function(i,n){var e=this.__data__;if(e instanceof pc){var o=e.__data__;if(!gh||o.length<199)return o.push([i,n]),this.size=++e.size,this;e=this.__data__=new xp(o)}return e.set(i,n),this.size=e.size,this};const Tp=ua;var Ap=function(){try{var i=kl(Object,"defineProperty");return i({},"",{}),i}catch(n){}}();const vc=Ap,Dl=function(i,n,e){"__proto__"==n&&vc?vc(i,n,{configurable:!0,enumerable:!0,value:e,writable:!0}):i[n]=e},Pl=function(i,n,e){(void 0!==e&&!fc(i[n],e)||void 0===e&&!(n in i))&&Dl(i,n,e)};const Pp=function(n,e,o){for(var u=-1,c=Object(n),h=o(n),p=h.length;p--;){var g=h[++u];if(!1===e(c[g],g,c))break}return n};var yh="object"==typeof exports&&exports&&!exports.nodeType&&exports,vh=yh&&"object"==typeof module&&module&&!module.nodeType&&module,bh=vh&&vh.exports===yh?sa.Buffer:void 0,_h=bh?bh.allocUnsafe:void 0;const wh=sa.Uint8Array,Up=function(i,n){var e=n?function(i){var n=new i.constructor(i.byteLength);return new wh(n).set(new wh(i)),n}(i.buffer):i.buffer;return new i.constructor(e,i.byteOffset,i.length)};var xh=Object.create,Hp=function(){function i(){}return function(n){if(!vo(n))return{};if(xh)return xh(n);i.prototype=n;var e=new i;return i.prototype=void 0,e}}();const Wp=Hp;var Gp=function(i,n){return function(e){return i(n(e))}}(Object.getPrototypeOf,Object);const Ih=Gp;var Yp=Object.prototype;const Eh=function(i){var n=i&&i.constructor;return i===("function"==typeof n&&n.prototype||Yp)},ou=function(i){return null!=i&&"object"==typeof i},Sh=function(i){return ou(i)&&"[object Arguments]"==mc(i)};var Th=Object.prototype,tg=Th.hasOwnProperty,eg=Th.propertyIsEnumerable,ng=Sh(function(){return arguments}())?Sh:function(i){return ou(i)&&tg.call(i,"callee")&&!eg.call(i,"callee")};const Ol=ng,Ll=Array.isArray,Ah=function(i){return"number"==typeof i&&i>-1&&i%1==0&&i<=9007199254740991},Nl=function(i){return null!=i&&Ah(i.length)&&!Cl(i)};var Ch="object"==typeof exports&&exports&&!exports.nodeType&&exports,Mh=Ch&&"object"==typeof module&&module&&!module.nodeType&&module,kh=Mh&&Mh.exports===Ch?sa.Buffer:void 0;const Dh=(kh?kh.isBuffer:void 0)||function(){return!1};var Ph=Function.prototype.toString,yg=Object.prototype.hasOwnProperty,vg=Ph.call(Object);var oe={};oe["[object Float32Array]"]=oe["[object Float64Array]"]=oe["[object Int8Array]"]=oe["[object Int16Array]"]=oe["[object Int32Array]"]=oe["[object Uint8Array]"]=oe["[object Uint8ClampedArray]"]=oe["[object Uint16Array]"]=oe["[object Uint32Array]"]=!0,oe["[object Arguments]"]=oe["[object Array]"]=oe["[object ArrayBuffer]"]=oe["[object Boolean]"]=oe["[object DataView]"]=oe["[object Date]"]=oe["[object Error]"]=oe["[object Function]"]=oe["[object Map]"]=oe["[object Number]"]=oe["[object Object]"]=oe["[object RegExp]"]=oe["[object Set]"]=oe["[object String]"]=oe["[object WeakMap]"]=!1;var Oh="object"==typeof exports&&exports&&!exports.nodeType&&exports,au=Oh&&"object"==typeof module&&module&&!module.nodeType&&module,Rl=au&&au.exports===Oh&&hh.process,Xg=function(){try{return au&&au.require&&au.require("util").types||Rl&&Rl.binding&&Rl.binding("util")}catch(n){}}(),Nh=Xg&&Xg.isTypedArray;const Rh=Nh?function(i){return function(n){return i(n)}}(Nh):function(i){return ou(i)&&Ah(i.length)&&!!oe[mc(i)]},Fl=function(i,n){if(("constructor"!==n||"function"!=typeof i[n])&&"__proto__"!=n)return i[n]};var tm=Object.prototype.hasOwnProperty;const nm=function(i,n,e){var o=i[n];(!tm.call(i,n)||!fc(o,e)||void 0===e&&!(n in i))&&Dl(i,n,e)};var um=/^(?:0|[1-9]\d*)$/;const Fh=function(i,n){var e=typeof i;return!!(n=null==n?9007199254740991:n)&&("number"==e||"symbol"!=e&&um.test(i))&&i>-1&&i%1==0&&i<n};var hm=Object.prototype.hasOwnProperty;const dm=function(i,n){var e=Ll(i),o=!e&&Ol(i),u=!e&&!o&&Dh(i),c=!e&&!o&&!u&&Rh(i),h=e||o||u||c,p=h?function(i,n){for(var e=-1,o=Array(i);++e<i;)o[e]=n(e);return o}(i.length,String):[],g=p.length;for(var y in i)(n||hm.call(i,y))&&(!h||!("length"==y||u&&("offset"==y||"parent"==y)||c&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||Fh(y,g)))&&p.push(y);return p};var ym=Object.prototype.hasOwnProperty;const bm=function(i){if(!vo(i))return function(i){var n=[];if(null!=i)for(var e in Object(i))n.push(e);return n}(i);var n=Eh(i),e=[];for(var o in i)"constructor"==o&&(n||!ym.call(i,o))||e.push(o);return e},jh=function(i){return Nl(i)?dm(i,!0):bm(i)},xm=function(i){return function(i,n,e,o){var u=!e;e||(e={});for(var c=-1,h=n.length;++c<h;){var p=n[c],g=o?o(e[p],i[p],p,e,i):void 0;void 0===g&&(g=i[p]),u?Dl(e,p,g):nm(e,p,g)}return e}(i,jh(i))},Em=function(i,n,e,o,u,c,h){var p=Fl(i,e),g=Fl(n,e),y=h.get(g);if(y)Pl(i,e,y);else{var _=c?c(p,g,e+"",i,n,h):void 0,I=void 0===_;if(I){var A=Ll(g),M=!A&&Dh(g),k=!A&&!M&&Rh(g);_=g,A||M||k?Ll(p)?_=p:function(i){return ou(i)&&Nl(i)}(p)?_=function(i,n){var e=-1,o=i.length;for(n||(n=Array(o));++e<o;)n[e]=i[e];return n}(p):M?(I=!1,_=function(i,n){if(n)return i.slice();var e=i.length,o=_h?_h(e):new i.constructor(e);return i.copy(o),o}(g,!0)):k?(I=!1,_=Up(g,!0)):_=[]:function(i){if(!ou(i)||"[object Object]"!=mc(i))return!1;var n=Ih(i);if(null===n)return!0;var e=yg.call(n,"constructor")&&n.constructor;return"function"==typeof e&&e instanceof e&&Ph.call(e)==vg}(g)||Ol(g)?(_=p,Ol(p)?_=xm(p):(!vo(p)||Cl(p))&&(_=function(i){return"function"!=typeof i.constructor||Eh(i)?{}:Wp(Ih(i))}(g))):I=!1}I&&(h.set(g,_),u(_,g,o,c,h),h.delete(g)),Pl(i,e,_)}},Sm=function Vh(i,n,e,o,u){i!==n&&Pp(n,function(c,h){if(u||(u=new Tp),vo(c))Em(i,n,h,e,Vh,o,u);else{var p=o?o(Fl(i,h),c,h+"",i,n,u):void 0;void 0===p&&(p=c),Pl(i,h,p)}},jh)},Uh=function(i){return i},Cm=function(i,n,e){switch(e.length){case 0:return i.call(n);case 1:return i.call(n,e[0]);case 2:return i.call(n,e[0],e[1]);case 3:return i.call(n,e[0],e[1],e[2])}return i.apply(n,e)};var Bh=Math.max;const Pm=function(i){return function(){return i}};var Om=vc?function(i,n){return vc(i,"toString",{configurable:!0,enumerable:!1,value:Pm(n),writable:!0})}:Uh,Fm=Date.now,Vm=function(i){var n=0,e=0;return function(){var o=Fm(),u=16-(o-e);if(e=o,u>0){if(++n>=800)return arguments[0]}else n=0;return i.apply(void 0,arguments)}}(Om);const Um=Vm,zm=function(i,n){return Um(function(i,n,e){return n=Bh(void 0===n?i.length-1:n,0),function(){for(var o=arguments,u=-1,c=Bh(o.length-n,0),h=Array(c);++u<c;)h[u]=o[n+u];u=-1;for(var p=Array(n+1);++u<n;)p[u]=o[u];return p[n]=e(h),Cm(i,this,p)}}(i,n,Uh),i+"")};var Gm=function(i){return zm(function(n,e){var o=-1,u=e.length,c=u>1?e[u-1]:void 0,h=u>2?e[2]:void 0;for(c=i.length>3&&"function"==typeof c?(u--,c):void 0,h&&function(i,n,e){if(!vo(e))return!1;var o=typeof n;return!!("number"==o?Nl(e)&&Fh(n,e.length):"string"==o&&n in e)&&fc(e[n],i)}(e[0],e[1],h)&&(c=u<3?void 0:c,u=1),n=Object(n);++o<u;){var p=e[o];p&&i(n,p,o)}return n})}(function(i,n,e){Sm(i,n,e)});const zh=Gm;let Ym=(()=>{class i{constructor(){this.colorschemesOptions=new Hi.X(void 0)}setColorschemesOptions(e){this.pColorschemesOptions=e,this.colorschemesOptions.next(e)}getColorschemesOptions(){return this.pColorschemesOptions}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=S.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),$m=(()=>{class i{constructor(e,o,u){this.zone=o,this.themeService=u,this.type="bar",this.plugins=[],this.chartClick=new S.vpe,this.chartHover=new S.vpe,this.subs=[],this.ctx=e.nativeElement.getContext("2d"),this.subs.push(this.themeService.colorschemesOptions.pipe((0,Pn.x)()).subscribe(c=>this.themeChanged(c)))}ngOnChanges(e){const o=["type"],u=Object.getOwnPropertyNames(e);if(u.some(c=>o.includes(c))||u.every(c=>e[c].isFirstChange()))this.render();else{const c=this.getChartConfiguration();this.chart&&(Object.assign(this.chart.config.data,c.data),this.chart.config.plugins&&Object.assign(this.chart.config.plugins,c.plugins),this.chart.config.options&&Object.assign(this.chart.config.options,c.options)),this.update()}}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.subs.forEach(e=>e.unsubscribe())}render(){return this.chart&&this.chart.destroy(),as.register(...this.plugins),this.zone.runOutsideAngular(()=>this.chart=new as(this.ctx,this.getChartConfiguration()))}update(e){this.chart&&this.zone.runOutsideAngular(()=>{var o;return null===(o=this.chart)||void 0===o?void 0:o.update(e)})}hideDataset(e,o){this.chart&&(this.chart.getDatasetMeta(e).hidden=o,this.update())}isDatasetHidden(e){var o,u;return null===(u=null===(o=this.chart)||void 0===o?void 0:o.getDatasetMeta(e))||void 0===u?void 0:u.hidden}toBase64Image(){var e;return null===(e=this.chart)||void 0===e?void 0:e.toBase64Image()}themeChanged(e){this.themeOverrides=e,this.chart&&(this.chart.config.options&&Object.assign(this.chart.config.options,this.getChartOptions()),this.update())}getChartOptions(){return zh({onHover:(e,o)=>{var u;!this.chartHover.observed&&!(null===(u=this.chartHover.observers)||void 0===u?void 0:u.length)||this.zone.run(()=>this.chartHover.emit({event:e,active:o}))},onClick:(e,o)=>{var u;!this.chartClick.observed&&!(null===(u=this.chartClick.observers)||void 0===u?void 0:u.length)||this.zone.run(()=>this.chartClick.emit({event:e,active:o}))}},this.themeOverrides,this.options,{plugins:{legend:{display:this.legend}}})}getChartConfiguration(){return{type:this.type,data:this.getChartData(),options:this.getChartOptions()}}getChartData(){return this.data?this.data:{labels:this.labels||[],datasets:this.datasets||[]}}}return i.\u0275fac=function(e){return new(e||i)(S.Y36(S.SBq),S.Y36(S.R0b),S.Y36(Ym))},i.\u0275dir=S.lG2({type:i,selectors:[["canvas","baseChart",""]],inputs:{type:"type",legend:"legend",data:"data",options:"options",plugins:"plugins",labels:"labels",datasets:"datasets"},outputs:{chartClick:"chartClick",chartHover:"chartHover"},exportAs:["base-chart"],features:[S.TTD]}),i})();const Km=[[255,99,132],[54,162,235],[255,206,86],[231,233,237],[75,192,192],[151,187,205],[220,220,220],[247,70,74],[70,191,189],[253,180,92],[148,159,177],[77,83,96]],Xm={datasets:{line:{backgroundColor:i=>vn(bn(i.datasetIndex),.4),borderColor:i=>vn(bn(i.datasetIndex),1),pointBackgroundColor:i=>vn(bn(i.datasetIndex),1),pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:i=>vn(bn(i.datasetIndex),.8)},bar:{backgroundColor:i=>vn(bn(i.datasetIndex),.6),borderColor:i=>vn(bn(i.datasetIndex),1),hoverBackgroundColor:i=>vn(bn(i.datasetIndex),.8),hoverBorderColor:i=>vn(bn(i.datasetIndex),1)},get radar(){return this.line},doughnut:{backgroundColor:i=>vn(bn(i.dataIndex),.6),borderColor:"#fff",hoverBackgroundColor:i=>vn(bn(i.dataIndex),1),hoverBorderColor:i=>vn(bn(i.dataIndex),1)},get pie(){return this.doughnut},polarArea:{backgroundColor:i=>vn(bn(i.dataIndex),.6),borderColor:i=>vn(bn(i.dataIndex),1),hoverBackgroundColor:i=>vn(bn(i.dataIndex),.8),hoverBorderColor:i=>vn(bn(i.dataIndex),1)},get bubble(){return this.doughnut},get scatter(){return this.doughnut},get area(){return this.polarArea}}};function vn(i,n){return"rgba("+i.concat(n).join(",")+")"}function jl(i,n){return Math.floor(Math.random()*(n-i+1))+i}function bn(i=0){return Km[i]||[jl(0,255),jl(0,255),jl(0,255)]}let Hh=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=S.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();as.register(...Rf);let Qm=(()=>{class i{constructor(e){(null==e?void 0:e.plugins)&&as.register(...null==e?void 0:e.plugins);const o=zh(Xm,(null==e?void 0:e.defaults)||{});Et.set(o)}static forRoot(e){return{ngModule:i,providers:[{provide:Hh,useValue:e}]}}}return i.\u0275fac=function(e){return new(e||i)(S.LFG(Hh,8))},i.\u0275mod=S.oAB({type:i}),i.\u0275inj=S.cJS({imports:[[]]}),i})();function Jm(i,n){if(1&i&&(S.TgZ(0,"div",3),S._UZ(1,"canvas",4),S.qZA()),2&i){const e=S.oxw().ngIf,o=S.oxw();S.xp6(1),S.Q6J("datasets",e.lineChartData)("labels",e.lineChartLabels)("options",o.lineChartOptions)("type",o.lineChartType)("legend",!0)}}function ty(i,n){1&i&&(S.TgZ(0,"div",5),S._UZ(1,"div",6),S.qZA())}function ey(i,n){if(1&i&&(S.ynx(0),S.YNc(1,Jm,2,5,"div",1),S.YNc(2,ty,2,0,"ng-template",null,2,S.W1O),S.BQk()),2&i){const e=n.ngIf,o=S.MAs(3);S.xp6(1),S.Q6J("ngIf",!e.loading)("ngIfElse",o)}}let ny=(()=>{class i{constructor(e,o,u){this.exchangeRatesService=e,this.datePipe=o,this.translatePipe=u,this.lineChartType="line",this.lineChartOptions={responsive:!0,scales:{xAxes:[{}],yAxes:[{id:"y-axis-0",position:"left"},{id:"y-axis-1",position:"right",gridLines:{color:"rgba(255,0,0,0.3)"},ticks:{fontColor:"red"}}]}},this.lineChartColors=[{backgroundColor:"rgba(255,0,0,0.3)",borderColor:"red",pointBackgroundColor:"rgba(148,159,177,1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(148,159,177,0.8)"}],this.currencyIdSubject=new Hi.X(null),this.model$=this.currencyIdSubject.pipe((0,Zt.h)(c=>!!c),(0,W.w)(c=>this.exchangeRatesService.getHistorical(c)),(0,Lt.U)(c=>({loading:!1,items:c})),(0,Lt.U)(c=>Object.assign(Object.assign({},c),{lineChartData:[{data:c.items.map(h=>h.value),label:this.translatePipe.transform("Price")}],lineChartLabels:c.items.map(h=>this.datePipe.transform(h.date,"dd MMM yyyy"))})),(0,tt.O)({loading:!0,items:[],lineChartData:[],lineChartLabels:[]}))}set currencyId(e){this.currencyIdSubject.next(e)}}return i.\u0275fac=function(e){return new(e||i)(S.Y36(te.s),S.Y36(re.uU),S.Y36(Qt.X$))},i.\u0275cmp=S.Xpm({type:i,selectors:[["app-historical-exchange-rates-chart"]],inputs:{currencyId:"currencyId"},features:[S._Bn([re.uU,Qt.X$])],decls:2,vars:3,consts:[[4,"ngIf"],["class","chart-area",4,"ngIf","ngIfElse"],["loading",""],[1,"chart-area"],["baseChart","","width","400","height","400",3,"datasets","labels","options","type","legend"],[1,"d-flex","justify-content-center","align-items-center","graph-container"],[1,"dot-pulse"]],template:function(e,o){1&e&&(S.YNc(0,ey,4,2,"ng-container",0),S.ALo(1,"async")),2&e&&S.Q6J("ngIf",S.lcZ(1,1,o.model$))},directives:[re.O5,$m],pipes:[re.Ov],styles:[".graph-container[_ngcontent-%COMP%]{width:400px;height:400px}"],changeDetection:0}),i})();function iy(i,n){1&i&&(S.TgZ(0,"span",21),S._uU(1,"Selling"),S.qZA())}function ry(i,n){1&i&&(S.TgZ(0,"span",22),S._uU(1,"Not selling"),S.qZA())}function sy(i,n){if(1&i&&(S.ynx(0,18),S.YNc(1,iy,2,0,"span",19),S.YNc(2,ry,2,0,"span",20),S.BQk()),2&i){const e=n.ngIf;S.xp6(1),S.Q6J("ngIf",e.sellingEnabled),S.xp6(1),S.Q6J("ngIf",!e.sellingEnabled)}}function oy(i,n){1&i&&(S.TgZ(0,"div",23),S.TgZ(1,"div",24),S._UZ(2,"app-historical-exchange-rates-chart",25),S.qZA(),S.qZA())}function ay(i,n){if(1&i){const e=S.EpF();S.TgZ(0,"div",12),S.TgZ(1,"app-exchange-rate-card",13),S.YNc(2,sy,3,2,"ng-container",14),S.TgZ(3,"button",15),S.NdJ("click",function(){S.CHM(e);const u=S.oxw();return u.showHistory=!u.showHistory}),S.ALo(4,"translate"),S._UZ(5,"i",16),S.qZA(),S.qZA(),S.YNc(6,oy,3,0,"div",17),S.qZA()}if(2&i){const e=n.ngIf,o=S.oxw();S.xp6(1),S.Q6J("showMidPrice",!0)("liftOnHover",!1),S.xp6(1),S.Q6J("ngIf",e.settings),S.xp6(1),S.Q6J("ngbTooltip",S.lcZ(4,5,(o.showHistory?"Hide ":"Show ")+"history")),S.xp6(3),S.Q6J("ngIf",!e.loading&&o.showHistory)}}const uy=[{path:"",component:(()=>{class i{constructor(e){this.settingsService=e,this.showHistory=!1;const o=this.settingsService.get();this.model$=(0,Bi.aj)([o]).pipe((0,Lt.U)(([u])=>({settings:u,loading:!1})),(0,tt.O)({loading:!0}))}}return i.\u0275fac=function(e){return new(e||i)(S.Y36(Ws))},i.\u0275cmp=S.Xpm({type:i,selectors:[["app-home"]],decls:21,vars:3,consts:[[1,"position-relative"],[1,"section","section-lg","section-hero","section-shaped"],[1,"shape","shape-style-1","shape-default"],[1,"span-150"],[1,"span-50"],[1,"span-75"],[1,"span-100"],["class","container shape-container d-flex justify-content-center align-items-center flex-wrap py-lg",4,"ngIf"],[1,"container","d-flex","justify-content-center","align-items-center"],[1,"separator","separator-bottom","separator-skew","zindex-100"],["x","0","y","0","viewBox","0 0 2560 100","preserveAspectRatio","none","version","1.1","xmlns","http://www.w3.org/2000/svg"],["points","2560 0 2560 100 0 100",1,"fill-white"],[1,"container","shape-container","d-flex","justify-content-center","align-items-center","flex-wrap","py-lg"],["currencyId","USD",3,"showMidPrice","liftOnHover"],["class","mt-1",4,"ngIf"],[1,"btn","btn-link",3,"ngbTooltip","click"],[1,"fa","fa-line-chart"],["class","card shadow border-0 ml-4 mt-1",4,"ngIf"],[1,"mt-1"],["class","badge badge-pill badge-success","translate","",4,"ngIf"],["class","badge badge-pill badge-danger","translate","",4,"ngIf"],["translate","",1,"badge","badge-pill","badge-success"],["translate","",1,"badge","badge-pill","badge-danger"],[1,"card","shadow","border-0","ml-4","mt-1"],[1,"card-body"],["currencyId","USD"]],template:function(e,o){1&e&&(S.TgZ(0,"main"),S.TgZ(1,"div",0),S.TgZ(2,"section",1),S.TgZ(3,"div",2),S._UZ(4,"span",3),S._UZ(5,"span",4),S._UZ(6,"span",4),S._UZ(7,"span",5),S._UZ(8,"span",6),S._UZ(9,"span",5),S._UZ(10,"span",4),S._UZ(11,"span",6),S._UZ(12,"span",4),S._UZ(13,"span",6),S.qZA(),S.YNc(14,ay,7,7,"div",7),S.ALo(15,"async"),S.TgZ(16,"div",8),S._UZ(17,"app-exchange-rates-service-health-alert"),S.qZA(),S.TgZ(18,"div",9),S.O4$(),S.TgZ(19,"svg",10),S._UZ(20,"polygon",11),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.qZA()),2&e&&(S.xp6(14),S.Q6J("ngIf",S.lcZ(15,1,o.model$)))},directives:[re.O5,un,de,Wi._L,Qt.Pi,ny],pipes:[re.Ov,Qt.X$],encapsulation:2}),i})()}];let cy=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=S.oAB({type:i}),i.\u0275inj=S.cJS({imports:[[D.Bz.forChild(uy)],D.Bz]}),i})();var ly=lt(4466);let hy=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=S.oAB({type:i}),i.\u0275inj=S.cJS({imports:[[re.ez,Qm]]}),i})(),fy=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=S.oAB({type:i}),i.\u0275inj=S.cJS({imports:[[re.ez,cy,Wi.IJ,ly.m,hy]]}),i})()},5704:(kn,me,lt)=>{lt.r(me),lt.d(me,{__extends:()=>D,__assign:()=>Bi,__rest:()=>Lt,__decorate:()=>tt,__param:()=>S,__metadata:()=>yt,__awaiter:()=>gi,__generator:()=>rn,__createBinding:()=>j,__exportStar:()=>G,__values:()=>Ie,__read:()=>Dn,__spread:()=>rt,__spreadArrays:()=>Gt,__await:()=>Pn,__asyncGenerator:()=>Zt,__asyncDelegator:()=>at,__asyncValues:()=>nt,__makeTemplateObject:()=>J,__importStar:()=>sn,__importDefault:()=>mi,__classPrivateFieldGet:()=>wr,__classPrivateFieldSet:()=>xr});var re=function(W,st){return(re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,Y){Q.__proto__=Y}||function(Q,Y){for(var ht in Y)Y.hasOwnProperty(ht)&&(Q[ht]=Y[ht])})(W,st)};function D(W,st){function Q(){this.constructor=W}re(W,st),W.prototype=null===st?Object.create(st):(Q.prototype=st.prototype,new Q)}var Bi=function(){return Bi=Object.assign||function(st){for(var Q,Y=1,ht=arguments.length;Y<ht;Y++)for(var $ in Q=arguments[Y])Object.prototype.hasOwnProperty.call(Q,$)&&(st[$]=Q[$]);return st},Bi.apply(this,arguments)};function Lt(W,st){var Q={};for(var Y in W)Object.prototype.hasOwnProperty.call(W,Y)&&st.indexOf(Y)<0&&(Q[Y]=W[Y]);if(null!=W&&"function"==typeof Object.getOwnPropertySymbols){var ht=0;for(Y=Object.getOwnPropertySymbols(W);ht<Y.length;ht++)st.indexOf(Y[ht])<0&&Object.prototype.propertyIsEnumerable.call(W,Y[ht])&&(Q[Y[ht]]=W[Y[ht]])}return Q}function tt(W,st,Q,Y){var pt,ht=arguments.length,$=ht<3?st:null===Y?Y=Object.getOwnPropertyDescriptor(st,Q):Y;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)$=Reflect.decorate(W,st,Q,Y);else for(var mt=W.length-1;mt>=0;mt--)(pt=W[mt])&&($=(ht<3?pt($):ht>3?pt(st,Q,$):pt(st,Q))||$);return ht>3&&$&&Object.defineProperty(st,Q,$),$}function S(W,st){return function(Q,Y){st(Q,Y,W)}}function yt(W,st){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(W,st)}function gi(W,st,Q,Y){return new(Q||(Q=Promise))(function($,pt){function mt(fe){try{vt(Y.next(fe))}catch(ae){pt(ae)}}function Nt(fe){try{vt(Y.throw(fe))}catch(ae){pt(ae)}}function vt(fe){fe.done?$(fe.value):function($){return $ instanceof Q?$:new Q(function(pt){pt($)})}(fe.value).then(mt,Nt)}vt((Y=Y.apply(W,st||[])).next())})}function rn(W,st){var Y,ht,$,pt,Q={label:0,sent:function(){if(1&$[0])throw $[1];return $[1]},trys:[],ops:[]};return pt={next:mt(0),throw:mt(1),return:mt(2)},"function"==typeof Symbol&&(pt[Symbol.iterator]=function(){return this}),pt;function mt(vt){return function(fe){return function(vt){if(Y)throw new TypeError("Generator is already executing.");for(;Q;)try{if(Y=1,ht&&($=2&vt[0]?ht.return:vt[0]?ht.throw||(($=ht.return)&&$.call(ht),0):ht.next)&&!($=$.call(ht,vt[1])).done)return $;switch(ht=0,$&&(vt=[2&vt[0],$.value]),vt[0]){case 0:case 1:$=vt;break;case 4:return Q.label++,{value:vt[1],done:!1};case 5:Q.label++,ht=vt[1],vt=[0];continue;case 7:vt=Q.ops.pop(),Q.trys.pop();continue;default:if(!($=($=Q.trys).length>0&&$[$.length-1])&&(6===vt[0]||2===vt[0])){Q=0;continue}if(3===vt[0]&&(!$||vt[1]>$[0]&&vt[1]<$[3])){Q.label=vt[1];break}if(6===vt[0]&&Q.label<$[1]){Q.label=$[1],$=vt;break}if($&&Q.label<$[2]){Q.label=$[2],Q.ops.push(vt);break}$[2]&&Q.ops.pop(),Q.trys.pop();continue}vt=st.call(W,Q)}catch(fe){vt=[6,fe],ht=0}finally{Y=$=0}if(5&vt[0])throw vt[1];return{value:vt[0]?vt[1]:void 0,done:!0}}([vt,fe])}}}function j(W,st,Q,Y){void 0===Y&&(Y=Q),W[Y]=st[Q]}function G(W,st){for(var Q in W)"default"!==Q&&!st.hasOwnProperty(Q)&&(st[Q]=W[Q])}function Ie(W){var st="function"==typeof Symbol&&Symbol.iterator,Q=st&&W[st],Y=0;if(Q)return Q.call(W);if(W&&"number"==typeof W.length)return{next:function(){return W&&Y>=W.length&&(W=void 0),{value:W&&W[Y++],done:!W}}};throw new TypeError(st?"Object is not iterable.":"Symbol.iterator is not defined.")}function Dn(W,st){var Q="function"==typeof Symbol&&W[Symbol.iterator];if(!Q)return W;var ht,pt,Y=Q.call(W),$=[];try{for(;(void 0===st||st-- >0)&&!(ht=Y.next()).done;)$.push(ht.value)}catch(mt){pt={error:mt}}finally{try{ht&&!ht.done&&(Q=Y.return)&&Q.call(Y)}finally{if(pt)throw pt.error}}return $}function rt(){for(var W=[],st=0;st<arguments.length;st++)W=W.concat(Dn(arguments[st]));return W}function Gt(){for(var W=0,st=0,Q=arguments.length;st<Q;st++)W+=arguments[st].length;var Y=Array(W),ht=0;for(st=0;st<Q;st++)for(var $=arguments[st],pt=0,mt=$.length;pt<mt;pt++,ht++)Y[ht]=$[pt];return Y}function Pn(W){return this instanceof Pn?(this.v=W,this):new Pn(W)}function Zt(W,st,Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ht,Y=Q.apply(W,st||[]),$=[];return ht={},pt("next"),pt("throw"),pt("return"),ht[Symbol.asyncIterator]=function(){return this},ht;function pt(ue){Y[ue]&&(ht[ue]=function(On){return new Promise(function(Zn,Ir){$.push([ue,On,Zn,Ir])>1||mt(ue,On)})})}function mt(ue,On){try{!function(ue){ue.value instanceof Pn?Promise.resolve(ue.value.v).then(vt,fe):ae($[0][2],ue)}(Y[ue](On))}catch(Zn){ae($[0][3],Zn)}}function vt(ue){mt("next",ue)}function fe(ue){mt("throw",ue)}function ae(ue,On){ue(On),$.shift(),$.length&&mt($[0][0],$[0][1])}}function at(W){var st,Q;return st={},Y("next"),Y("throw",function(ht){throw ht}),Y("return"),st[Symbol.iterator]=function(){return this},st;function Y(ht,$){st[ht]=W[ht]?function(pt){return(Q=!Q)?{value:Pn(W[ht](pt)),done:"return"===ht}:$?$(pt):pt}:$}}function nt(W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Q,st=W[Symbol.asyncIterator];return st?st.call(W):(W=Ie(W),Q={},Y("next"),Y("throw"),Y("return"),Q[Symbol.asyncIterator]=function(){return this},Q);function Y($){Q[$]=W[$]&&function(pt){return new Promise(function(mt,Nt){!function($,pt,mt,Nt){Promise.resolve(Nt).then(function(vt){$({value:vt,done:mt})},pt)}(mt,Nt,(pt=W[$](pt)).done,pt.value)})}}}function J(W,st){return Object.defineProperty?Object.defineProperty(W,"raw",{value:st}):W.raw=st,W}function sn(W){if(W&&W.__esModule)return W;var st={};if(null!=W)for(var Q in W)Object.hasOwnProperty.call(W,Q)&&(st[Q]=W[Q]);return st.default=W,st}function mi(W){return W&&W.__esModule?W:{default:W}}function wr(W,st){if(!st.has(W))throw new TypeError("attempted to get private field on non-instance");return st.get(W)}function xr(W,st,Q){if(!st.has(W))throw new TypeError("attempted to set private field on non-instance");return st.set(W,Q),Q}}}]);